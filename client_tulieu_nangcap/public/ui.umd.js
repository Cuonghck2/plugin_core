var re=Object.defineProperty,ie=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable;var ee=(e,t,a)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,Q=(e,t)=>{for(var a in t||(t={}))ne.call(t,a)&&ee(e,a,t[a]);if(Z)for(var a of Z(t))le.call(t,a)&&ee(e,a,t[a]);return e},H=(e,t)=>ie(e,oe(t));(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(e,t){for(var a=new u16(31),r=0;r<31;++r)a[r]=t+=1<<e[r-1];for(var o=new u32(a[30]),r=1;r<30;++r)for(var n=a[r];n<a[r+1];++n)o[n]=n-a[r]<<5|r;return[a,o]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;for(var _b=freb(fdeb,0),fd=_b[0],revfd=_b[1],rev=new u16(32768),i=0;i<32768;++i){var x=(i&43690)>>>1|(i&21845)<<1;x=(x&52428)>>>2|(x&13107)<<2,x=(x&61680)>>>4|(x&3855)<<4,rev[i]=((x&65280)>>>8|(x&255)<<8)>>>1}for(var hMap=function(e,t,a){for(var r=e.length,o=0,n=new u16(t);o<r;++o)e[o]&&++n[e[o]-1];var l=new u16(t);for(o=0;o<t;++o)l[o]=l[o-1]+n[o-1]<<1;var s;if(a){s=new u16(1<<t);var u=15-t;for(o=0;o<r;++o)if(e[o])for(var c=o<<4|e[o],d=t-e[o],p=l[e[o]-1]++<<d,h=p|(1<<d)-1;p<=h;++p)s[rev[p]>>>u]=c}else for(s=new u16(r),o=0;o<r;++o)e[o]&&(s[o]=rev[l[e[o]-1]++]>>>15-e[o]);return s},flt=new u8(288),i=0;i<144;++i)flt[i]=8;for(var i=144;i<256;++i)flt[i]=9;for(var i=256;i<280;++i)flt[i]=7;for(var i=280;i<288;++i)flt[i]=8;for(var fdt=new u8(32),i=0;i<32;++i)fdt[i]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(e){for(var t=e[0],a=1;a<e.length;++a)e[a]>t&&(t=e[a]);return t},bits=function(e,t,a){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&a},bits16=function(e,t){var a=t/8|0;return(e[a]|e[a+1]<<8|e[a+2]<<16)>>(t&7)},shft=function(e){return(e+7)/8|0},slc=function(e,t,a){(t==null||t<0)&&(t=0),(a==null||a>e.length)&&(a=e.length);var r=new(e.BYTES_PER_ELEMENT==2?u16:e.BYTES_PER_ELEMENT==4?u32:u8)(a-t);return r.set(e.subarray(t,a)),r},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(e,t,a){var r=new Error(t||ec[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,err),!a)throw r;return r},inflt=function(e,t,a){var r=e.length;if(!r||a&&a.f&&!a.l)return t||new u8(0);var o=!t||a,n=!a||a.i;a||(a={}),t||(t=new u8(r*3));var l=function(z){var X=t.length;if(z>X){var J=new u8(Math.max(X*2,z));J.set(t),t=J}},s=a.f||0,u=a.p||0,c=a.b||0,d=a.l,p=a.d,h=a.m,v=a.n,y=r*8;do{if(!d){s=bits(e,u,1);var O=bits(e,u+1,3);if(u+=3,O)if(O==1)d=flrm,p=fdrm,h=9,v=5;else if(O==2){var C=bits(e,u,31)+257,V=bits(e,u+10,15)+4,f=C+bits(e,u+5,31)+1;u+=14;for(var g=new u8(f),w=new u8(19),b=0;b<V;++b)w[clim[b]]=bits(e,u+b*3,7);u+=V*3;for(var A=max(w),j=(1<<A)-1,E=hMap(w,A,1),b=0;b<f;){var R=E[bits(e,u,j)];u+=R&15;var T=R>>>4;if(T<16)g[b++]=T;else{var L=0,B=0;for(T==16?(B=3+bits(e,u,3),u+=2,L=g[b-1]):T==17?(B=3+bits(e,u,7),u+=3):T==18&&(B=11+bits(e,u,127),u+=7);B--;)g[b++]=L}}var F=g.subarray(0,C),U=g.subarray(C);h=max(F),v=max(U),d=hMap(F,h,1),p=hMap(U,v,1)}else err(1);else{var T=shft(u)+4,M=e[T-4]|e[T-3]<<8,S=T+M;if(S>r){n&&err(0);break}o&&l(c+M),t.set(e.subarray(T,S),c),a.b=c+=M,a.p=u=S*8,a.f=s;continue}if(u>y){n&&err(0);break}}o&&l(c+131072);for(var m=(1<<h)-1,_=(1<<v)-1,P=u;;P=u){var L=d[bits16(e,u)&m],D=L>>>4;if(u+=L&15,u>y){n&&err(0);break}if(L||err(2),D<256)t[c++]=D;else if(D==256){P=u,d=null;break}else{var $=D-254;if(D>264){var b=D-257,k=fleb[b];$=bits(e,u,(1<<k)-1)+fl[b],u+=k}var N=p[bits16(e,u)&_],I=N>>>4;N||err(3),u+=N&15;var U=fd[I];if(I>3){var k=fdeb[I];U+=bits16(e,u)&(1<<k)-1,u+=k}if(u>y){n&&err(0);break}o&&l(c+131072);for(var q=c+$;c<q;c+=4)t[c]=t[c-U],t[c+1]=t[c+1-U],t[c+2]=t[c+2-U],t[c+3]=t[c+3-U];c=q}}a.l=d,a.p=P,a.b=c,a.f=s,d&&(s=1,a.m=h,a.d=p,a.n=v)}while(!s);return c==t.length?t:slc(t,0,c)},wbits=function(e,t,a){a<<=t&7;var r=t/8|0;e[r]|=a,e[r+1]|=a>>>8},wbits16=function(e,t,a){a<<=t&7;var r=t/8|0;e[r]|=a,e[r+1]|=a>>>8,e[r+2]|=a>>>16},hTree=function(e,t){for(var a=[],r=0;r<e.length;++r)e[r]&&a.push({s:r,f:e[r]});var o=a.length,n=a.slice();if(!o)return[et,0];if(o==1){var l=new u8(a[0].s+1);return l[a[0].s]=1,[l,1]}a.sort(function(f,g){return f.f-g.f}),a.push({s:-1,f:25001});var s=a[0],u=a[1],c=0,d=1,p=2;for(a[0]={s:-1,f:s.f+u.f,l:s,r:u};d!=o-1;)s=a[a[c].f<a[p].f?c++:p++],u=a[c!=d&&a[c].f<a[p].f?c++:p++],a[d++]={s:-1,f:s.f+u.f,l:s,r:u};for(var h=n[0].s,r=1;r<o;++r)n[r].s>h&&(h=n[r].s);var v=new u16(h+1),y=ln(a[d-1],v,0);if(y>t){var r=0,O=0,T=y-t,M=1<<T;for(n.sort(function(g,w){return v[w.s]-v[g.s]||g.f-w.f});r<o;++r){var S=n[r].s;if(v[S]>t)O+=M-(1<<y-v[S]),v[S]=t;else break}for(O>>>=T;O>0;){var C=n[r].s;v[C]<t?O-=1<<t-v[C]++-1:++r}for(;r>=0&&O;--r){var V=n[r].s;v[V]==t&&(--v[V],++O)}y=t}return[new u8(v),y]},ln=function(e,t,a){return e.s==-1?Math.max(ln(e.l,t,a+1),ln(e.r,t,a+1)):t[e.s]=a},lc=function(e){for(var t=e.length;t&&!e[--t];);for(var a=new u16(++t),r=0,o=e[0],n=1,l=function(u){a[r++]=u},s=1;s<=t;++s)if(e[s]==o&&s!=t)++n;else{if(!o&&n>2){for(;n>138;n-=138)l(32754);n>2&&(l(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(l(o),--n;n>6;n-=6)l(8304);n>2&&(l(n-3<<5|8208),n=0)}for(;n--;)l(o);n=1,o=e[s]}return[a.subarray(0,r),t]},clen=function(e,t){for(var a=0,r=0;r<t.length;++r)a+=e[r]*t[r];return a},wfblk=function(e,t,a){var r=a.length,o=shft(t+2);e[o]=r&255,e[o+1]=r>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var n=0;n<r;++n)e[o+n+4]=a[n];return(o+4+r)*8},wblk=function(e,t,a,r,o,n,l,s,u,c,d){wbits(t,d++,a),++o[256];for(var p=hTree(o,15),h=p[0],v=p[1],y=hTree(n,15),O=y[0],T=y[1],M=lc(h),S=M[0],C=M[1],V=lc(O),f=V[0],g=V[1],w=new u16(19),b=0;b<S.length;++b)w[S[b]&31]++;for(var b=0;b<f.length;++b)w[f[b]&31]++;for(var A=hTree(w,7),j=A[0],E=A[1],R=19;R>4&&!j[clim[R-1]];--R);var L=c+5<<3,B=clen(o,flt)+clen(n,fdt)+l,F=clen(o,h)+clen(n,O)+l+14+3*R+clen(w,j)+(2*w[16]+3*w[17]+7*w[18]);if(L<=B&&L<=F)return wfblk(t,d,e.subarray(u,u+c));var U,m,_,P;if(wbits(t,d,1+(F<B)),d+=2,F<B){U=hMap(h,v,0),m=h,_=hMap(O,T,0),P=O;var D=hMap(j,E,0);wbits(t,d,C-257),wbits(t,d+5,g-1),wbits(t,d+10,R-4),d+=14;for(var b=0;b<R;++b)wbits(t,d+3*b,j[clim[b]]);d+=3*R;for(var $=[S,f],k=0;k<2;++k)for(var N=$[k],b=0;b<N.length;++b){var I=N[b]&31;wbits(t,d,D[I]),d+=j[I],I>15&&(wbits(t,d,N[b]>>>5&127),d+=N[b]>>>12)}}else U=flm,m=flt,_=fdm,P=fdt;for(var b=0;b<s;++b)if(r[b]>255){var I=r[b]>>>18&31;wbits16(t,d,U[I+257]),d+=m[I+257],I>7&&(wbits(t,d,r[b]>>>23&31),d+=fleb[I]);var q=r[b]&31;wbits16(t,d,_[q]),d+=P[q],q>3&&(wbits16(t,d,r[b]>>>5&8191),d+=fdeb[q])}else wbits16(t,d,U[r[b]]),d+=m[r[b]];return wbits16(t,d,U[256]),d+m[256]},deo=new u32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et=new u8(0),dflt=function(e,t,a,r,o,n){var l=e.length,s=new u8(r+l+5*(1+Math.ceil(l/7e3))+o),u=s.subarray(r,s.length-o),c=0;if(!t||l<8)for(var d=0;d<=l;d+=65535){var p=d+65535;p>=l&&(u[c>>3]=n),c=wfblk(u,c+1,e.subarray(d,p))}else{for(var h=deo[t-1],v=h>>>13,y=h&8191,O=(1<<a)-1,T=new u16(32768),M=new u16(O+1),S=Math.ceil(a/3),C=2*S,V=function(K){return(e[K]^e[K+1]<<S^e[K+2]<<C)&O},f=new u32(25e3),g=new u16(288),w=new u16(32),b=0,A=0,d=0,j=0,E=0,R=0;d<l;++d){var L=V(d),B=d&32767,F=M[L];if(T[B]=F,M[L]=B,E<=d){var U=l-d;if((b>7e3||j>24576)&&U>423){c=wblk(e,u,0,f,g,w,A,j,R,d-R,c),j=b=A=0,R=d;for(var m=0;m<286;++m)g[m]=0;for(var m=0;m<30;++m)w[m]=0}var _=2,P=0,D=y,$=B-F&32767;if(U>2&&L==V(d-$))for(var k=Math.min(v,U)-1,N=Math.min(32767,d),I=Math.min(258,U);$<=N&&--D&&B!=F;){if(e[d+_]==e[d+_-$]){for(var q=0;q<I&&e[d+q]==e[d+q-$];++q);if(q>_){if(_=q,P=$,q>k)break;for(var z=Math.min($,q-2),X=0,m=0;m<z;++m){var J=d-$+m+32768&32767,ae=T[J],W=J-ae+32768&32767;W>X&&(X=W,F=J)}}}B=F,F=T[B],$+=B-F+32768&32767}if(P){f[j++]=268435456|revfl[_]<<18|revfd[P];var G=revfl[_]&31,Y=revfd[P]&31;A+=fleb[G]+fdeb[Y],++g[257+G],++w[Y],E=d+_,++b}else f[j++]=e[d],++g[e[d]]}}c=wblk(e,u,n,f,g,w,A,j,R,d-R,c),!n&&c&7&&(c=wfblk(u,c+1,et))}return slc(s,0,r+shft(c)+o)},crct=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var a=t,r=9;--r;)a=(a&1&&-306674912)^a>>>1;e[t]=a}return e}(),crc=function(){var e=-1;return{p:function(t){for(var a=e,r=0;r<t.length;++r)a=crct[a&255^t[r]]^a>>>8;e=a},d:function(){return~e}}},dopt=function(e,t,a,r,o){return dflt(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,a,r,!o)},wbytes=function(e,t,a){for(;a;++t)e[t]=a,a>>>=8},gzh=function(e,t){var a=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&wbytes(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),a){e[3]=8;for(var r=0;r<=a.length;++r)e[r+10]=a.charCodeAt(r)}},gzs=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&err(6,"invalid gzip data");var t=e[3],a=10;t&4&&(a+=e[10]|(e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[a++]);return a+(t&2)},gzl=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},gzhl=function(e){return 10+(e.filename&&e.filename.length+1||0)},zlv=function(e){((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)&&err(6,"invalid zlib data"),e[1]&32&&err(6,"invalid zlib data: preset dictionaries not supported")};function inflateSync(e,t){return inflt(e,t)}function gzipSync(e,t){t||(t={});var a=crc(),r=e.length;a.p(e);var o=dopt(e,t,gzhl(t),8),n=o.length;return gzh(o,t),wbytes(o,n-8,a.d()),wbytes(o,n-4,r),o}function gunzipSync(e,t){return inflt(e.subarray(gzs(e),-8),t||new u8(gzl(e)))}function unzlibSync(e,t){return inflt((zlv(e),e.subarray(2,-4)),t)}function decompressSync(e,t){return e[0]==31&&e[1]==139&&e[2]==8?gunzipSync(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?inflateSync(e,t):unzlibSync(e,t)}var te=typeof TextEncoder!="undefined"&&new TextEncoder,td=typeof TextDecoder!="undefined"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch(e){}var dutf8=function(e){for(var t="",a=0;;){var r=e[a++],o=(r>127)+(r>223)+(r>239);if(a+o>e.length)return[t,slc(e,a-1)];o?o==3?(r=((r&15)<<18|(e[a++]&63)<<12|(e[a++]&63)<<6|e[a++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?t+=String.fromCharCode((r&31)<<6|e[a++]&63):t+=String.fromCharCode((r&15)<<12|(e[a++]&63)<<6|e[a++]&63):t+=String.fromCharCode(r)}};function strToU8(e,t){if(t){for(var a=new u8(e.length),r=0;r<e.length;++r)a[r]=e.charCodeAt(r);return a}if(te)return te.encode(e);for(var o=e.length,n=new u8(e.length+(e.length>>1)),l=0,s=function(d){n[l++]=d},r=0;r<o;++r){if(l+5>n.length){var u=new u8(l+8+(o-r<<1));u.set(n),n=u}var c=e.charCodeAt(r);c<128||t?s(c):c<2048?(s(192|c>>6),s(128|c&63)):c>55295&&c<57344?(c=65536+(c&1023<<10)|e.charCodeAt(++r)&1023,s(240|c>>18),s(128|c>>12&63),s(128|c>>6&63),s(128|c&63)):(s(224|c>>12),s(128|c>>6&63),s(128|c&63))}return slc(n,0,l)}function strFromU8(e,t){if(t){for(var a="",r=0;r<e.length;r+=16384)a+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return a}else{if(td)return td.decode(e);var o=dutf8(e),n=o[0],l=o[1];return l.length&&err(8),n}}var axios$2={exports:{}},bind$2=function(t,a){return function(){for(var o=new Array(arguments.length),n=0;n<o.length;n++)o[n]=arguments[n];return t.apply(a,o)}},bind$1=bind$2,toString=Object.prototype.toString;function isArray(e){return Array.isArray(e)}function isUndefined(e){return typeof e=="undefined"}function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function isArrayBuffer(e){return toString.call(e)==="[object ArrayBuffer]"}function isFormData(e){return toString.call(e)==="[object FormData]"}function isArrayBufferView(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&isArrayBuffer(e.buffer),t}function isString(e){return typeof e=="string"}function isNumber(e){return typeof e=="number"}function isObject(e){return e!==null&&typeof e=="object"}function isPlainObject(e){if(toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function isDate(e){return toString.call(e)==="[object Date]"}function isFile(e){return toString.call(e)==="[object File]"}function isBlob(e){return toString.call(e)==="[object Blob]"}function isFunction(e){return toString.call(e)==="[object Function]"}function isStream(e){return isObject(e)&&isFunction(e.pipe)}function isURLSearchParams(e){return toString.call(e)==="[object URLSearchParams]"}function trim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function forEach(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),isArray(e))for(var a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function merge(){var e={};function t(o,n){isPlainObject(e[n])&&isPlainObject(o)?e[n]=merge(e[n],o):isPlainObject(o)?e[n]=merge({},o):isArray(o)?e[n]=o.slice():e[n]=o}for(var a=0,r=arguments.length;a<r;a++)forEach(arguments[a],t);return e}function extend(e,t,a){return forEach(t,function(o,n){a&&typeof o=="function"?e[n]=bind$1(o,a):e[n]=o}),e}function stripBOM(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var utils$e={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM},utils$d=utils$e;function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$2=function(t,a,r){if(!a)return t;var o;if(r)o=r(a);else if(utils$d.isURLSearchParams(a))o=a.toString();else{var n=[];utils$d.forEach(a,function(u,c){u===null||typeof u=="undefined"||(utils$d.isArray(u)?c=c+"[]":u=[u],utils$d.forEach(u,function(p){utils$d.isDate(p)?p=p.toISOString():utils$d.isObject(p)&&(p=JSON.stringify(p)),n.push(encode(c)+"="+encode(p))}))}),o=n.join("&")}if(o){var l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t},utils$c=utils$e;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(t,a,r){return this.handlers.push({fulfilled:t,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1},InterceptorManager$1.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},InterceptorManager$1.prototype.forEach=function(t){utils$c.forEach(this.handlers,function(r){r!==null&&t(r)})};var InterceptorManager_1=InterceptorManager$1,utils$b=utils$e,normalizeHeaderName$1=function(t,a){utils$b.forEach(t,function(o,n){n!==a&&n.toUpperCase()===a.toUpperCase()&&(t[a]=o,delete t[n])})},enhanceError$2=function(t,a,r,o,n){return t.config=a,r&&(t.code=r),t.request=o,t.response=n,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t},enhanceError$1=enhanceError$2,createError$2=function(t,a,r,o,n){var l=new Error(t);return enhanceError$1(l,a,r,o,n)},createError$1=createError$2,settle$1=function(t,a,r){var o=r.config.validateStatus;!r.status||!o||o(r.status)?t(r):a(createError$1("Request failed with status code "+r.status,r.config,null,r.request,r))},utils$a=utils$e,cookies$1=utils$a.isStandardBrowserEnv()?function(){return{write:function(a,r,o,n,l,s){var u=[];u.push(a+"="+encodeURIComponent(r)),utils$a.isNumber(o)&&u.push("expires="+new Date(o).toGMTString()),utils$a.isString(n)&&u.push("path="+n),utils$a.isString(l)&&u.push("domain="+l),s===!0&&u.push("secure"),document.cookie=u.join("; ")},read:function(a){var r=document.cookie.match(new RegExp("(^|;\\s*)("+a+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(a){this.write(a,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),isAbsoluteURL$1=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},combineURLs$1=function(t,a){return a?t.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):t},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(t,a){return t&&!isAbsoluteURL(a)?combineURLs(t,a):a},utils$9=utils$e,ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],parseHeaders$1=function(t){var a={},r,o,n;return t&&utils$9.forEach(t.split(`
`),function(s){if(n=s.indexOf(":"),r=utils$9.trim(s.substr(0,n)).toLowerCase(),o=utils$9.trim(s.substr(n+1)),r){if(a[r]&&ignoreDuplicateOf.indexOf(r)>=0)return;r==="set-cookie"?a[r]=(a[r]?a[r]:[]).concat([o]):a[r]=a[r]?a[r]+", "+o:o}}),a},utils$8=utils$e,isURLSameOrigin$1=utils$8.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),a=document.createElement("a"),r;function o(n){var l=n;return t&&(a.setAttribute("href",l),l=a.href),a.setAttribute("href",l),{href:a.href,protocol:a.protocol?a.protocol.replace(/:$/,""):"",host:a.host,search:a.search?a.search.replace(/^\?/,""):"",hash:a.hash?a.hash.replace(/^#/,""):"",hostname:a.hostname,port:a.port,pathname:a.pathname.charAt(0)==="/"?a.pathname:"/"+a.pathname}}return r=o(window.location.href),function(l){var s=utils$8.isString(l)?o(l):l;return s.protocol===r.protocol&&s.host===r.host}}():function(){return function(){return!0}}();function Cancel$3(e){this.message=e}Cancel$3.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel$3.prototype.__CANCEL__=!0;var Cancel_1=Cancel$3,utils$7=utils$e,settle=settle$1,cookies=cookies$1,buildURL$1=buildURL$2,buildFullPath=buildFullPath$1,parseHeaders=parseHeaders$1,isURLSameOrigin=isURLSameOrigin$1,createError=createError$2,defaults$4=defaults_1,Cancel$2=Cancel_1,xhr=function(t){return new Promise(function(r,o){var n=t.data,l=t.headers,s=t.responseType,u;function c(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}utils$7.isFormData(n)&&delete l["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",h=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";l.Authorization="Basic "+btoa(p+":"+h)}var v=buildFullPath(t.baseURL,t.url);d.open(t.method.toUpperCase(),buildURL$1(v,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function y(){if(!!d){var T="getAllResponseHeaders"in d?parseHeaders(d.getAllResponseHeaders()):null,M=!s||s==="text"||s==="json"?d.responseText:d.response,S={data:M,status:d.status,statusText:d.statusText,headers:T,config:t,request:d};settle(function(V){r(V),c()},function(V){o(V),c()},S),d=null}}if("onloadend"in d?d.onloadend=y:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(y)},d.onabort=function(){!d||(o(createError("Request aborted",t,"ECONNABORTED",d)),d=null)},d.onerror=function(){o(createError("Network Error",t,null,d)),d=null},d.ontimeout=function(){var M=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",S=t.transitional||defaults$4.transitional;t.timeoutErrorMessage&&(M=t.timeoutErrorMessage),o(createError(M,t,S.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",d)),d=null},utils$7.isStandardBrowserEnv()){var O=(t.withCredentials||isURLSameOrigin(v))&&t.xsrfCookieName?cookies.read(t.xsrfCookieName):void 0;O&&(l[t.xsrfHeaderName]=O)}"setRequestHeader"in d&&utils$7.forEach(l,function(M,S){typeof n=="undefined"&&S.toLowerCase()==="content-type"?delete l[S]:d.setRequestHeader(S,M)}),utils$7.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),s&&s!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(u=function(T){!d||(o(!T||T&&T.type?new Cancel$2("canceled"):T),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u))),n||(n=null),d.send(n)})},utils$6=utils$e,normalizeHeaderName=normalizeHeaderName$1,enhanceError=enhanceError$2,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(e,t){!utils$6.isUndefined(e)&&utils$6.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function getDefaultAdapter(){var e;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(e=xhr),e}function stringifySafely(e,t,a){if(utils$6.isString(e))try{return(t||JSON.parse)(e),utils$6.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(e)}var defaults$3={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:getDefaultAdapter(),transformRequest:[function(t,a){return normalizeHeaderName(a,"Accept"),normalizeHeaderName(a,"Content-Type"),utils$6.isFormData(t)||utils$6.isArrayBuffer(t)||utils$6.isBuffer(t)||utils$6.isStream(t)||utils$6.isFile(t)||utils$6.isBlob(t)?t:utils$6.isArrayBufferView(t)?t.buffer:utils$6.isURLSearchParams(t)?(setContentTypeIfUnset(a,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):utils$6.isObject(t)||a&&a["Content-Type"]==="application/json"?(setContentTypeIfUnset(a,"application/json"),stringifySafely(t)):t}],transformResponse:[function(t){var a=this.transitional||defaults$3.transitional,r=a&&a.silentJSONParsing,o=a&&a.forcedJSONParsing,n=!r&&this.responseType==="json";if(n||o&&utils$6.isString(t)&&t.length)try{return JSON.parse(t)}catch(l){if(n)throw l.name==="SyntaxError"?enhanceError(l,this,"E_JSON_PARSE"):l}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$6.forEach(["delete","get","head"],function(t){defaults$3.headers[t]={}}),utils$6.forEach(["post","put","patch"],function(t){defaults$3.headers[t]=utils$6.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$5=utils$e,defaults$2=defaults_1,transformData$1=function(t,a,r){var o=this||defaults$2;return utils$5.forEach(r,function(l){t=l.call(o,t,a)}),t},isCancel$1=function(t){return!!(t&&t.__CANCEL__)},utils$4=utils$e,transformData=transformData$1,isCancel=isCancel$1,defaults$1=defaults_1,Cancel$1=Cancel_1;function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Cancel$1("canceled")}var dispatchRequest$1=function(t){throwIfCancellationRequested(t),t.headers=t.headers||{},t.data=transformData.call(t,t.data,t.headers,t.transformRequest),t.headers=utils$4.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),utils$4.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var a=t.adapter||defaults$1.adapter;return a(t).then(function(o){return throwIfCancellationRequested(t),o.data=transformData.call(t,o.data,o.headers,t.transformResponse),o},function(o){return isCancel(o)||(throwIfCancellationRequested(t),o&&o.response&&(o.response.data=transformData.call(t,o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})},utils$3=utils$e,mergeConfig$2=function(t,a){a=a||{};var r={};function o(d,p){return utils$3.isPlainObject(d)&&utils$3.isPlainObject(p)?utils$3.merge(d,p):utils$3.isPlainObject(p)?utils$3.merge({},p):utils$3.isArray(p)?p.slice():p}function n(d){if(utils$3.isUndefined(a[d])){if(!utils$3.isUndefined(t[d]))return o(void 0,t[d])}else return o(t[d],a[d])}function l(d){if(!utils$3.isUndefined(a[d]))return o(void 0,a[d])}function s(d){if(utils$3.isUndefined(a[d])){if(!utils$3.isUndefined(t[d]))return o(void 0,t[d])}else return o(void 0,a[d])}function u(d){if(d in a)return o(t[d],a[d]);if(d in t)return o(void 0,t[d])}var c={url:l,method:l,data:l,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return utils$3.forEach(Object.keys(t).concat(Object.keys(a)),function(p){var h=c[p]||n,v=h(p);utils$3.isUndefined(v)&&h!==u||(r[p]=v)}),r},data={version:"0.26.0"},VERSION=data.version,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){validators$1[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});var deprecatedWarnings={};validators$1.transitional=function(t,a,r){function o(n,l){return"[Axios v"+VERSION+"] Transitional option '"+n+"'"+l+(r?". "+r:"")}return function(n,l,s){if(t===!1)throw new Error(o(l," has been removed"+(a?" in "+a:"")));return a&&!deprecatedWarnings[l]&&(deprecatedWarnings[l]=!0,console.warn(o(l," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(n,l,s):!0}};function assertOptions(e,t,a){if(typeof e!="object")throw new TypeError("options must be an object");for(var r=Object.keys(e),o=r.length;o-- >0;){var n=r[o],l=t[n];if(l){var s=e[n],u=s===void 0||l(s,n,e);if(u!==!0)throw new TypeError("option "+n+" must be "+u);continue}if(a!==!0)throw Error("Unknown option "+n)}}var validator$1={assertOptions,validators:validators$1},utils$2=utils$e,buildURL=buildURL$2,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,validator=validator$1,validators=validator.validators;function Axios$1(e){this.defaults=e,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=mergeConfig$1(this.defaults,a),a.method?a.method=a.method.toLowerCase():this.defaults.method?a.method=this.defaults.method.toLowerCase():a.method="get";var r=a.transitional;r!==void 0&&validator.assertOptions(r,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var o=[],n=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(a)===!1||(n=n&&v.synchronous,o.unshift(v.fulfilled,v.rejected))});var l=[];this.interceptors.response.forEach(function(v){l.push(v.fulfilled,v.rejected)});var s;if(!n){var u=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(u,o),u=u.concat(l),s=Promise.resolve(a);u.length;)s=s.then(u.shift(),u.shift());return s}for(var c=a;o.length;){var d=o.shift(),p=o.shift();try{c=d(c)}catch(h){p(h);break}}try{s=dispatchRequest(c)}catch(h){return Promise.reject(h)}for(;l.length;)s=s.then(l.shift(),l.shift());return s},Axios$1.prototype.getUri=function(t){return t=mergeConfig$1(this.defaults,t),buildURL(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},utils$2.forEach(["delete","get","head","options"],function(t){Axios$1.prototype[t]=function(a,r){return this.request(mergeConfig$1(r||{},{method:t,url:a,data:(r||{}).data}))}}),utils$2.forEach(["post","put","patch"],function(t){Axios$1.prototype[t]=function(a,r,o){return this.request(mergeConfig$1(o||{},{method:t,url:a,data:r}))}});var Axios_1=Axios$1,Cancel=Cancel_1;function CancelToken(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(o){t=o});var a=this;this.promise.then(function(r){if(!!a._listeners){var o,n=a._listeners.length;for(o=0;o<n;o++)a._listeners[o](r);a._listeners=null}}),this.promise.then=function(r){var o,n=new Promise(function(l){a.subscribe(l),o=l}).then(r);return n.cancel=function(){a.unsubscribe(o)},n},e(function(o){a.reason||(a.reason=new Cancel(o),t(a.reason))})}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]},CancelToken.prototype.unsubscribe=function(t){if(!!this._listeners){var a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}},CancelToken.source=function(){var t,a=new CancelToken(function(o){t=o});return{token:a,cancel:t}};var CancelToken_1=CancelToken,spread=function(t){return function(r){return t.apply(null,r)}},utils$1=utils$e,isAxiosError=function(t){return utils$1.isObject(t)&&t.isAxiosError===!0},utils=utils$e,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(e){var t=new Axios(e),a=bind(Axios.prototype.request,t);return utils.extend(a,Axios.prototype,t),utils.extend(a,t),a.create=function(o){return createInstance(mergeConfig(e,o))},a}var axios$1=createInstance(defaults);axios$1.Axios=Axios,axios$1.Cancel=Cancel_1,axios$1.CancelToken=CancelToken_1,axios$1.isCancel=isCancel$1,axios$1.VERSION=data.version,axios$1.all=function(t){return Promise.all(t)},axios$1.spread=spread,axios$1.isAxiosError=isAxiosError,axios$2.exports=axios$1,axios$2.exports.default=axios$1;var axios=axios$2.exports;axios.defaults.headers.common.Accept="application/json",axios.interceptors.response.use(function(e){return e},function(e){return window.Vue.loadingBar.finish(),console.log(e),Promise.reject(e)});function sleep(e){return new Promise(t=>setTimeout(t,e))}async function pullScriptForm(e,t){let a="";if(e.indexOf(",")!=-1){let r=e.split(",");return Promise.all(r.map(o=>axios.get(o,{responseType:"text",transformResponse:[n=>n]}).then(function(n){return n.data}).catch(async function(n){})))}else return await axios.get(e).then(r=>{t=="text"?a=r.data:a=JSON.stringify(r.data)}).catch(async r=>{}),a}async function processAxios(e,t){var r;let a=null;return e.variables.token=localStorage.getItem("token"),e.variables.db=localStorage.getItem("db"),((r=e==null?void 0:e.variables)==null?void 0:r.collection)&&await axios.post("/admin/vuejx/",e).then(o=>{a=window.Vue.get(o.data,t)}).catch(()=>{window.Vue.toastr.error("Error."),a={}}),a}async function userById(e){var t=`query add($token: String, $db: String, $collection: String, $id: String, $keys: JSON) {
        userById: userById(token: $token, db: $db, collection: $collection, id: $id, keys: $keys)
    }`;return await processAxios({query:t,variables:{collection:e.collection,id:e.id,keys:e.keys}},"data.userById")}async function userUpdateMany(e){var t=`mutation add($token: String, $db: String, $collection: String, $body: JSON, $filter: JSON, $sort: JSON, $skip: Int, $limit: Int, $actionCode: String) {
        userUpdateMany: userUpdateMany(token: $token, db: $db, collection: $collection, body: $body, filter: $filter, sort: $sort, skip: $skip, limit: $limit, actionCode: $actionCode)
    }`;return await processAxios({query:t,variables:{collection:e.collection,body:e.body,filter:e.filter,sort:e.sort,skip:e.skip,limit:e.limit,actionCode:e.actionCode}},"data.userUpdateMany")}async function userOne(e){var t=`query add($token: String, $db: String, $collection: String, $filter: JSON, $skip: Int, $sort: JSON, $keys: JSON) {
        userOne: userOne(token: $token, db: $db, collection: $collection, filter: $filter, skip: $skip, sort: $sort, keys: $keys)
    }`;return await processAxios({query:t,variables:{collection:e.collection,filter:e.filter,skip:e.skip,sort:e.sort,keys:e.keys}},"data.userOne")}async function processData(e){let t=null;return e&&e.body._id&&typeof e.body._id=="string"&&(t=`mutation add($token: String, $db: String, $collection: String, $body: JSON, $actionCode: String) {
            queryAction: userUpdateById(token: $token, db: $db, collection: $collection, body: $body, actionCode: $actionCode)
        }`),t||(t=`mutation add($token: String, $db: String, $collection: String, $body: JSON, $actionCode: String) {
            queryAction: userCreate(token: $token, db: $db, collection: $collection, body: $body, actionCode: $actionCode)
        }`),await processAxios({query:t,variables:{collection:e.collection,body:e.body,actionCode:e.actionCode?e.actionCode:"NEW"}},"data.queryAction")}async function processDataOne(e){let t=null;t=`mutation add($token: String, $db: String, $collection: String, $body: JSON, $filter: JSON, $sort: JSON, $skip: Int, $actionCode: String) {
        queryAction: userUpdateOne(token: $token, db: $db, collection: $collection, body: $body, filter: $filter, sort: $sort, skip: $skip, actionCode: $actionCode)
    }`;const a=e.body.filter;return delete e.body.filter,await processAxios({query:t,variables:{collection:e.collection,body:e.body,filter:a,sort:e.sort,skip:e.skip,actionCode:e.actionCode}},"data.queryAction")}async function htmlToPdf(e){window.Vue.loadingBar.start(),axios.post("/admin/vuejx/docx/topdf",e,{responseType:"arraybuffer",headers:{Authorization:"Bearer "+localStorage.getItem("token"),token:localStorage.getItem("token"),"Content-Type":"application/json",Accept:"application/octet-stream"}}).then(t=>{window.Vue.loadingBar.finish();const a=new Blob([t.data],{type:"application/octet-stream"});var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=e.dataId,document.body.appendChild(r),r.click(),document.body.removeChild(r)}).catch(t=>{window.Vue.loadingBar.error(),console.log(t)})}async function xlsxtemplate(e){window.Vue.loadingBar.start(),axios.post("/admin/vuejx/docx/generateexcel",e,{responseType:"arraybuffer",headers:{Authorization:"Bearer "+localStorage.getItem("token"),token:localStorage.getItem("token"),"Content-Type":"application/json",Accept:"application/octet-stream"}}).then(t=>{window.Vue.loadingBar.finish();const a=new Blob([t.data],{type:"application/octet-stream"});var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=e.dataId&&e.dataId.endsWith(".pdf")?e.dataId:e.collection+".xlsx",document.body.appendChild(r),r.click(),document.body.removeChild(r)}).catch(t=>{window.Vue.loadingBar.error(),console.log(t)})}async function docxtemplate(e){window.Vue.loadingBar.start(),axios.post("/admin/vuejx/docx/generate",e,{responseType:"arraybuffer",headers:{Authorization:"Bearer "+localStorage.getItem("token"),token:localStorage.getItem("token"),"Content-Type":"application/json",Accept:"application/octet-stream"}}).then(t=>{window.Vue.loadingBar.finish();const a=new Blob([t.data],{type:"application/octet-stream"});var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=e.dataId+".docx",document.body.appendChild(r),r.click(),document.body.removeChild(r)}).catch(t=>{window.Vue.loadingBar.error(),console.log(t)})}async function graphqlQuery(e,t){let a=null;return await axios.post("/admin/vuejx/",{query:e,variables:t}).then(r=>{a=r.data.data}).catch(()=>{a=null}),a}async function search(e,t,a,r,o,n,l,s,u,c,d,p,h){let v=[],y=[],O=[],T="",M=1,S={dataResults:[],totalRecord:0,pages:1,page:1,sortBack:[],sortNext:[],size:15,bodyQuery:null},C=JSON.parse(JSON.stringify(window.Vue.router.currentRoute.value));h&&(C.query=h);for(let f in r)if((C.query[r[f].key]||C.query[r[f].key+"_from"]||C.query[r[f].key+"_to"])&&c){let g={};if(Array.isArray(C.query[r[f].key])){let w={bool:{should:[],must:[]}};for(let b of C.query[r[f].key]){let A={},j={bool:{must:[]}};r[f].dataType==="boolean"?(A[r[f].key]=String(b)==="0"?"false":"true",r[f].multiple===!0?r[f].key.endsWith(".raw")?Object.keys(A).length>0&&w.bool.must.push({match_phrase_prefix:String(A).trim()}):Object.keys(A).length>0&&w.bool.must.push({match:String(A).trim()}):r[f].key.endsWith(".raw")?Object.keys(A).length>0&&w.bool.should.push({match_phrase_prefix:A}):Object.keys(A).length>0&&w.bool.should.push({match:A})):(r[f].key.endsWith(".raw")?(A[r[f].key]=b!=="NULL"?String(b).trim():"",Object.keys(A).length>0&&j.bool.must.push({match_phrase_prefix:A})):r[f].key.endsWith(".keyword")?(A[r[f].key]=b!=="NULL"?String(b).trim():"",Object.keys(A).length>0&&j.bool.must.push({match:A})):(A[r[f].key]=b!=="NULL"?String(b).trim():"",Object.keys(A).length>0&&j.bool.must.push({match:A})),Object.keys(j).length>0&&(r[f].multiple===!0?w.bool.must.push(j):w.bool.should.push(j)))}v.push(w)}else{let w={bool:{must_not:[],must:[],should:[]}};if(r[f].relation!=="range"&&r[f].relation!=="date"&&r[f].relation!=="date_range")r[f].dataType==="boolean"?(g[r[f].key]=String(C.query[r[f].key])==="0"?"false":"true",r[f].key.endsWith(".raw")?Object.keys(g).length>0&&v.push({match_phrase_prefix:g}):Object.keys(g).length>0&&v.push({match:g})):(r[f].key.endsWith(".raw")?(g[r[f].key]=C.query[r[f].key]!=="NULL"?String(C.query[r[f].key]).trim():"",Object.keys(g).length>0&&w.bool.must.push({match_phrase_prefix:g})):(g[r[f].key]=C.query[r[f].key]!=="NULL"?String(C.query[r[f].key]).trim():"",C.query[r[f].key]==="NULL"?w.bool.should=[{bool:{must_not:{exists:{field:r[f].key}}}},{match:g}]:Object.keys(g).length>0&&w.bool.must.push({match:g})),v.push(w));else if(r[f].relation==="range"){const b=parseInt(C.query[r[f].key+"_from"]);let A={};if(A[r[f].key]={gte:b},C.query[r[f].key+"_to"]){const j=parseInt(C.query[r[f].key+"_to"]);A[r[f].key].lt=j}v.push({range:A})}else if(r[f].relation==="date"){const b=new Date(parseInt(C.query[r[f].key]));let A=b.getFullYear(),j=b.getMonth()+1;j=j<10?"0"+j:j;let E=b.getDate()<10?"0"+b.getDate():b.getDate(),R={};R[r[f].key]={time_zone:"+07:00",gte:A+"-"+j+"-"+E,lte:A+"-"+j+"-"+E},v.push({range:R})}else if(r[f].relation==="date_range"){const b=new Date(parseInt(C.query[r[f].key+"_from"]));let A=b.getFullYear(),j=b.getMonth()+1;j=j<10?"0"+j:j;let E=b.getDate()<10?"0"+b.getDate():b.getDate(),R={};if(R[r[f].key]={time_zone:"+07:00",gte:A+"-"+j+"-"+E},C.query[r[f].key+"_to"]){const L=new Date(parseInt(C.query[r[f].key+"_to"]));let B=L.getFullYear(),F=L.getMonth()+1;F=F<10?"0"+F:F;let U=L.getDate()<10?"0"+L.getDate():L.getDate();R[r[f].key].lte=B+"-"+F+"-"+U}v.push({range:R})}}}if(C.query.keywords&&c){let f={bool:{should:[]}};for(let g in a){let w={bool:{must:[]}},b=decodeURIComponent(C.query.keywords).toLocaleLowerCase().split(" ");if(a[g].endsWith(".raw")){let A={};A[a[g]]=decodeURIComponent(C.query.keywords).toLocaleLowerCase(),Object.keys(A).length>0&&w.bool.must.push({match_phrase_prefix:A})}else if(a[g].endsWith(".keyword")){let A={};A[a[g]]=decodeURIComponent(C.query.keywords).toLocaleLowerCase(),Object.keys(A).length>0&&w.bool.must.push({match:A})}else if(a[g]==="shortName"||a[g]==="MaMuc"){let A={};A[a[g]]=decodeURIComponent(C.query.keywords),Object.keys(A).length>0&&w.bool.must.push({match:A})}else for(let A of b){let j={};A!==""&&(j[a[g]]=A,Object.keys(j).length>0&&w.bool.must.push({match:j}))}f.bool.should.push(w)}v.push(f)}let V={size:u,query:{bool:{filter:{match:{site:localStorage.getItem("site")}},must:[]}}};if(V.highlight={pre_tags:["<es_em>"],post_tags:["</es_em>"],fields:{"*":{}}},n!==null&&(V._source={includes:n}),l!==null?V.sort=JSON.parse(JSON.stringify(l)):V.sort=[],s?V.query.bool.must.push(s):V.query.bool.must.push({match:{storage:"regular"}}),o)for(const f of o)V.query.bool.must.push(f);if(v!==void 0)for(const f of v)V.query.bool.must.push(f);if(p)typeof p.sortNext=="string"&&p.sortNext?y=JSON.parse(decodeURIComponent(p.sortNext)):y=p.sortNext?p.sortNext:[],typeof p.sortBack=="string"&&p.sortBack?O=JSON.parse(decodeURIComponent(p.sortBack)):O=p.sortBack?p.sortBack:[],T=p.paggingType,p.sizeLast&&(d=p.sizeLast),u=p.size,S.size=u,M=p.page,S.page=M;else{const f=new URLSearchParams(window.location.href);f.get("_s_n")&&(y=JSON.parse(decodeURIComponent(f.get("_s_n")))),f.get("_s_b")&&(O=JSON.parse(decodeURIComponent(f.get("_s_b")))),f.get("_pagging")&&(T=f.get("_pagging")),f.get("_rows")&&c&&(u=f.get("_rows"),S.size=u),f.get("_sizeLast")&&(d=f.get("_sizeLast")),f.get("_page")&&c&&(M=f.get("_page"),S.page=M)}if(V.from=0,V.size=u,T==="next"&&M!=1){if(Array.isArray(y)&&y.length>0){V.search_after=y,delete V.from,V.sort=[];let f=!1;d&&d!=u&&(V.size=d);for(let g of l)if(typeof g=="object"){let w={};w[Object.keys(g)[0]]=g[Object.keys(g)[0]],V.sort.push(w),Object.keys(g)[0]==="id.keyword"&&(f=!0)}f||V.sort.push({"id.keyword":"asc"})}}else if(T==="prev"&&M!=1){if(Array.isArray(O)&&O.length>0){V.search_after=O,delete V.from,V.sort=[];let f=!1;for(let g of l)if(typeof g=="object"){let w={};g[Object.keys(g)[0]]==="asc"?w[Object.keys(g)[0]]="desc":w[Object.keys(g)[0]]="asc",V.sort.push(w),Object.keys(g)[0]==="id.keyword"&&(f=!0)}f||V.sort.push({"id.keyword":"desc"})}}else if(T==="last"&&M!=1){V.size=d,delete V.from,V.sort=[];let f=!1;for(let g of l)if(typeof g=="object"){let w={};g[Object.keys(g)[0]]==="asc"?w[Object.keys(g)[0]]="desc":w[Object.keys(g)[0]]="asc",V.sort.push(w),Object.keys(g)[0]==="id.keyword"&&(f=!0)}f||V.sort.push({"id.keyword":"desc"})}else if(T==="first"){delete V.from,V.sort=[];let f=!1;for(let g of l)if(typeof g=="object"){let w={};w[Object.keys(g)[0]]=g[Object.keys(g)[0]],V.sort.push(w),Object.keys(g)[0]==="id.keyword"&&(f=!0)}f||V.sort.push({"id.keyword":"asc"})}else V.sort.push({"id.keyword":"asc"});return S.bodyQuery=V,e&&e.$emit("body_query",V),await window.VueJX.dispatch("vuejx_manager/graphqlQuery",{query:`
            query search($token: String, $body: JSON, $db: String, $collection: String) {
                results: search(token: $token, body: $body, db: $db, collection: $collection )
            }
        `,variables:{body:V,db:localStorage.getItem("db"),collection:t}}).then(async f=>{let g=[];if(f.results!==null&&f.results!==void 0&&(g=f.results.hits.hits,S.totalRecord=f.results.hits.total.value,typeof S.totalRecord=="object"&&(S.totalRecord=S.totalRecord.count),e&&e.$emit("init_total",S.totalRecord)),(T==="prev"||T==="last")&&M!=1?(!window.Vue&&!window.Vue.reverse&&await window.sleep(500),S.dataResults=window.Vue.reverse(g)):S.dataResults=g,S.dataResults.length>0&&(S.sortBack=S.dataResults[0].sort,S.sortNext=S.dataResults[S.dataResults.length-1].sort),S.totalRecord>u){let w=Math.floor(S.totalRecord/u);S.totalRecord%u>0&&(w=w+1),S.pages=w}else M=1,S.pages=1;e&&e.$emit("init",S.dataResults)}).catch(f=>{e&&e.$emit("init",[]),S.dataResults=[]}),S}async function aggsData(e,t,a,r,o,n,l,s,u,c,d,p,h,v,y,O,T,M){let S={},C=window.Vue.router.currentRoute.value,V=!1,f=localStorage.getItem("site");C.query.hasOwnProperty("adv_filter")&&String(C.query.adv_filter)==="true"&&(V=!0);let g=[],w=[],b=[];(C.query[a.keyAggs]===void 0||C.query[a.keyAggs]===null||C.query[a.keyAggs]==="")&&(w=[],b=[]);for(let m in c)if(!(a.keyAggs==c[m].key&&c[m].key==C.query._state_aggs)){if(C.query[c[m].key]&&p)if(Array.isArray(C.query[c[m].key])){let _={bool:{should:[],must:[]}};for(let P of C.query[c[m].key]){let D={};c[m].relation==="eq"&&c[m].keyType==="multiple"?c[m].dataType==="boolean"?(D[c[m].key]=String(P)==="0"?"false":"true",c[m].key.endsWith(".raw")?_.bool.must.push({match_phrase_prefix:D}):_.bool.must.push({match:D})):(D[c[m].key]=P!=="NULL"?P:"",c[m].key.endsWith(".raw")?_.bool.must.push({match_phrase_prefix:D}):_.bool.must.push({match:D})):c[m].relation==="eq"&&c[m].keyType!=="multiple"&&(c[m].dataType==="boolean"?(D[c[m].key]=String(P)==="0"?"false":"true",c[m].key.endsWith(".raw")?_.bool.should.push({match_phrase_prefix:D}):_.bool.should.push({match:D})):(D[c[m].key]=P!=="NULL"?P:"",c[m].key.endsWith(".raw")?_.bool.should.push({match_phrase_prefix:D}):_.bool.should.push({match:D})))}g.push(_)}else{let _={};if(c[m].relation!=="range")c[m].dataType==="boolean"?(_[c[m].key]=String(C.query[c[m].key])==="0"?"false":"true",c[m].key.endsWith(".raw")?g.push({match_phrase_prefix:_}):g.push({match:_})):(_[c[m].key]=C.query[c[m].key]!=="NULL"?C.query[c[m].key]:"",c[m].key.endsWith(".raw")?g.push({match_phrase_prefix:_}):g.push({match:_}));else if(c[m].relation==="range"){let P="";if(C.query[c[m].key].indexOf("-")>0){let[D,$]=C.query[c[m].key].split("-"),k="{";D!=="*"&&(k=k+'"gte":'+D),$!=="*"&&(D!=="*"&&(k=k+", "),k=k+'"lt":'+$),k=k+" }",P=`
                            {
                                "range": {
                                    "`+c[m].key+'": '+k+`
                                }
                            }
                        `}g.push(JSON.parse(P))}}}if(C.query.keywords!==void 0&&C.query.keywords!==""&&p){let m={bool:{should:[]}};for(let _ in d){let P={bool:{must:[]}};if(d[_].endsWith(".raw")){let D={};D[d[_]]=decodeURIComponent(C.query.keywords).toLocaleLowerCase(),P.bool.must.push({match_phrase_prefix:D})}else{let D=decodeURIComponent(C.query.keywords).toLocaleLowerCase().split(" ");for(let $ of D){let k={};$!==""&&(k[d[_]]=$,P.bool.must.push({match:k}))}}m.bool.should.push(P)}g.push(m)}let A=[{_count:{order:"desc"}}];a._termAggs&&(A=[]),a.order&&(A=a.order);let j=o*r-r;console.log("pageCountpageCount",o,r,j),j<0&&(j=0);let E={size:0,query:{bool:{filter:{match:{site:f}},must:[]}},aggs:{report:{filter:{bool:{must_not:s,must:[],filter:{match:{site:f}}}},aggs:{aggregations:{terms:{size:1e4,field:a.keyAggs},aggs:{aggs_sort:{bucket_sort:{sort:A,size:r,from:j}},top_el_hits:{top_hits:{_source:{includes:a.includesAggs?a.includesAggs:[a.keyAggs,a.keyAggs.replace(n,l),a.keyAggs.replace(n,"type")]},size:1}}}}}}}};if(t==="range"){let m=[];for(const _ of O)m.push({from:_.from,to:_.to});E.aggs.report.aggs={report:{range:{field:a.keyAggs,ranges:m}}}}else if(t==="fulltext"){let m=1,_={_count:"desc"};a.min_doc_count&&(m=a.min_doc_count),a.order&&(_=a.order),E.aggs.report.aggs={aggregations:{terms:{size:a.sizeAggs,field:a.keyAggs,min_doc_count:m,order:_},aggs:{aggs_sort:{bucket_sort:{sort:A,size:r,from:j}}}}}}else if(t==="custom")E.aggs=M;else{if(Array.isArray(a.includes))for(let m of a.includes)E.aggs.report.aggs.aggregations.aggs.top_el_hits.top_hits._source.includes.push(m);a._termAggs&&(E.aggs.report.aggs.aggregations.terms.order={_term:a._termAggs?a._termAggs:"asc"})}if(u!==null){let m=!0;for(const _ of u)_.match!==void 0&&_.match!==null&&_.match.hasOwnProperty("storage")&&(m=!1),E.query.bool.must.push(_);m&&E.query.bool.must.push({match:{storage:"regular"}})}else E.query.bool.must.push({match:{storage:"regular"}});if(g!=null&&g.length>0)for(const m of g)(V||m.hasOwnProperty("bool")||m.hasOwnProperty("match")&&!m.match.hasOwnProperty(a.keyAggs)||m.hasOwnProperty("match_phrase_prefix")&&!m.match_phrase_prefix.hasOwnProperty(a.keyAggs))&&E.query.bool.must.push(m);let R=[],L="";v?(w=[],b=[]):w=[];const B=C.query[a.keyAggs];let F={},U={};return await window.Vue.$root.dispatch("vuejx_manager/graphqlQuery",{query:`
                query search($token: String, $bodyAggs: JSON, $dbAggs: String, $collectionAggs: String, $publicData: String) {
                    aggs: aggs(token: $token, body: $bodyAggs, db: $dbAggs, collection: $collectionAggs, publicData: $publicData )
                }
            `,variables:{bodyAggs:E,dbAggs:localStorage.getItem("db"),collectionAggs:a.collectionAggs,publicData:h}}).then(async m=>{L="";let _=-1,P={};if(t==="fulltext"){let D=m.aggs.aggregations.report.doc_count;S.showPaggingSizeTotal=D,o*a.sizeAggs>=D||a.sizeAggs>=D?y=0:y=1,R=[];for(const $ of m.aggs.aggregations.report.aggregations.buckets){let k=$.key;if(T&&T.ignore_prefix)if(String(T.ignore_prefix).indexOf(",")!=-1){const N=String(T.ignore_prefix).split(",");for(const I of N)k=String(k).replace(I,"")}else k=String(k).replace(T.ignore_prefix,"");else T&&(k=T[$.key]);if(k||(k="NULL"),R.push({code:$.key?$.key:"NULL",name:String(k).trim(),y:$.doc_count,counter:$.key?$.doc_count:""}),_=_+1,Array.isArray(B)){for(const N of B)if(String($.key?$.key:"NULL")===String(N)){v?w.push(_):w=[_];break}}else String($.key?$.key:"NULL")===String(B)&&(v?w.push(_):w=[_])}b=w}else if(t==="range"){for(const k of m.aggs.aggregations.report.report.buckets)P[k.from+"-"+k.to]=k.doc_count>0?k.doc_count:"";R=[];let D=C.query[a.keyAggs+"_from"],$=C.query[a.keyAggs+"_to"];for(const k of O)R.push({code:k.from+"-"+k.to,name:String(k[l]).trim(),counter:P[k.from+"-"+k.to]!==void 0?P[k.from+"-"+k.to]:0,y:P[k.from+"-"+k.to]!==void 0?P[k.from+"-"+k.to]:0}),_=_+1,String(k.from+"-"+k.to)===D+"-"+$&&(v?w.push(_):w=[_]);b=w}else if(t==="custom")S.aggs=m.aggs;else{for(const D of m.aggs.aggregations.report.aggregations.buckets){let $="",k=D.key;if(D.top_el_hits&&D.top_el_hits.hits.hits){for(const N of D.top_el_hits.hits.hits)if(v)if(String(a.keyAggs).indexOf(".")!==-1){let I=a.keyAggs.split(".")[0],q=null;if(a.keyAggs_arrayfield?q=window.Vue.objectViewObject(N,a.keyAggs_arrayfield):q=N._source[I],Array.isArray(q))for(let z of q){let X=a.keyAggs.replace(I+".",""),J=window.Vue.objectView(z,X,"");if(J||(X=a.keyAggs.substr(a.keyAggs.indexOf(".")+1).replace(".keyword",""),J=window.Vue.objectView(z,X,"")),a.keyAggs_arrayfieldvalue&&(J=window.Vue.objectView(z,a.keyAggs_arrayfieldvalue,"")),J.toLocaleLowerCase().replace(/\./g,"")==k.toLocaleLowerCase().replace(/ /g,"")){a.keyAggs_arrayfieldvalue?($=window.Vue.objectView(z,a.keyAggs_arrayfieldtext,""),L=window.Vue.objectView(z,a.keyAggs_arrayfieldvalue.replace("."+n,".type"),"")):($=window.Vue.objectView(z,X.replace("."+n,"."+l),""),L=window.Vue.objectView(z,X.replace("."+n,".type"),""));break}}else{let z=window.Vue.objectView(N,"_source."+a.keyAggs,"");if(a.keyAggs_fieldvalue&&(z=window.Vue.objectView(N,a.keyAggs_fieldvalue,"")),z.toLocaleLowerCase().replace(/\./g,"")==k.toLocaleLowerCase().replace(/ /g,"")){a.keyAggs_fieldtext?($=window.Vue.objectView(N,a.keyAggs_fieldtext,""),L=window.Vue.objectView(N,a.keyAggs_fieldtext.replace(n,"type"),"")):($=window.Vue.objectView(N,"_source."+a.keyAggs.replace(n,l),""),L=window.Vue.objectView(N,"_source."+a.keyAggs.replace(n,"type"),""));break}}}else{const I=a.keyAggs;if(Array.isArray(N._source[I])){for(let q of N._source[I])if(q._source[n]==k.toLocaleLowerCase().replace(/ /g,"")){$=q._source[l],L=q._source.type;break}}else if(window.Vue.objectView(N,"_source."+a.keyAggs,"").toLocaleLowerCase().replace(/\./g,"")==k.toLocaleLowerCase().replace(/ /g,"")){$=window.Vue.objectView(N,"_source."+a.keyAggs.replace(n,l),""),L=window.Vue.objectView(N,"_source."+a.keyAggs.replace(n,"type"),"");break}}else if(window.Vue.objectView(N,"_source."+a.keyAggs,"").toLocaleLowerCase().replace(/\./g,"")==k.replace(/ /g,"")){$=window.Vue.objectView(N,"_source."+a.keyAggs.replace(n,l),""),L=window.Vue.objectView(N,"_source."+a.keyAggs.replace(n,"type"),"");break}}if(T&&T.ignore_prefix)if(String(T.ignore_prefix).indexOf(",")!=-1){const N=String(T.ignore_prefix).split(",");for(const I of N)$=String($).replace(I,"")}else $=String($).replace(T.ignore_prefix,"");else T&&($=T[$]);if(R.push({code:k,name:String($).trim(),counter:D.doc_count}),U[k]=D.doc_count,_=_+1,Array.isArray(B)){for(const N of B)if(String(k)===String(N)){v?w.push(_):w=[_];break}}else String(k)===String(B)&&(v?w.push(_):w=[_])}b=w}}).catch(m=>{if(R=[],t==="range")for(const _ of O)R.push({code:_.from+"-"+_.to,name:_[l],counter:"",y:""})}),r>R.length?y=0:y=1,R.length===0?S.pageCount=o-1:S.pageCount=o,S.pageCountNext=y,S.items=R,S.selectedMenuXXX=w,S.activeArray=b,S.collectionDM=L,S.ignore=F,e&&(e.$emit("counterObject",U),e.$emit("result",R)),S}async function dataReport(e){let t=`
     query search($token: String, 
 `,a={},r=" ",o={};for(let l of e){let s=Object.keys(l)[0],u="false";l[s].publicData&&(u=String(l[s].publicData)),t=t+" $body"+s+": JSON, $db"+s+": String, $collection"+s+": String",l[s].type==="data"?r=r+" "+s+": search(token: $token, body: $body"+s+", db: $db"+s+", collection: $collection"+s+" ), ":r=r+" "+s+": aggs(token: $token, body: $body"+s+", db: $db"+s+", collection: $collection"+s+', publicData: "'+u+'" ), ',l[s].report?o[s]=!0:o[s]=!1,a["body"+s]=l[s].body,a["db"+s]=localStorage.getItem("db"),a["collection"+s]=l[s].collection}t=t+" ){ "+r+" } ";let n=null;return await window.VueJX.dispatch("vuejx_manager/graphqlQuery",{query:t,variables:a}).then(l=>{JSON.parse(JSON.stringify(l))}).catch(l=>{}),n}var VueJXHeaderSimple={props:{collection:{type:String,default:()=>""},id:{type:String,default:()=>""},db:{type:String,default:()=>""},groupid:{type:String,default:()=>""}},methods:{toPage(e){if(this.page=e.shortName,e.targetURL)e.targetMode==1?window.open(e.targetURL,"_blank"):window.location.href=e.targetURL;else{const t=window.Vue.router.currentRoute.value;window.Vue.redirect(null,!0,"/"+t.params.visibility+"/"+localStorage.getItem("site")+"/"+e.shortName,!0)}},async doLogout(){try{window.db.set("groupNav",{id:"groupNav",page:[]}),window.db.set("groupNav",{id:"webNav",page:[]}),localStorage.setItem("token",""),localStorage.setItem("user",""),localStorage.setItem("isAuthenticated",!1),window.location.href="/#/login"}catch{window.location.href="/#/login"}},toLogin(){window.location.href="/#/login"},async toGroupPage(e){let t=await window.db.get(e+"Nav");t&&Array.isArray(t.page)&&t.page.length>0?window.location.href="/#/"+e+"/"+window.Vue.router.currentRoute.value.params.site+"/"+Object.values(t.page[0])[0].shortName:window.location.href="/#/"+e+"/"+window.Vue.router.currentRoute.value.params.site},async pullNewPages(e){let t=this;if(e){let a=await window.db.get(e);a?(t.pages=a.page,t.renderPage=!0):(await window.sleep(50),await t.pullNewPages())}}},watch:{$route:async function(e,t){let a=this;a.renderPage=!1,(e.params.visibility==="group"||e.params.visibility==="web")&&e.params.visibility!=t.params.visibility&&(a.pages=[],await a.pullNewPages(e.params.visibility+"Nav")),localStorage.getItem("user")&&(a.user=JSON.parse(localStorage.getItem("user")))}},mounted:function(){let e=this;e.renderPage=!1,console.log("mountedmountedmountedmounted3");let t=window.Vue.router.currentRoute.value.params.visibility;e.page=window.Vue.router.currentRoute.value.params.page,e.$nextTick(function(){setTimeout(async()=>{(t==="web"||t==="group")&&await e.pullNewPages(t+"Nav"),localStorage.getItem("user")&&(e.user=JSON.parse(localStorage.getItem("user")))},0)})},data:()=>({renderPage:!1,pages:[],defaultPage:"",defaultPageGroup:"",user:null,page:""}),template:`<div class="vuejx__header" :key="pages"><slot name="header_top"></slot><div class="hd__screen"><div class="top-bar"><slot name="header_nav"><div class="left" tabindex="0"><div v-for="(item, index) in pages" v-bind:key="index" class="item" tabindex="0" :class="{ active: page ? page.startsWith(Object.values(item)[0].shortName) || String(Object.values(item)[0].activePage).indexOf(page + ',') !== -1 : false }"><button aria-label="btn" class="label" @click.stop="toPage(Object.values(item)[0])"> {{ Object.values(item)[0].title }} </button><div class="dropdown" v-if="Object.values(item)[0].sub___pages && Object.values(item)[0].sub___pages.length > 0"> <div v-for="(sub, indexSub) in Object.values(item)[0].sub___pages" v-bind:key="indexSub"> <button aria-label="btn" class="dropdown-child" @click.stop="toPage(sub['_source'])"> {{ sub._source?.title }} </button> </div> </div></div></div></slot><slot name="header_login"><div class="left" tabindex="0"><div class="item"><button aria-label="btn" class="label" v-if="user"> <i class="mdi mdi-account-circle" /> <span>{{ user?.title }}</span> </button><button aria-label="btn" class="label" @click="toLogin" v-else> <i class="mdi mdi-power-settings-new" /> <span>\u0110\u0103ng nh\u1EADp</span> </button><div class="dropdown" v-if="user"><div @click="toGroupPage('web')"> <button aria-label="btn" class="dropdown-child">Trang khai th\xE1c</button> </div><div> <div class="divider"></div> </div><div @click="toGroupPage('group')"> <button aria-label="btn" class="dropdown-child">Trang qu\u1EA3n tr\u1ECB</button> </div><div> <div class="divider"></div> </div><div @click="doLogout"> <button aria-label="btn" class="dropdown-child">\u0110\u0103ng xu\u1EA5t</button> </div></div></div></div></slot></div></div></div>`},VueJXNavVertical={props:{collection:{type:String,default:()=>""},id:{type:String,default:()=>""},db:{type:String,default:()=>""},groupid:{type:String,default:()=>""}},methods:{toPage(e){try{if(e&&e.sub___pages&&e.sub___pages.length>0)return;if(this.page=e.shortName,e.targetURL)e.targetMode==1?window.open(e.targetURL,"_blank"):window.location.href=e.targetURL;else{const t=window.Vue.router.currentRoute.value;window.Vue.redirect(null,!0,"/"+t.params.visibility+"/"+localStorage.getItem("site")+"/"+e.shortName,!0)}}catch{}},async doLogout(){try{window.db.set("groupNav",{id:groupNav,page:[]}),window.db.set("webNav",{id:groupNav,page:[]}),localStorage.setItem("token",""),localStorage.setItem("user",""),localStorage.setItem("isAuthenticated",!1),window.location.href="/#/login"}catch{window.location.href="/#/login"}},toLogin(){window.location.href="/#/login"},async toGroupPage(e){let t=await window.db.get(e+"Nav");t&&Array.isArray(t.page)&&t.page.length>0?window.location.href="/#/"+e+"/"+window.Vue.router.currentRoute.value.params.site+"/"+Object.values(t.page[0])[0].shortName:window.location.href="/#/"+e+"/"+window.Vue.router.currentRoute.value.params.site},async pullNewPages(e){let t=this;if(e){let a=await window.db.get(e);if(a){t.pages=a.page;let r=!1;this.user&&Array.isArray(this.user.role)&&this.user.role.length>0&&this.user.role.indexOf("admin")!=-1&&(r=!0);for(let o of t.pages){let n=Object.keys(o)[0],l=Object.values(o)[0];o[n].activePage="";let s=[];if(t.perchkx(r,o,l,n),Array.isArray(l.sub___pages)&&l.sub___pages.length>0){for(let u of l.sub___pages)l=u._source,n=u._source.shortName,s.push(n),t.perchkx(r,u._source,l,n);o[Object.keys(o)[0]].activePage=s.join(",")}}}else await window.sleep(50),await t.pullNewPages()}},perchkx(e,t,a,r){if(!e&&t&&t[r])if(a.openAccess=="2")t[r].perView=!0;else if(a.openAccess=="1"&&this.user)t[r].perView=!0;else if(a.openAccess=="0"&&this.user&&Array.isArray(a.accessRoles)&&a.accessRoles.length>0){let o=!1;for(const n of a.accessRoles)if(Array.isArray(this.user.role)&&this.user.role.length>0&&this.user.role.indexOf(n.shortName)!=-1)if(n.permission=="4"){o=!1;break}else{o=!0;break}t[r].perView=o}else this.user&&Array.isArray(this.user.role)&&this.user.role.length>0&&this.user.role.indexOf("admin")!=-1?t[r].perView=!0:t[r].perView=!1;else if(t&&t[r])if(a.openAccess=="0"&&this.user&&Array.isArray(a.accessRoles)&&a.accessRoles.length>0){let o=!1,n=!1;for(const l of a.accessRoles)if(Array.isArray(this.user.role)&&this.user.role.length>0&&this.user.role.indexOf(l.shortName)!=-1)if(n=!1,l.permission=="5"){o=!1;break}else{o=!0;break}else n=!0;n?t[r].perView=!0:t[r].perView=o}else t[r].perView=!0}},watch:{$route:async function(e,t){let a=this;a.renderPage=!1,(e.params.visibility==="group"||e.params.visibility==="web")&&e.params.visibility!=t.params.visibility&&(a.pages=[],await a.pullNewPages(e.params.visibility+"Nav")),localStorage.getItem("user")&&(a.user=JSON.parse(localStorage.getItem("user")))}},mounted:function(){let e=this;console.log("mountedmountedmountedmounted2"),e.renderPage=!1,e.render___header__nav=!1;let t=window.Vue.router.currentRoute.value.params.visibility;e.page=window.Vue.router.currentRoute.value.params.page,e.$nextTick(function(){setTimeout(async()=>{(t==="web"||t==="group")&&await e.pullNewPages(t+"Nav"),localStorage.getItem("user")&&(e.user=JSON.parse(localStorage.getItem("user")));for(let a=0;a<100;a++)if(document.getElementById("body___container__header_view")){setTimeout(()=>{e.render___header__nav=!0},0);break}else await window.sleep(20)},0)})},data:()=>({renderPage:!1,pages:[],defaultPage:"",defaultPageGroup:"",user:null,page:"",render___header__nav:!1}),template:`<div v-if="render___header__nav"><slot name="menu_top_right"><Teleport to="#body___container__header_view"><span></span></Teleport></slot></div><nav class="tree-nav" :key="pages"><detailsv-for="(item, index) in pages" v-bind:key="index" tabindex="0":open="page ? page.startsWith(Object.values(item)[0].shortName) || String(Object.values(item)[0].activePage).indexOf(page + ',') !== -1 : false"class="tree-nav__item is-expandable":class="{ active: page ? page.startsWith(Object.values(item)[0].shortName) || String(Object.values(item)[0].activePage).indexOf(page + ',') !== -1 : false }"><summary@click="toPage(Object.values(item)[0])"class="tree-nav__item-title relative":class="{ active: page ? page.startsWith(Object.values(item)[0].shortName) || String(Object.values(item)[0].activePage).indexOf(page + ',') !== -1 : false }"><i class="mdi icon_nav" :class="Object.values(item)[0].shortName"></i><span>{{ Object.values(item)[0].title }}</span><svg v-if="Object.values(item)[0].sub___pages && Object.values(item)[0].sub___pages.length > 0" class="absolute right-0 expand___tree" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M19.9201 8.94995L13.4001 15.47C12.6301 16.24 11.3701 16.24 10.6001 15.47L4.08008 8.94995" stroke="#8A8E95" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/></svg></summary><div class="wrap__tree__child"><details  v-if="Object.values(item)[0].sub___pages && Object.values(item)[0].sub___pages.length > 0"v-for="(itemChild, indexChild) in Object.values(item)[0].sub___pages"v-bind:key="indexChild"class="tree-nav__item is-expandable"><summary@click="toPage(Object.values(itemChild)[0])"class="tree-nav__item-title flex":class="{ active: page ? page.startsWith(Object.values(itemChild)[0].shortName) || String(Object.values(itemChild)[0].activePage).indexOf(page + ',') !== -1 : false }"><i class="mdi mdi-chevron-right"></i><span>{{ Object.values(itemChild)[0].title }}</span></summary></details></div></details></nav>`},VueJXNavVerticalInfo={props:{collection:{type:String,default:()=>""},id:{type:String,default:()=>""},db:{type:String,default:()=>""},groupid:{type:String,default:()=>""},teleport:{type:String,default:()=>"default_nav"}},methods:{doLogout(){try{localStorage.setItem("token",""),localStorage.setItem("user",""),localStorage.setItem("isAuthenticated",!1),window.location.href="/#/login"}catch{window.location.href="/#/login"}},toLogin(){window.location.href="/#/login"},async toGroupPage(e){let t=await window.db.get(nav);t&&Array.isArray(t.page)&&t.page.length>0?window.location.href="/#/"+e+"/"+window.Vue.router.currentRoute.value.params.site+"/"+Object.values(t.page[0])[0].shortName:window.location.href="/#/"+e+"/"+window.Vue.router.currentRoute.value.params.site},async doChangePassAction(){let e=this;await window.Vue.$axios.post("/admin/security/guest/processAccountPassword",{passwordNew:e.passwordNew,passwordNewConfirm:e.passwordConfirm,token:localStorage.getItem("token")},{headers:{db:localStorage.getItem("db"),"Content-Type":"application/json; charset=utf-8",Accept:"application/json, text/plain, */*"}}).then(t=>{e.changePass=!1}).catch(t=>{alert("\u0110\u1ED5i m\u1EADt kh\u1EA9u th\u1EA5t b\u1EA1i.")})}},watch:{$route:async function(e,t){let a=this;localStorage.getItem("user")&&(a.user=JSON.parse(localStorage.getItem("user")))}},mounted:function(){let e=this;console.log("mountedmountedmountedmounte5"),localStorage.getItem("user")&&(e.user=JSON.parse(localStorage.getItem("user")))},data:()=>({renderPage:!1,pages:[],defaultPage:"",defaultPageGroup:"",user:null,page:"",password:"",passwordNew:"",passwordConfirm:"",changePass:!1,defaultNav:!0}),template:`<div class="left"><div class="item"><button aria-label="btn" class="label" v-if="user"> <i class="mdi mdi-account-circle" /> <span>{{ user?.title }}</span> </button><button aria-label="btn" class="label" @click="toLogin" v-else> <i class="mdi mdi-power-settings-new" /> <span>\u0110\u0103ng nh\u1EADp</span> </button><div class="dropdown" v-if="user"><div @click="toGroupPage('web')"> <button aria-label="btn" class="dropdown-child">Trang khai th\xE1c</button> </div><div> <div class="divider"></div> </div><div @click="toGroupPage('group')"> <button aria-label="btn" class="dropdown-child">Trang qu\u1EA3n tr\u1ECB</button> </div><div> <div class="divider"></div> </div><div @click="changePass = !changePass"> <button aria-label="btn" class="dropdown-child">\u0110\u1ED5i m\u1EADt kh\u1EA9u</button> </div><div> <div class="divider"></div> </div><div @click="doLogout"> <button aria-label="btn" class="dropdown-child">\u0110\u0103ng xu\u1EA5t</button> </div></div></div><div class="fixed z-10 inset-0 overflow-y-auto" style="z-index: 9999;" v-if="changePass"><div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"><div class="fixed inset-0 transition-opacity"><div class="absolute inset-0 bg-gray-100 opacity-75"></div></div><span class="hidden sm:inline-block sm:align-middle sm:h-screen"></span><div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle w-1/4"role="dialog"aria-modal="true"aria-labelledby="modal-headline"style="z-index: 9999;"><div class="bg-white px-4 py-2 border-b"><div class="sm:flex sm:items-start"><div class="text-center sm:mt-0 sm:text-left"><h3class="text-lg leading-6 font-semibold text-gray-900"id="modal-headline">\u0110\u1ED5i m\xE2t kh\u1EA9u</h3></div></div></div><div class="p-4"><div><div class="block font-semibold leading-normal truncate">M\u1EADt kh\u1EA9u m\u1EDBi<spanclass="required__class">*</span></div><inputv-model="passwordNew"class="p-2 focus:cursor-text w-full border border-gray-200 bg-gray-200 text-gray-700 focus:outline-none focus:bg-white focus:border-gray-400 rounded"type="password"placeholder="M\u1EADt kh\u1EA9u m\u1EDBi"/></div><div><div class="block font-semibold leading-normal truncate">X\xE1c nh\u1EADn m\u1EADt kh\u1EA9u<spanclass="required__class">*</span></div><inputv-model="passwordConfirm"class="p-2 focus:cursor-text w-full border border-gray-200 bg-gray-200 text-gray-700 focus:outline-none focus:bg-white focus:border-gray-400 rounded"type="password"placeholder="M\u1EADt kh\u1EA9u m\u1EDBi"/></div></div><div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"><span class="flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"><button @click="doChangePassAction"type="button"class="inline-flex justify-center w-full rounded-md border border-transparent px-4 py-2 bg-red-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-red-500 focus:outline-none focus:border-red-700 focus:shadow-outline-red transition ease-in-out duration-150 sm:text-sm sm:leading-5">X\xE1c nh\u1EADn</button></span><spanclass="mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"><button @click="changePass = !changePass"type="button"class="inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5">Quay l\u1EA1i</button></span></div></div></div></div></div>`},Table={props:{storage:{type:Object,default:()=>null},employee__table:{type:Boolean,default:!1},idtable:{type:String,default:"table__to__export"},db:{type:String,default:()=>localStorage.getItem("db")},collection:{type:String,default:()=>""},site:{type:String,default:()=>""},includes:{type:Array,default:()=>[]},sort:{type:Array,default:()=>[]},pagesize:{type:Number,default:()=>15},paging:{type:Boolean,default:()=>!0},condition:{type:Array,default:()=>[]},queryFilter:{type:Array,default:()=>[]},keywords:{type:Array,default:()=>[]},queryParam:{type:Boolean,default:()=>!0},empty:{type:Boolean,default:()=>!1},skeleton:{type:Object,default:()=>({th:[],td:[]})}},methods:{async init(){let e=this;e.renderData=!1,e.rows=e.pagesize,e.paging||(e.rows=e.pagesize,e.page=1);const t=await window.VueJX.search(e,e.collection,e.keywords,e.queryFilter,e.condition,e.includes,e.sort,e.storage,e.rows,e.queryParam,e.sizeLast);e.dataResults=t.dataResults,e.pages=t.pages,e.page=t.page,e.totalRecord=t.totalRecord,e.sortNext=t.sortNext,e.sortBack=t.sortBack,e.rows=t.size,e.renderData=!0},dateView(e,t,a,r){return window.Vue.dateView(e,t,a,r)},objectView(e,t,a){return window.Vue.objectView(e,t,a)},toDetail(e){window.Vue.redirect([{key:"_id",value:e||"NULL"}],!1,this.detailPage)},async paggingData(e){let t=this,a=e,r=[];t.sizeLast=t.rows;const o=new URLSearchParams(window.location.href);if(e==="next"?(t.page=parseInt(t.page)+1,t.page>=t.pages&&(t.page=t.pages),Array.isArray(t.sortNext)&&t.sortNext.length>0&&(t.sortBack=t.sortNext)):e==="prev"?(t.page=parseInt(t.page)-1,o.get("_s_b")&&(t.sortNext=JSON.parse(decodeURIComponent(o.get("_s_b"))))):e==="first"?t.page=1:e==="last"&&(t.page=t.pages,t.sizeLast=t.totalRecord-t.rows*(t.page-1)),r.push({key:"t",value:new Date().getTime()}),t.page<=1?(t.page=1,a="first",r.push({key:"_s_n",value:""}),r.push({key:"_s_b",value:""})):t.page<=t.pages&&(Array.isArray(t.sortNext)&&t.sortNext.length>0&&r.push({key:"_s_n",value:encodeURIComponent(JSON.stringify(t.sortNext))}),Array.isArray(t.sortBack)&&t.sortBack.length>0&&r.push({key:"_s_b",value:encodeURIComponent(JSON.stringify(t.sortBack))})),r.push({key:"_pagging",value:a}),r.push({key:"_rows",value:t.rows}),e==="rows"?(r.push({key:"_page",value:1}),r.push({key:"_rows",value:t.rows})):r.push({key:"_page",value:t.page}),typeof window.history.pushState!="undefined"){let n="/#"+window.Vue.router.currentRoute.value.path+"?t="+new Date().getTime();for(const s of r)s.key!="t"&&(n+="&"+s.key+"="+s.value);const l=window.Vue.router.currentRoute.value.query;for(const s in l)["_page","t","_s_n","_s_b"].indexOf(s)==-1&&(n+="&"+s+"="+l[s]);window.history.pushState({},"",n),await t.init()}else window.Vue.redirect(r)}},watch:{$route:async function(e,t){let a=window.VueJX.page();if(t.params.page==a){let r=this;r.renderData=!1,await r.init(),r.renderData=!0}}},mounted:function(){let e=this;e.$nextTick(function(){e.renderData=!1,setTimeout(async()=>{await e.init(),e.renderData=!0},0)})},data:()=>({renderData:!1,site:localStorage.getItem("site"),rows:15,sizeLast:15,dataResults:[],page:1,pages:1,totalRecord:0,sortBack:[],sortNext:[],paggingType:""}),template:`
    <div class="vuejx__table overflow-hidden">
        <table v-if="!renderData" class="w-full"> <thead class="w-full"> <slot name="thead"></slot> </thead> <tbody class="w-full p-4"> <tr> <td colspan="100"> <p class="loading___table"> Ch\u1EDD trong gi\xE2y l\xE1t ... </p> </td> </tr> </tbody> </table>
        <table :id="idtable" v-else class="w-full"> <thead class="w-full"> <slot name="thead"></slot> </thead> <tbody class="w-full"> <slot name="tbody" v-bind:page="rows" v-bind:data="dataResults"></slot> </tbody> </table>
        <header v-if="renderData && paging" class="bg-white flex items-center py-1 pr-4"><div class="flex"><button class="font-semibold text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1"  @click="paggingData('first')"  aria-label="first"> <i class="mdi" :class="{'mdi-chevron-double-left': !loadingAction}"></i> </button><button class="font-semibold text-blue-700 pl-0 pr-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('prev')" aria-label="back" > <i class="mdi" :class="{'mdi-chevron-left': !loadingAction}"></i> </button><button class="text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary btn__pagging" tabindex="-1" > Trang {{ page }} / {{ pages }} </button><button v-if="page < pages" class="font-semibold text-blue-700 pl-2 pr-0 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('next')" aria-label="next" > <i class="mdi" :class="{'mdi-chevron-right': !loadingAction}"></i> </button><button v-if="page < pages" class="font-semibold text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('last')" aria-label="last"><i class="mdi" :class="{'mdi-chevron-double-right': !loadingAction}"></i> </button><button class="focus:outline-none btn__pagging_info" tabindex="-1"> <div> <h4 class="font-semibold"> <span>T\u1ED5ng s\u1ED1 b\u1EA3n ghi: </span> <span class='text-blue-700'>{{totalRecord}}</span> </h4> </div> </button></div> <div class="ml-auto"> <span>Hi\u1EC3n th\u1ECB</span> <input style="width: 60px" class="text-center appearance-none bg-gray-200 text-blue-700 border border-gray-200 rounded py-1 px-1 focus:outline-none focus:bg-white focus:border-gray-400 ml-2" v-model="rows" @change="paggingData('rows')" type="text" aria-label="total" /></div></header>
    </div>
    `},tableViewKhcn={props:{table_config:{type:Array,default:()=>[]},form_config:{type:Array,default:()=>[]},data:{type:Object,default:()=>({})},dataResults:{type:Array,default:()=>[]},title:{type:String,default:()=>""},mode:{type:String,default:()=>"vertical"},groupBy:{type:String,default:()=>""},groupByKeyArray:{type:String,default:()=>""},footer_header:{type:Boolean,default:()=>!1},showAll:{type:Boolean,default:()=>!1},crud:{type:Boolean,default:()=>!1},collection:{type:String,default:()=>""}},methods:{objectView(e,t,a){return window.Vue.objectView(e,t,a)},objectViewObject(e,t,a){return window.Vue.objectViewObject(e,t,a)},dateView(e,t,a,r,o){return window.Vue.dateView(e,t,a,r,o?o.time:!1)},isNotEmpty(){return this.data&&!window.dotize.dotize.isEmptyObj(this.data)?!0:!!this.data},isArrayData(item,key){try{const data=item;let result=eval("data."+key);if(Array.isArray(result))return result}catch(e){return[]}},menuTab(e){this.indexTab=e},processView(e){let t=this,a=!1;if(t.groupBy&&t.groupByKeyArray){for(const r of t.isArrayData(e,t.groupBy))if(t.tabs[t.indexTab]==t.objectView(r,t.groupByKeyArray)){a=!1;break}}else t.groupBy&&!t.groupByKeyArray&&(a=t.tabs[t.indexTab]!=t.objectView(e,t.groupBy));return a},doEdit(){this.isCrud=!this.isCrud}},mounted:function(){let e=this;e.$nextTick(function(){if(e.isCrud=e.crud,this.data&&Array.isArray(this.data)){if(e.tabs=[],e.indexTab=0,e.groupBy)if(e.groupByKeyArray)for(const t of e.data)for(const a of e.isArrayData(t,e.groupBy))e.tabs.push(e.objectView(a,e.groupByKeyArray));else for(const t of e.data)e.tabs.push(e.objectView(t,e.groupBy));e.tabs=[...new Set(e.tabs)],e.emptyData=e.data.length>0}else if(this.data&&!Array.isArray(this.data)){e.emptyData=!1;for(const t of this.table_config)if(this.objectView(this.data,t.value)){e.emptyData=!0;break}}e.formConfig.form=e.form_config})},data:()=>({emptyData:!1,tabs:[],indexTab:0,isCrud:!1,formConfig:{type:0,form:[]}}),template:`
    <div class="vuejx__table bg-white border border-gray-400">
        <div class="font-bold text-blue-700 border-b border-gray-400 table___view__heading relative" v-if="title">
            {{ title }}
            <button v-if="isCrud" @click="doEdit" style="margin-top: -2px;" aria-label="btn" class=" absolute right-0 mr-2 py-1 font-semibold rounded border border-blue-700 text-blue-700 px-3 leading-none focus:outline-none hover:bg-blue-700 hover:text-white ml-2 whitespace-no-wrap" tabindex="-1"> 
                {{  !isCrud && !crud ? 'C\u1EADp nh\u1EADt' : 'Quay l\u1EA1i' }}
            </button>
        </div>
        <div v-if="!title || !isCrud">
            <div class="flex p-1 border-b border-gray-400" v-if="tabs.length > 0">
                <template v-for="(item, index) in tabs">
                    <button v-bind:="index" aria-label="btn" tabindex="-1"
                        @click="menuTab(index)"
                        v-bind:class="[{ 'border-r-0': index < tabs.length - 1, 'bg-blue-100 text-green-800': index == indexTab }, 'text-xs bg-white px-3 py-2 font-semibold text-gray-700 leading-none focus:outline-none border hover:bg-blue-100 hover:text-blue-500 header___btn_menu']"
                    >
                        {{ item }}
                    </button>
                </template>
            </div>
            <table v-if="mode !== 'vertical' && emptyData" :id="idtable" class="border-b w-full bg-white table___view_mode table___view_mode_simple" v-bind:style="{'border-bottom': (dataResults && dataResults.length == 0) ? 'unset' : ''}">
                <thead class="full">
                    <slot name="thead_title"> </slot>
                    <slot name="thead"> <tr><th v-for="(item, index) of table_config" v-bind:key="index" :width="item.width" :class="item.class" style="border-top: 0 !important;"> {{ item.title }} </th> </tr> </slot>
                </thead>
                <tbody class="border-b w-full bg-white"> <slot name="tbody" v-bind:data="data"> <slot name="tbody_title"></slot>
                        <template v-for="(item, index) in data">
                            <tr v-bind:key="index" :class="{'hidden': processView(item) }">
                                <td v-for="(itemCf, indexx) of table_config" v-bind:key="indexx" :width="itemCf.width" :class="itemCf.class">
                                    <slot :name="'cell_' + itemCf.value" v-bind:celldata="item">
                                        <span v-html="itemCf.date ? dateView(item, itemCf.value, '', '', itemCf) : objectView(item, itemCf.value)"></span>
                                    </slot>
                                </td>
                            </tr>
                            <slot :name="'footer_data'" v-bind:celldata="item"></slot>
                            <tr  class="sub__table_title" v-if="footer_header"><td colspan="100" class="font-bold border-b border-gray-400 table___view__heading text-blue-700">{{title}}</td></tr>
                            <tr class="sub__table_info" v-if="footer_header"><td v-for="(item, index) of table_config" v-bind:key="index" :width="item.width" :class="item.class"> {{ item.title }} </td> </tr>
                        </template>
                    </slot>
                </tbody>
            </table>
            <table v-else-if="emptyData" :id="idtable" class="border-b w-full bg-white table___view_mode" v-bind:style="{'border-bottom': (dataResults && dataResults.length == 0) ? 'unset' : ''}">
                <tbody class="border-b w-full bg-white" v-if="Array.isArray(data)" v-for="(itemData, indexData) in data" v-bind:key="indexData">
                    <template v-for="(item, index) in table_config">
                        <tr v-bind:key="index" v-if="objectView(itemData, item.value) || showAll"
                            :class="{'hidden': processView(itemData) }"
                        >
                            <td :width="25" class="font-semibold" v-if="data.length >= 1" v-bind:style="{'border-top': indexData > 0 && index == 0 ? '1px solid #cbd5e0 !important' : ''}">
                                {{ index == 0 ? indexData + 1 : '' }}
                            </td>
                            <td :width="item.width ? item.width : 200" class="font-semibold" v-bind:style="{'border-top': indexData > 0 && index == 0 ? '1px solid #cbd5e0 !important' : ''}">
                                {{ item.title }}
                            </td>
                            <td v-bind:style="{'border-top': indexData > 0 && index == 0 ? '1px solid #cbd5e0 !important' : ''}">
                                <slot :name="'cell_' + item.value" v-bind:celldata="itemData">
                                    <span v-html="item.date ? dateView(itemData, item.value) : objectView(itemData, item.value)"></span> <template v-if="item.prefix">{{ item.prefix }}</template>
                                </slot>
                            </td>
                        </tr>
                    </template>
                    <slot :name="'footer_data'" v-bind:celldata="itemData"></slot>
                </tbody>
                <tbody class="border-b w-full bg-white" v-else>
                    <template v-for="(item, index) in table_config">
                        <tr v-if="item.type == 'label'" v-bind:key="index">
                            <td :colspan="table_config.length" class="td-title">
                                <p>{{ item.title }}</p>
                            </td>
                        </tr>
                        <tr v-else v-bind:key="index" v-if="objectView(data, item.value) || showAll">
                            <td :width="item.width ? item.width : 200" class="font-semibold" :class="item.class" :colspan="item.type == 'header_info' ? 100: ''">
                                <p>{{ item.title }}</p>
                            </td>
                            <td v-if="!crud && item.type != 'header_info'">
                                <slot :name="'cell_' + item.value" v-bind:celldata="data">
                                    <template v-if="item.type === 'file' && objectViewObject(data, item.value)">
                                        <p class="font-semibold text-blue-700 cursor-pointer">
                                            <a class="file__links flex" v-for="(itemxFile, indexFile) in objectViewObject(data, item.value)"
                                                :href="'/admin/security/file/' + itemxFile['bucketName'] + '/' + itemxFile['filename']" target="_blank"    
                                            >
                                                <span class="flex">
                                                    <svg class="attach___file" xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none">
                                                        <g>
                                                            <path id="icon/editor/attach_file_24px" d="M10 3.75V10.9375C10 12.3188 8.88125 13.4375 7.5 13.4375C6.11875 13.4375 5 12.3188 5 10.9375V3.125C5 2.2625 5.7 1.5625 6.5625 1.5625C7.425 1.5625 8.125 2.2625 8.125 3.125V9.6875C8.125 10.0312 7.84375 10.3125 7.5 10.3125C7.15625 10.3125 6.875 10.0312 6.875 9.6875V3.75H5.9375V9.6875C5.9375 10.55 6.6375 11.25 7.5 11.25C8.3625 11.25 9.0625 10.55 9.0625 9.6875V3.125C9.0625 1.74375 7.94375 0.625 6.5625 0.625C5.18125 0.625 4.0625 1.74375 4.0625 3.125V10.9375C4.0625 12.8375 5.6 14.375 7.5 14.375C9.4 14.375 10.9375 12.8375 10.9375 10.9375V3.75H10Z" fill="black" fill-opacity="0.54"/>
                                                        </g>
                                                    </svg>
                                                    <span class="pl-4">{{ itemxFile?.originalname ? itemxFile?.originalname : 'File \u0111\xEDnh k\xE8m' }}</span>
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="19" viewBox="0 0 18 18" fill="none">
                                                        <path d="M4.125 15C3.825 15 3.5625 14.8875 3.3375 14.6625C3.1125 14.4375 3 14.175 3 13.875V11.1938H4.125V13.875H13.875V11.1938H15V13.875C15 14.175 14.8875 14.4375 14.6625 14.6625C14.4375 14.8875 14.175 15 13.875 15H4.125ZM9 12.1312L5.38125 8.5125L6.1875 7.70625L8.4375 9.95625V3H9.5625V9.95625L11.8125 7.70625L12.6188 8.5125L9 12.1312Z" fill="#1B5884"></path>
                                                    </svg>
                                                    <span class="mr-1" v-if="indexFile + 1 < objectViewObject(data, item.value).length">, </span>
                                                </span>
                                            </a>
                                        </p>
                                    </template>
                                    <template v-else-if="item.type == 'leaflet' && objectViewObject(data, item.value)">
                                        <vuejx-leaflet-wrap mode="view" :id="item['value']" :item="item" v-model:data="data" 
                                        ></vuejx-leaflet-wrap>
                                    </template>
                                    <span v-else v-html="item.date ? dateView(data, item.value) : objectView(data, item.value)"></span> <template v-if="item.prefix">{{ item.prefix }}</template>
                                </slot>
                            </td>
                            <td class="table___crud" style="padding: 2px 8px !important;" v-else-if="item.type != 'header_info'">
                                <slot :name="'cell_' + item.value" v-bind:celldata="data">
                                    <template v-if="!item.type || item.type == 'text'">
                                        <input style="padding: 6px 8px;"
                                            class="bg-gray-200 focus:outline-none focus:cursor-text w-full border border-gray-200 focus:bg-white focus:border-gray-400 rounded"
                                            type="text" :placeholder="item.title"
                                        />
                                    </template>
                                    <template v-else-if="item.type == 'autocomplete'">
                                        <vuejx-autocomplete :config="{
                                            placeholder: item.title,
                                            modelView: 'object', label_class: '', multiple: false,
                                            chips: false, required: false,
                                            label: '', object: true, itemText: '_source.TenGoi', itemValue: '_source.MaDinhDanh',
                                            link: [ { db: 'CSDL_MTQA', collection: 'T_ChuDauTu', condition: [] } ],
                                            column: ['MaDinhDanh', 'TenGOi', 'type'], sort: [ '_score' ]
                                        }"
                                        ></vuejx-autocomplete>
                                    </template>
                                    <template v-else-if="item.type == 'date'">
                                        <vuejx-date-combobox :config="{}">
                                        </vuejx-date-combobox>
                                    </template>
                                </slot>
                            </td>
                        </tr>
                    </template>
                </tbody>
            </table>
            <div class="p-2" v-else-if="!emptyData">
                Kh\xF4ng c\xF3 d\u1EEF li\u1EC7u
            </div>
        </div>
        <div class="p-2" v-else>
            <vuejx-screen
                ref="uploadFile"
                grid_class="grid grid-cols-4 gap-2 px-2 pb-0"
                :collection="collection"
                :config="formConfig"
            ></vuejx-screen>
        </div>
        <div v-if="!title && crud" class="relative mb-2 pt-2 text-right border-t border-gray-400">
            <button @click="doEdit" class="leading-none font-semibold bg-blue-700 text-white mx-2 rounded px-4 py-2 focus:outline-none pr-4" tabindex="-1">
                Ghi l\u1EA1i
            </button>                            
        </div>
    </div>
    `},tableSimpleKhcn={props:{table_class:{type:String,default:"border-b w-full bg-white"},table_view:{type:String,default:""},title_remove:{type:String,default:"xo\xE1"},custom_table:{type:Boolean,default:()=>!1},remove:{type:Boolean,default:()=>!1},remove_conditon:{type:Array,default:()=>[]},crud:{type:Boolean,default:()=>!1},import_data:{type:Boolean,default:()=>!1},import_data_adv:{type:Boolean,default:()=>!1},import_data_adv_api:{type:Boolean,default:()=>!1},export_data:{type:Boolean,default:()=>!1},export_data_label:{type:String,default:()=>"Export"},noHeader:{type:Boolean,default:()=>!1},noRouterr:{type:Boolean,default:()=>!1},storage:{type:Object,default:()=>null},widthSTT:{type:Number,default:()=>50},filter_options:{type:Array,default:()=>[]},table_config:{type:Array,default:()=>[]},title:{type:String,default:""},detailPage:{type:String,default:""},employee__table:{type:Boolean,default:!1},idtable:{type:String,default:"table__to__export"},db:{type:String,default:()=>localStorage.getItem("db")},collection:{type:String,default:()=>""},site:{type:String,default:()=>""},includes:{type:Array,default:()=>[]},sort:{type:Array,default:()=>[]},pagesize:{type:Number,default:()=>15},paging:{type:Boolean,default:()=>!0},condition:{type:Array,default:()=>[]},queryFilter:{type:Array,default:()=>[]},keywords:{type:Array,default:()=>[]},queryParam:{type:Boolean,default:()=>!0},empty:{type:Boolean,default:()=>!1},skeleton:{type:Object,default:()=>({th:[],td:[]})},exportTemplate:{type:String,default:""},exportTemplateTitle:{type:String,default:""},aggs_ext:{type:String,default:""},aggs_ext_keyAggs:{type:String,default:""},placeholderKeyowrds:{type:String,default:"T\xECm ki\u1EBFm ..."},treeParentKey:{type:String,default:"LoaiChiTieuRoot"},state_query:{type:Array,default:null},inlineFilter:{type:Boolean,default:()=>!1},custom_detail:{type:Boolean,default:()=>!1}},methods:{async init(e){let t=this;t.renderDataLoading=!1,t.renderData=!1,t.rows=t.pagesize;let a=window.Vue.router.currentRoute.value.query;t.sourceRef=a.sourceRef,t.uploadarea=a._import;let r=null;if(e){r={};for(const n of e)n.key==="_s_n"&&(r.sortNext=n.value),n.key==="_s_b"&&(r.sortBack=n.value),n.key==="_pagging"&&(r.paggingType=n.value),n.key==="_page"&&(r.page=n.value),n.key==="_sizeLast"&&(r.sizeLast=n.value>0?n.value:t.pagesize,r.size=n.value>0?n.value:t.pagesize);r.size||(r.size=t.pagesize,r.sizeLast=t.pagesize)}if(a.adv_filter?t.adv_filter=a.adv_filter:t.adv_filter=!1,t.paging||(t.rows=t.pagesize,t.page=1),t.aggReport={},t.aggs_ext_keyAggs){let n=JSON.parse(JSON.stringify(t.condition));n.splice(-1);const l=await window.VueJX.aggs(t,"danh_muc",{keyAggs:t.aggs_ext_keyAggs,dbAggs:t.db,collectionAggs:t.aggs_ext,sizeAggs:1e4},1e4,1,"_source"+t.aggs_ext_keyAggs,"_source"+t.aggs_ext_keyAggs,[],n,t.queryFilter,t.keywords,t.queryParam,"true",!0,0,null,null,null);if(l&&Array.isArray(l.items))for(let s of l.items)t.aggReport[s.code]=s.counter}t.noRouterr&&!r&&(r={page:1,paggingType:"first",size:t.pagesize,sizeLast:t.pagesize,sortBack:"",sortNext:""}),console.log("vm.queryFiltervm.queryFilter",t.queryFilter);const o=await window.VueJX.search(t,t.collection,t.keywords,t.queryFilter,t.condition,t.includes,t.newSortData,t.storage,t.rows,t.queryParam,t.sizeLast,r);t.dataResults=o.dataResults,t.pages=o.pages,t.page=o.page,t.totalRecord=o.totalRecord,t.sortNext=o.sortNext,t.sortBack=o.sortBack,t.rows=o.size,t.renderData=!0,setTimeout(()=>{t.renderDataLoading=!0},100),t.bodyQuery=o.bodyQuery},dateView(e,t,a,r){return window.Vue.dateView(e,t,a,r)},objectView(e,t,a){return window.Vue.objectView(e,t,a)},dateTimeView(e,t,a){return window.Vue.dateTimeView(e,t,a)},toDetail(e){if(this.custom_detail)this.$emit("toDetail",e);else if(this.detailPage&&this.detailPage.indexOf("?")!=-1){let[t,a]=this.detailPage.split("?"),r=[{key:"_id",value:(e==null?void 0:e._id)?e._id:"NULL"}];if(a&&a.indexOf("&")!=-1){let o=a.split("&");for(let n of o)if(n&&n.indexOf("=")!=-1){const[l,s]=n.split("=");r.push({key:l,value:s})}else r.push({key:n,value:""})}window.Vue.redirect(r,!1,t)}else window.Vue.redirect([{key:"_id",value:(e==null?void 0:e._id)?e._id:"NULL"}],!1,this.detailPage)},async paggingData(e){let t=this,a=e,r=[];t.sizeLast=t.rows;const o=new URLSearchParams(window.location.href);if(e==="next"?(t.page=parseInt(t.page)+1,t.page>=t.pages&&(t.page=t.pages,t.sizeLast=t.totalRecord-t.rows*(t.page-1)),Array.isArray(t.sortNext)&&t.sortNext.length>0&&(t.sortBack=t.sortNext)):e==="prev"?(t.page=parseInt(t.page)-1,o.get("_s_b")&&(t.sortNext=JSON.parse(decodeURIComponent(o.get("_s_b"))))):e==="first"?t.page=1:e==="last"&&(t.page=t.pages,t.sizeLast=t.totalRecord-t.rows*(t.page-1)),r.push({key:"t",value:new Date().getTime()}),t.page<=1?(t.page=1,a="first",r.push({key:"_s_n",value:""}),r.push({key:"_s_b",value:""})):t.page<=t.pages&&(Array.isArray(t.sortNext)&&t.sortNext.length>0&&r.push({key:"_s_n",value:encodeURIComponent(JSON.stringify(t.sortNext))}),Array.isArray(t.sortBack)&&t.sortBack.length>0&&r.push({key:"_s_b",value:encodeURIComponent(JSON.stringify(t.sortBack))})),r.push({key:"_pagging",value:a}),r.push({key:"_rows",value:t.rows}),t.sizeLast!=t.rows&&r.push({key:"_sizeLast",value:t.sizeLast}),e==="rows"?(r.push({key:"_page",value:1}),r.push({key:"_rows",value:t.rows})):r.push({key:"_page",value:t.page}),t.noRouterr)t.renderData=!1,await t.init(r),t.renderData=!0;else if(typeof window.history.pushState!="undefined"){let n="/#"+window.Vue.router.currentRoute.value.path+"?t="+new Date().getTime();for(const s of r)s.key!="t"&&(n+="&"+s.key+"="+s.value);const l=window.Vue.router.currentRoute.value.query;for(const s in l)["_page","t","_s_n","_s_b"].indexOf(s)==-1&&(n+="&"+s+"="+l[s]);window.history.pushState({},"",n),await t.init()}else window.Vue.redirect(r)},async doExport(){let e=this;if(e.exportTemplate)window.Vue.$axios.post("/admin/vuejx/docx/generateexcel",{docFileName:e.exportTemplate,site:localStorage.getItem("site"),db:localStorage.getItem("db"),collection:e.collection,bodyQuery:e.bodyQuery,dataId:e.exportTemplateTitle},{responseType:"arraybuffer",headers:{Authorization:"Bearer "+localStorage.getItem("token"),token:localStorage.getItem("token"),"Content-Type":"application/json",Accept:"application/octet-stream"}}).then(t=>{const a=new Blob([t.data],{type:"application/octet-stream"});var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=e.exportTemplateTitle.endsWith(".pdf")?e.exportTemplateTitle:e.exportTemplateTitle+".xlsx",document.body.appendChild(r),r.click(),document.body.removeChild(r)}).catch(t=>{console.log(t)});else{let t=e.collection+".xlsx",a=JSON.stringify({fileName:t}),r={method:"post",url:"/admin/security/file/mongo2excel/"+e.db+"/"+e.collection+"/"+e.site,headers:{"Content-Type":"application/json",token:localStorage.getItem("token")},responseType:"blob",data:a};await window.Vue.$axios(r).then(function(o){const n=window.URL.createObjectURL(new Blob([o.data])),l=document.createElement("a");l.href=n,l.setAttribute("download",t),document.body.appendChild(l),l.click()}).catch(function(o){console.log(o)})}},async doImport(){let e=this;if(confirm("X\xE1c nh\u1EADn import d\u1EEF li\u1EC7u.")==!0){let a=new FormData,r=document.getElementById("formFile");for(const n of r.files)a.append("file",n,n.name);let o={headers:{}};o.headers["Content-Type"]="multipart/form-data",o.headers.token=localStorage.getItem("token"),e.import_data_adv_api?await window.Vue.$axios.post(`/qtdl/importXlsx/${localStorage.getItem("db")}/import?ext_data_import=${localStorage.getItem("ext_data_import")}`,a,o).then(function(n){window.Vue.toastr.success("Y\xEAu c\u1EA7u c\u1EE7a b\u1EA1n \u0111\u01B0\u1EE3c th\u1EF1c hi\u1EC7n th\xE0nh c\xF4ng.");try{let l=`C\u1EADp nh\u1EADt d\u1EEF li\u1EC7u ${n.data[Object.keys(n.data)[0]].nUpserted} b\u1EA3n ghi c\u1EE7a ${Object.keys(n.data)[0]}.`;alert(l)}catch{}setTimeout(()=>{window.Vue.redirect([{key:"_t",value:new Date().getTime()}],!0)},2e3)}).catch(n=>{window.Vue.toastr.error(n)}):await window.Vue.$axios.post(`/admin/security/file/excel2mongo/${e.db}/${e.collection}/${e.site}`,a,o).then(function(n){n&&n.data?window.Vue.toastr.success("Th\xE0nh c\xF4ng."):window.Vue.toastr.error("Error.")}).catch(n=>{window.Vue.toastr.error(error)})}},async doImportLoData(){if(confirm("X\xE1c nh\u1EADn import d\u1EEF li\u1EC7u.")==!0){let t=new FormData,a=document.getElementById("formFile"),r="";for(const n of a.files)t.append("file",n,n.name),r=n.name;t.append("cacheDanhMuc",!1);let o={headers:{}};o.headers["Content-Type"]="multipart/form-data",o.headers.token=localStorage.getItem("token"),await window.Vue.$axios.post(`/qtdl/importXlsx/${localStorage.getItem("db")}/import?ext_data_import=${localStorage.getItem("ext_data_import")}`,t,o).then(function(n){window.Vue.toastr.success("Y\xEAu c\u1EA7u c\u1EE7a b\u1EA1n \u0111\u01B0\u1EE3c th\u1EF1c hi\u1EC7n th\xE0nh c\xF4ng."),setTimeout(()=>{window.Vue.redirect([{key:"sourceRef",value:r}],!0)},2e3)}).catch(n=>{window.Vue.toastr.error(error)})}},openTree(e,t){this.indexTree=e._id,this.$emit("openTree",e)},async processTree(e,t,a){let r=this;if(r.keyTree=a,r.dataResultsChild[t]&&!window.dotize.dotize.isEmptyObj(r.dataResultsChild[t]))r.dataResultsChild={};else{const o=await window.VueJX.search(r,r.collection,r.keywords,r.queryFilter,e,r.includes,r.sort,r.storage,r.rows,r.queryParam,r.sizeLast);r.dataResultsChild[t]=o.dataResults}},processTreeEmbed(e){this.itemxxx[e]||(this.itemxxx[e]=!0,setTimeout(()=>{document.getElementById(e).click()},0))},pickAll(){var t;let e=this;if(e.checkAll=!e.checkAll,e.checkAll){e.ids=[];for(let a of e.dataResults){let r=!0;for(let o of e.remove_conditon){let n=Object.keys(o)[0];if((a==null?void 0:a._source)&&a._source[n]&&o[n]=="NULL"){r=!1;break}}r&&e.ids.push((t=a==null?void 0:a._source)==null?void 0:t.id)}}else e.ids=[]},pickRemove(e,t,a){let r=this,o=!0;for(let n of r.remove_conditon){let l=Object.keys(n)[0];if(a&&a._source[l]&&n[l]=="NULL"){o=!1;break}}o?this.ids.indexOf(e)==-1?this.ids.push(e):this.ids=this.ids.filter(n=>n!==e):alert("D\u1EEF li\u1EC7u kh\xF4ng \u0111\u01B0\u1EE3c thao t\xE1c xo\xE1.")},async doUpdateMany(e){let t=this;if(confirm("X\xE1c nh\u1EADn th\u1EF1c hi\u1EC7n.")){window.Vue.loadingBar.start();let a="vuejx_manager/userUpdateMany";await window.Vue.$root.dispatch(a,{db:localStorage.getItem("db"),collection:t.collection,body:e,filter:t.ids}).then(async r=>{r.data&&r.data.modifiedCount&&(window.Vue.toastr.success("Y\xEAu c\u1EA7u c\u1EE7a b\u1EA1n \u0111\u01B0\u1EE3c th\u1EF1c hi\u1EC7n th\xE0nh c\xF4ng."),setTimeout(()=>{window.Vue.redirect([{key:"sourceRef",value:""}],!0)},2e3),window.Vue.loadingBar.finish())}).catch(r=>{window.Vue.toastr.error("Y\xEAu c\u1EA7u c\u1EE7a b\u1EA1n \u0111\u01B0\u1EE3c th\u1EF1c hi\u1EC7n th\u1EA5t b\u1EA1i."),window.Vue.loadingBar.error()})}},async updateLoDL(){let e=this;if(prompt("Vui l\xF2ng nh\u1EADp ch\u1EEF: OK \u0111\u1EC3 chuy\u1EC3n \u0111\u1ED5i tr\u1EA1ng th\xE1i l\xF4 d\u1EEF li\u1EC7u","")=="OK"){window.Vue.loadingBar.start();let a={TrangThaiDuLieu:{_source:{MaMuc:"02",TenMuc:"Ch\xEDnh th\u1EE9c",type:"C_TrangThaiDuLieu"}},storage:"01_"+new Date().getTime(),editVersion:new Date().getTime()},r="vuejx_manager/userUpdateMany",o={sourceRef:e.sourceRef};window.Vue.router.currentRoute.value.query.DuDieuKienSinhMa&&(o.DuDieuKienSinhMa=window.Vue.router.currentRoute.value.query.DuDieuKienSinhMa),await window.Vue.$root.dispatch(r,{db:localStorage.getItem("db"),collection:e.collection,body:a,filter:o}).then(async n=>{n.data&&n.data.modifiedCount&&(window.Vue.toastr.success("Y\xEAu c\u1EA7u c\u1EE7a b\u1EA1n \u0111\u01B0\u1EE3c th\u1EF1c hi\u1EC7n th\xE0nh c\xF4ng."),window.Vue.loadingBar.finish(),setTimeout(()=>{window.Vue.redirect([],!0)},2e3))}).catch(n=>{window.Vue.toastr.error("Y\xEAu c\u1EA7u c\u1EE7a b\u1EA1n \u0111\u01B0\u1EE3c th\u1EF1c hi\u1EC7n th\u1EA5t b\u1EA1i."),window.Vue.loadingBar.error()})}},async removeLoDL(){let e=this;if(prompt("Vui l\xF2ng nh\u1EADp ch\u1EEF: DELETE \u0111\u1EC3 xo\xE1 l\xF4 d\u1EEF li\u1EC7u","")=="DELETE"){window.Vue.loadingBar.start();let a={storage:"trash"},r="vuejx_manager/userUpdateMany";await window.Vue.$root.dispatch(r,{db:localStorage.getItem("db"),collection:e.collection,body:a,filter:{sourceRef:e.sourceRef}}).then(async o=>{o.data&&o.data.modifiedCount&&(window.Vue.toastr.success("Y\xEAu c\u1EA7u c\u1EE7a b\u1EA1n \u0111\u01B0\u1EE3c th\u1EF1c hi\u1EC7n th\xE0nh c\xF4ng."),window.Vue.loadingBar.finish(),setTimeout(()=>{window.Vue.redirect([{key:"sourceRef",value:""}],!0)},2e3))}).catch(o=>{window.Vue.toastr.error("Y\xEAu c\u1EA7u c\u1EE7a b\u1EA1n \u0111\u01B0\u1EE3c th\u1EF1c hi\u1EC7n th\u1EA5t b\u1EA1i."),window.Vue.loadingBar.error()})}},async doRemove(){let e=this;if(prompt("Vui l\xF2ng nh\u1EADp ch\u1EEF: DELETE \u0111\u1EC3 xo\xE1 d\u1EEF li\u1EC7u","")=="DELETE"){window.Vue.loadingBar.start();let a={storage:"trash"},r="vuejx_manager/userUpdateMany";await window.Vue.$root.dispatch(r,{db:localStorage.getItem("db"),collection:e.collection,body:a,filter:e.ids}).then(async o=>{o.data&&o.data.modifiedCount&&(window.Vue.toastr.success("Y\xEAu c\u1EA7u c\u1EE7a b\u1EA1n \u0111\u01B0\u1EE3c th\u1EF1c hi\u1EC7n th\xE0nh c\xF4ng."),setTimeout(()=>{window.Vue.redirect([{key:"sourceRef",value:""}],!0)},2e3),window.Vue.loadingBar.finish())}).catch(o=>{window.Vue.toastr.error("Y\xEAu c\u1EA7u c\u1EE7a b\u1EA1n \u0111\u01B0\u1EE3c th\u1EF1c hi\u1EC7n th\u1EA5t b\u1EA1i."),window.Vue.loadingBar.error()})}},async douploadarea(){this.uploadarea?window.Vue.redirect_page(window.Vue.router.currentRoute.value.params.page,[],[{key:"_import",value:""},{key:"_view",value:window.Vue.router.currentRoute.value.query._view},{key:"_tree",value:window.Vue.router.currentRoute.value.query._tree},{key:"_tree_index",value:window.Vue.router.currentRoute.value.query._tree_index}],!0):window.Vue.redirect_page(window.Vue.router.currentRoute.value.params.page,[],[{key:"_import",value:"data"},{key:"_view",value:window.Vue.router.currentRoute.value.query._view},{key:"_tree",value:window.Vue.router.currentRoute.value.query._tree},{key:"_tree_index",value:window.Vue.router.currentRoute.value.query._tree_index}],!0)},processViewHTML(e,t){let a="";if(e.date)a=this.dateView(t,e.value);else if(e.array_field&&e.value){let r=window.Vue.objectViewObject(t,e.array_field),o=0,n=String(e.value).replace(e.array_field+".","");if(Array.isArray(r))for(let l of r)a+=this.objectView(l,n,e.default)+(o+1<r.length?"<span>, </span>":""),o++}else if(e.valueFixObject){let r=window.Vue.objectViewObject(t,e.valueFixObject,{});r&&(a=r[e.valueFix]),r[e.valueFix+"___QCVN"]&&(a=a+" / "+r[e.valueFix+"___QCVN"])}else if(String(e.value).indexOf(",")!=-1){let r=String(e.value).split(",");for(let o=0;o<r.length;o++)e.viewDefault[o]=="NULL"&&!this.objectView(t,r[o],e.default)||(a+=`<span class="${e.classDefault[o]}"><span class="prefix___label_td">${e.prefix[o]}</span>`+(e.viewTypeElement[o]=="date"?this.dateView(t,r[o]):this.objectView(t,r[o],e.viewDefault[o]))+"</span>")}else a=this.objectView(t,e.value,e.default);return a},async submitOrder(e){if(this.renderData=!1,this.customadv["order._source.shortName"]){let t=this.customadv["order._source.shortName"].split("___"),a={};this.newSortData=[],a[t[0]]=t[1];for(const r of this.sort)typeof r=="object"&&Object.keys(r)[0]!=t[0]&&this.newSortData.push(r);this.newSortData.push(a),console.log("submitOrdersubmitOrdersubmitOrder",this.newSortData,this.sort)}await this.init(),this.renderData=!0},async inlineSearchAction(e){console.log("data==",e)}},mounted:function(){let e=this;e.$nextTick(function(){e.renderData=!1,localStorage.getItem("sortTable")&&localStorage.getItem("sortTable")=="false"&&(e.sortTable=!1),e.newSortData=JSON.parse(JSON.stringify(e.sort)),setTimeout(async()=>{await e.init(),e.renderData=!0},0)})},data:()=>({sourceRef:"",itemxxx:{},renderData:!1,site:localStorage.getItem("site"),rows:15,sizeLast:15,dataResults:[],dataResultsChild:{},page:1,pages:1,totalRecord:0,sortBack:[],sortNext:[],paggingType:"",indexTree:"",keyTree:"",checkAll:!1,ids:[],adv_filter:!1,bodyQuery:null,aggReport:{},uploadarea:!1,uploadarea_cfg_sate:{},renderDataLoading:!1,customadv:{},newSortData:[],sortTable:!0}),template:`
    <div v-if="custom_table"><slot name="custom_view" v-bind:data="dataResults"></slot></div>
    <div class="vuejx__table" v-else>
        <div class="top-content flex" v-if="!noHeader">
            <div class=" content-title bg-blue-700 text-white flex items-center uppercase font-semibold relative"> {{ title }} </div>
            <qlvt-filter @inlineSearchAction="inlineSearchAction" :inlineSearch="inlineFilter" :inlineFilter="inlineFilter" :state_query="state_query" :placeholderKeyowrds="placeholderKeyowrds" class=" flex-1" ref="filter" :filter_options="filter_options">
                <template v-slot:filter_button="{ submitSearch, showSearchAdvanced }">
                    <button aria-label="btn" class=" filter___timkiem font-semibold rounded-r text-white px-3 pb-1 leading-none focus:outline-none bg-blue-700 whitespace-no-wrap" tabindex="-1" @click="submitSearch($event)">T\xECm ki\u1EBFm</button>
                    <vuejx-autocomplete v-if="sortTable" style="min-width: 100px; margin-left: 8px;"
                        class="vuejx_combobox_selection"
                        :config='{
                            hidden_label: true,
                            model: "order",
                            object: false,
                            placeholder: "S\u1EAFp x\u1EBFp",
                            data: [
                                {
                                    _source: {
                                        shortName: "createdAt___desc",
                                        title: "M\u1EDBi nh\u1EA5t"
                                    }
                                },
                                {
                                    _source: {
                                        shortName: "createdAt___asc",
                                        title: "C\u0169 nh\u1EA5t"
                                    }
                                }
                            ]
                        }'
                        v-model:data='customadv'
                        v-model='customadv'
                        @change="submitOrder"
                    ></vuejx-autocomplete>
                    <slot name="ext_btn"> 
                        <button aria-label="btn" v-if="!inlineFilter && filter_options.length > 0 && !uploadarea" class=" filter___adv font-semibold rounded border border-blue-700 text-blue-700 px-3 leading-none focus:outline-none hover:bg-blue-700 hover:text-white ml-2 whitespace-no-wrap" tabindex="-1" @click="showSearchAdvanced()">{{ adv_filter ? 'Xo\xE1 b\u1ED9 l\u1ECDc' : 'N\xE2ng cao'}}</button>
                        <button aria-label="btn" v-if="crud && !uploadarea" class="filter___add_cms whitespace-no-wrap ml-2 font-semibold rounded border border-blue-700 bg-blue-700 text-white px-3 pb-1 leading-none focus:outline-none hover:bg-white hover:text-blue-700" tabindex="-1" @click="toDetail('')">Th\xEAm m\u1EDBi</button>
                    </slot>
                    <slot name="ext_btn_2"> 
                    </slot>
                    <button @click="import_data_adv ? douploadarea() : ''" v-if="import_data" aria-label="btn" class=" filter___import whitespace-no-wrap ml-2 font-semibold rounded border border-blue-700 text-blue-700 px-3 pb-1 leading-none focus:outline-none hover:bg-white hover:text-blue-700" tabindex="-1">
                        <template v-if="!import_data_adv">
                            <label for="formFile">L\xF4 d\u1EEF li\u1EC7u</label>
                            <input class="hidden" type="file" id="formFile" @change="doImport">
                        </template>
                        <template v-else>
                            <label>{{ uploadarea ? 'Quay l\u1EA1i danh s\xE1ch' : 'L\xF4 d\u1EEF li\u1EC7u'}}</label>
                        </template>
                    </button>
                    <button v-if="export_data && !uploadarea" aria-label="btn" class=" filter___import whitespace-no-wrap ml-2 font-semibold rounded border border-blue-700 text-blue-700 px-3 pb-1 leading-none focus:outline-none hover:bg-white hover:text-blue-700" tabindex="-1" @click="doExport">{{ export_data_label }}</button>
                </template>
            </qlvt-filter>
        </div>
        <slot name="button_remove" v-bind:doRemove="doRemove" v-bind:doUpdateMany="doUpdateMany" v-bind:ids="ids">
            <button aria-label="btn" v-if="ids.length > 0" @click="doRemove" class="whitespace-no-wrap mb-2 font-semibold rounded border border-red-700 text-red-700 p-2 leading-none focus:outline-none hover:bg-red-200 hover:text-gray-900 px-3" tabindex="-1">
                X\xE1c nh\u1EADn {{title_remove}} {{ ids.length }} b\u1EA3n ghi.
            </button>
        </slot>
        <slot name="button_ext"></slot>
        <slot name="import_ext">
            <div v-if="uploadarea" class="flex flex-wrap -mx-2">
                <div class="xs12" :class="{'xs8': sourceRef}">
                    <label for="formFile" class="n-upload n-upload--dragger-inside" style="--n-bezier:cubic-bezier(0.4, 0, 0.2, 1); --n-border-radius:3px; --n-dragger-border:1px dashed rgb(224, 224, 230); --n-dragger-border-hover:1px dashed #18a058; --n-dragger-color:rgb(250, 250, 252); --n-font-size:14px; --n-item-color-hover:rgb(243, 243, 245); --n-item-color-hover-error:rgba(208, 48, 80, 0.06); --n-item-disabled-opacity:0.5; --n-item-icon-color:rgba(194, 194, 194, 1); --n-item-text-color:rgb(51, 54, 57); --n-item-text-color-error:#d03050; --n-item-text-color-success:#18a058; --n-line-height:1.6; --n-item-border-image-card-error:1px solid #d03050; --n-item-border-image-card:1px solid rgb(224, 224, 230);">
                        <div class="n-upload-trigger">
                        <div class="n-upload-dragger">
                            <div style="margin-bottom: 12px;"><i role="img" class="n-icon n-icon--depth n-icon--color-transition" style="--n-bezier:cubic-bezier(0.4, 0, 0.2, 1); --n-color:#000; --n-opacity:0.38; font-size: 48px;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512">
                                <path d="M80 152v256a40.12 40.12 0 0 0 40 40h272a40.12 40.12 0 0 0 40-40V152" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>
                                <rect x="48" y="64" width="416" height="80" rx="28" ry="28" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="32"></rect>
                                <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 304l-64 64l-64-64"></path>
                                <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 345.89V224"></path>
                                </svg></i></div><span class="n-text" style="--n-bezier:cubic-bezier(0.4, 0, 0.2, 1); --n-text-color:rgb(51, 54, 57); --n-font-weight-strong:500; --n-font-famliy-mono:v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace; --n-code-border-radius:2px; --n-code-text-color:rgb(51, 54, 57); --n-code-color:rgb(244, 244, 248); --n-code-border:1px solid #0000; font-size: 16px;">Ch\u1ECDn ho\u1EB7c k\xE9o th\u1EA3 File d\u1EEF li\u1EC7u v\xE0o khu v\u1EF1c n\xE0y \u0111\u1EC3 th\u1EF1c hi\u1EC7n t\u1EA3i l\xEAn</span>
                            <p class="n-p" style="--n-bezier:cubic-bezier(0.4, 0, 0.2, 1); --n-font-size:14px; --n-line-height:1.6; --n-margin:16px 0 16px 0; --n-text-color:rgb(118, 124, 130); margin: 8px 0px 0px;">File \u0111\u1ECBnh d\u1EA1ng Excel theo m\xE3u thi\u1EBFt k\u1EBF CSDL</p>
                        </div>
                        </div>
                        <div class="n-upload-file-list">
                        <!---->
                        </div>
                    </label>
                    <input class="hidden" type="file" id="formFile" @change="doImportLoData">
                </div>
                <div class="xs12 sm4" v-if="sourceRef">
                    <div class="p-2 mx-2 rounded px-0" style="border: 1px dashed #01662e;">
                        <button @click="updateLoDL" style="border-radius: 4px !important;" aria-label="btn" class="filter___import whitespace-no-wrap ml-2 font-semibold rounded border border-blue-700 text-blue-700 px-3 p-2 block leading-none focus:outline-none hover:bg-white hover:text-blue-700" tabindex="-1">
                            <label>X\xE1c nh\u1EADn d\u1EEF li\u1EC7u theo l\xF4</label>
                        </button>
                        <button @click="removeLoDL" aria-label="btn" class="filter___import whitespace-no-wrap ml-2 font-semibold rounded border border-red-700 text-red-700 px-3 p-2 block mt-4 leading-none focus:outline-none hover:bg-white hover:text-red-700" tabindex="-1">
                            <label>Xo\xE1 l\xF4 \u0111\xE3 ch\u1ECDn</label>
                        </button>
                    </div>
                </div>
            </div>
        </slot>
        <div class="overflow-x-auto">
            <slot name="report_ext">
            <div>
            <table :id="idtable" class="vuejx__table___comp" :class="[{'done___loading': renderDataLoading}, table_class]" v-bind:style="{'border-bottom': (dataResults && dataResults.length == 0) ? 'unset' : ''}">
                <thead :class="{ 'w-full': !employee__table }">
                    <slot name="thead_title"> </slot>
                    <slot name="thead">
                    <tr>
                        <th v-if="remove" width="40" @click="pickAll"><p class="relative"><i class="mdi mdi-checkbox-blank-outline absolute___checked" v-if="!checkAll"></i><i class="mdi mdi-checkbox-marked absolute___checked" v-else></i></p></th>
                        <th width="50">STT</th>
                        <th v-for="(item, index) of table_config" v-bind:key="index" :width="item.width" :class="item.class"> {{ item.title }} </th>
                    </tr>
                    </slot>
                </thead>
                <!--
                <tbody class="border-b w-full bg-white" v-show="!renderData">
                    <tr class="h-16 relative">
                        <td class="loading___table">
                            Ch\u1EDD trong gi\xE2y l\xE1t ...
                        </td>
                    </tr> 
                </tbody>
                -->
                <tbody class="border-b w-full bg-white">
                    <slot name="tbody" v-bind:page="rows" v-bind:data="dataResults"> <slot name="tbody_title"></slot>
                        <template v-for="(item, index) in dataResults">
                            <tr v-bind:key="index">
                                <td width="40" align="center" v-if="remove" class="cursor-pointer" @click="pickRemove(item._id, ids.length > 0 && ids.indexOf(item._id) != -1, item)"
                                    :class="{'bg-yellow-200': ids.length > 0 && ids.indexOf(item._id) != -1}"
                                >
                                    <slot :name="'cell_pick_item'" v-bind:celldata="item" v-bind:index="index" v-bind:ids="ids">
                                        <p class="relative">
                                            <i class="mdi mdi-checkbox-marked absolute___checked" v-if="ids.length > 0 && ids.indexOf(item._id) != -1"></i>
                                            <i class="mdi mdi-checkbox-blank-outline absolute___checked" v-else></i>
                                        </p>
                                    </slot>
                                </td>
                                <td :width="widthSTT" align="center"
                                    :class="{'bg-yellow-200': indexTree == item._id}"    
                                >{{ page * rows - rows + index + 1 }} </td>
                                <td v-for="(itemCf, indexx) of table_config" v-bind:key="indexx" :width="itemCf.width" 
                                    :class="[{'bg-yellow-200': indexTree == item._id, 'font-bold text-blue-700': itemCf.aggs && aggReport[objectView(item, itemCf.value, itemCf.default)]}, itemCf.class]"    
                                    @click="itemCf.action ? '' : toDetail(item)" >
                                    <slot v-if="itemCf.model" :name="'cell_' + itemCf.model" v-bind:celldata="item" v-bind:index="index">
                                        <template v-if="itemCf.value_1 && itemCf.date ? dateView(item, itemCf.value_1) : objectView(item, itemCf.value_1, itemCf.default)">
                                            <span class="title_slot_table font-semibold" v-html="itemCf.value_title"></span>
                                            <span v-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', ''))" v-html="item.highlight[itemCf.value.replace('_source.', '')].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.raw')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.raw'].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.keyword')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.keyword'].toString()"> </span>
                                            <span v-html="itemCf.date ? dateView(item, itemCf.value) : objectView(item, itemCf.value, itemCf.default)" v-else></span><br/>
                                            <span class="title_slot_table font-semibold" v-html="itemCf.value_title_1"></span>
                                            <span v-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value_1.replace('_source.', ''))" v-html="item.highlight[itemCf.value_1.replace('_source.', '')].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value_1.replace('_source.', '') + '.raw')" v-html="item.highlight[itemCf.value_1.replace('_source.', '') + '.raw'].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value_1.replace('_source.', '') + '.keyword')" v-html="item.highlight[itemCf.value_1.replace('_source.', '') + '.keyword'].toString()"> </span>
                                            <span v-html="itemCf.date ? dateView(item, itemCf.value_1) : objectView(item, itemCf.value_1)" v-else></span>
                                        </template>
                                        <template v-if="itemCf.aggs">
                                            {{ aggReport[objectView(item, itemCf.value, itemCf.default)] ? aggReport[objectView(item, itemCf.value, itemCf.default)] : 0 }}
                                        </template>
                                        <template v-else-if="itemCf.date && itemCf.time">
                                            {{ dateTimeView(item, itemCf.value) }}
                                        </template>
                                        <template v-else>
                                            <span v-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', ''))" v-html="item.highlight[itemCf.value.replace('_source.', '')].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.raw')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.raw'].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.keyword')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.keyword'].toString()"> </span>
                                            <span v-html="processViewHTML(itemCf, item)" v-else></span>
                                        </template>
                                    </slot>
                                    <slot v-else :name="'cell_' + indexx" v-bind:celldata="item">
                                        <template v-if="itemCf.value_1 && itemCf.date ? dateView(item, itemCf.value_1) : objectView(item, itemCf.value_1, itemCf.default)">
                                            <span class="title_slot_table font-semibold" v-html="itemCf.value_title"></span>
                                            <span v-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', ''))" v-html="item.highlight[itemCf.value.replace('_source.', '')].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.raw')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.raw'].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.keyword')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.keyword'].toString()"> </span>
                                            <span v-html="itemCf.date ? dateView(item, itemCf.value) : objectView(item, itemCf.value, itemCf.default)" v-else></span><br/>
                                            <span class="title_slot_table font-semibold" v-html="itemCf.value_title_1"></span>
                                            <span v-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value_1.replace('_source.', ''))" v-html="item.highlight[itemCf.value_1.replace('_source.', '')].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value_1.replace('_source.', '') + '.raw')" v-html="item.highlight[itemCf.value_1.replace('_source.', '') + '.raw'].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value_1.replace('_source.', '') + '.keyword')" v-html="item.highlight[itemCf.value_1.replace('_source.', '') + '.keyword'].toString()"> </span>
                                            <span v-html="itemCf.date ? dateView(item, itemCf.value_1) : objectView(item, itemCf.value_1)" v-else></span>
                                        </template>
                                        <template v-if="itemCf.aggs">
                                            {{ aggReport[objectView(item, itemCf.value, itemCf.default)] ? aggReport[objectView(item, itemCf.value, itemCf.default)] : 0 }}
                                        </template>
                                        <template v-else-if="itemCf.date && itemCf.time">
                                            {{ dateTimeView(item, itemCf.value) }}
                                        </template>
                                        <template v-else>
                                            <span v-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', ''))" v-html="item.highlight[itemCf.value.replace('_source.', '')].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.raw')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.raw'].toString()"> </span>
                                            <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.keyword')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.keyword'].toString()"> </span>
                                            <span v-html="processViewHTML(itemCf, item)" v-else></span>
                                        </template>
                                    </slot>
                                </td>
                            </tr> 
                        </template>
                    </slot>
                </tbody>
            </table>
            <slot name="pagging" v-bind:paggingData="paggingData" v-bind:totalRecord="totalRecord" v-bind:page="page" v-bind:pages="pages">
            <header v-if="paging" class="bg-white flex items-center py-1 pr-4"><div class="flex"><button class="font-semibold text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1"  @click="paggingData('first')"  aria-label="first"> <i class="mdi" :class="{'mdi-chevron-double-left': !loadingAction}"></i> </button><button class="font-semibold text-blue-700 pl-0 pr-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('prev')" aria-label="back" > <i class="mdi" :class="{'mdi-chevron-left': !loadingAction}"></i> </button><button class="text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary btn__pagging" tabindex="-1" > Trang {{ page }} / {{ pages }} </button><button v-if="page < pages" class="font-semibold text-blue-700 pl-2 pr-0 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('next')" aria-label="next" > <i class="mdi" :class="{'mdi-chevron-right': !loadingAction}"></i> </button><button v-if="page < pages" class="font-semibold text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('last')" aria-label="last"><i class="mdi" :class="{'mdi-chevron-double-right': !loadingAction}"></i> </button><button class="focus:outline-none btn__pagging_info" tabindex="-1"> <div> <h4 class="font-semibold"> <span>T\u1ED5ng s\u1ED1 b\u1EA3n ghi: </span> <span class='text-blue-700'>{{totalRecord}}</span> </h4> </div> </button></div> <div class="ml-auto"> <span>Hi\u1EC3n th\u1ECB</span> <input style="width: 60px" class="text-center appearance-none bg-gray-200 text-blue-700 border border-gray-200 rounded py-1 px-1 focus:outline-none focus:bg-white focus:border-gray-400 ml-2" v-model="rows" @change="paggingData('rows')" type="text" aria-label="total" /></div></header>
            </slot></slot>
        </div>
    </div>
    `},tableSimplePagging={props:{page:{type:Number,default:()=>1},pages:{type:Number,default:()=>1},size:{type:Number,default:()=>15},sizeLast:{type:Number,default:()=>0},totalRecord:{type:Number,default:()=>0},sortBack:{type:Array,default:()=>[]},sortNext:{type:Array,default:()=>[]}},methods:{async paggingData(e){let t=this;t.sizeLastX=t.rows,t.curPage=t.page;let a=e;a==="next"?(t.curPage=parseInt(t.page)+1,t.page>=t.pages&&(t.curPage=t.pages)):a==="prev"?t.curPage=parseInt(t.page)-1:a==="first"?t.curPage=1:a==="last"&&(t.curPage=t.pages,t.sizeLastX=t.totalRecord-t.rows*(t.curPage-1)),t.curPage<=1?(t.curPage=1,a="first"):t.page<=t.pages,t.$emit("pagging",{sizeLast:t.sizeLastX,page:t.curPage,pages:t.pages,size:t.size,totalRecord:t.totalRecord,sortBack:t.sortBack,sortNext:t.sortNext,paggingType:a})}},mounted:function(){let e=this;e.$nextTick(function(){setTimeout(async()=>{e.sizeLast==0?e.rows=e.size:e.sizeLast?e.rows=e.sizeLast:e.rows=e.size},0)})},data:()=>({sizeLastX:15,curPage:1,rows:15}),template:`
        <header class="bg-white flex items-center py-1 pr-4"><div class="flex"><button class="font-semibold text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1"  @click="paggingData('first')"  aria-label="first"> <i class="mdi mdi-chevron-double-left"></i> </button><button class="font-semibold text-blue-700 pl-0 pr-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('prev')" aria-label="back" > <i class="mdi mdi-chevron-left"></i> </button><button class="text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary btn__pagging" tabindex="-1" > Trang {{ page }} / {{ pages }} </button><button v-if="page < pages" class="font-semibold text-blue-700 pl-2 pr-0 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('next')" aria-label="next" > <i class="mdi mdi-chevron-right"></i> </button><button v-if="page < pages" class="font-semibold text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('last')" aria-label="last"><i class="mdi mdi-chevron-double-right"></i> </button><button class="focus:outline-none btn__pagging_info" tabindex="-1"> <div> <h4 class="font-semibold"> <span>T\u1ED5ng s\u1ED1 b\u1EA3n ghi: </span> <span class='text-blue-700'>{{totalRecord}}</span> </h4> </div> </button></div> <div class="ml-auto"> <span>Hi\u1EC3n th\u1ECB</span> <input style="width: 60px" class="text-center appearance-none bg-gray-200 text-blue-700 border border-gray-200 rounded py-1 px-1 focus:outline-none focus:bg-white focus:border-gray-400 ml-2" v-model="rows" @change="paggingData('rows')" type="text" aria-label="total" /></div></header>
    `},tableSimpleTop={props:{storage:{type:Object,default:()=>"regular"},cardClass:{type:String,default:()=>""},redirectDetail:{type:Boolean,default:!0},viewMore:{type:String,default:()=>""},viewDetail:{type:String,default:()=>""},filter_options:{type:Array,default:()=>[]},table_config:{type:Array,default:()=>[]},itemText:{type:String,default:""},itemValue:{type:String,default:""},title:{type:String,default:""},detailPage:{type:String,default:""},employee__table:{type:Boolean,default:!1},idtable:{type:String,default:"table__to__export"},db:{type:String,default:()=>localStorage.getItem("db")},collection:{type:String,default:()=>""},site:{type:String,default:()=>""},includes:{type:Array,default:()=>[]},sort:{type:Array,default:()=>[]},pagesize:{type:Number,default:()=>5},paging:{type:Boolean,default:()=>!0},condition:{type:Array,default:()=>[]},queryFilter:{type:Array,default:()=>[]},keywords:{type:Array,default:()=>[]},queryParam:{type:Boolean,default:()=>!0},empty:{type:Boolean,default:()=>!1},skeleton:{type:Object,default:()=>({th:[],td:[]})},query:{type:Object,default:()=>null}},methods:{async init(){let e=this;const t=window.Vue.router.currentRoute.value.query;e.keywordsQ=t.keywords?t.keywords:"";const a=await window.VueJX.search(e,e.collection,e.keywords,e.queryFilter,e.condition,e.includes,e.sort,{match:{storage:e.storage}},e.pagesize,e.queryParam,e.pagesize);e.renderData=!0,e.dataResults=a.dataResults,e.$emit("dataArray",a.dataResults),e.$emit("total",a.totalRecord),e.$emit("totalData",{total:a.totalRecord,collection:e.collection})},objectView(e,t,a){return window.Vue.objectView(e,t,a)},toDetail(e){if(this.detailPage&&this.detailPage.indexOf("?")!=-1){let[t,a]=this.detailPage.split("?"),r="&t="+new Date().getTime();if(a&&a.indexOf("&")!=-1){let o=a.split("&");for(let n of o)r=r+"&"+n}else a&&(r=r+"&"+a);window.location.href=t+"?_id="+e._id+r}else this.redirectDetail?window.location.href=this.viewDetail+"?_id="+e._id:this.$emit("change_data",e)}},mounted:function(){let e=this;e.renderData=!1,e.$nextTick(function(){setTimeout(async()=>{await e.init()},0)})},data:()=>({keywordsQ:"",renderData:!1,site:localStorage.getItem("site"),rows:15,dataResults:[],page:1,pages:1,totalRecord:0,sortBack:[],sortNext:[],paggingType:""}),template:`
    <div class="vuejx__chips_filter mb-2 fix-width-numnber vuejx___header_top head">
      <header class="relative inline-block flex">
        <span class="flex items-center"> <h4 class="font-semibold pl-1 text-white cursor-default"> {{ title }}</h4> </span>
        <div v-if="viewMore" class="ml-auto"> <a :href="viewMore + '?keywords=' + keywordsQ" class="relative text-gray-600 rounded px-2 pr-4 py-2 leading-none focus:outline-none hover:text-blue-700" tabindex="-1" style="text-transform: none;"> Xem th\xEAm <i class="mdi mdi-chevron-right absolute right-0 top-0 text-md" style="margin-top: 7px;"></i> </a> </div>
      </header>
      <div class="text-justify" :class="cardClass" :key="renderData">
        <div class="flex justify-start cursor-pointer text-gray-900 hover:text-blue-700 hover:bg-gray-200 px-2 py-1 relative border-b border-gray-200" v-for="(item, index) in dataResults" v-bind:key="index" @click="toDetail(item)" ><template v-if="objectView(item, itemText)"> <i class="mdi mdi-chevron-right absolute left-0 top-0 text-sm" style="margin-top: 6px; margin-left: 8px;"></i> <slot name="tbody" v-bind:item="item"> <div class="text-sm w-full mr-5 ml-5"> {{ objectView(item, itemText) }} </div> </slot> </template></div>
      </div>
    </div>
    `},VueJXMenuAggs={props:{storage:{type:String,default:()=>"regular"},item_conditon:{type:Array,default:()=>[]},sort:{type:Array,default:()=>[{order:"asc"}]},placeholder:{type:String,default:"T\xECm ki\u1EBFm..."},redirect_page:{type:String,default:""},database:{type:String,default:localStorage.getItem("db")},collection:{type:String,default:""},title_header:{type:String,default:""},showMenu:{type:Boolean,default:()=>!0},tree:{type:Boolean,default:!1},ignoreData:{type:Array,default:()=>[]},condition:{type:Array,default:()=>[]},conditionAggs:{type:Array,default:()=>[]},type:{type:String,default:"danh_muc"},group_by:{type:Object,default:null},group_size:{type:Number,default:100},range:{type:Array,default:[]},aggs:{type:Object,default:null},publicData:{type:String,default:"false"},single:{type:Array,default:["_s_n","_s_b","_pagging","_rows","_page","_sizeLast"]},pagging:{type:Boolean,default:!1},redirect:{type:Boolean,default:!1},noreport:{type:Boolean,default:!1},view_null:{type:Boolean,default:!1},custom_label:{type:Object,default:null},custom_label_null:{type:String,default:""},skeleton:{type:Object,default:{rows:2}},multiple:{type:Boolean,default:!1},show_empty_aggs:{type:Boolean,default:!0},keywords:{type:Array,default:[]},queryParam:{type:Boolean,default:!0},re_calculator:{type:Array,default:[]},re_calculator_key:{type:String,default:""},textKey:{type:String,default:"title"},valKey:{type:String,default:"shortName"},queryFilter:{type:Array,default:()=>[]},columns:{type:Array,default:["shortName","title","type","parent","MaMuc","MaLoai","TenMuc","TenGoi","MaDinhDanh"]},filter_adv:{type:Boolean,default:!0},collection_danhmuc:{type:String,default:""}},methods:{async init(e,t){let a=this;if(a.renderDataLoading=!1,a.renderData=!1,a.items=[],a.paggingShow=String(a.pagging)=="true",a.noreport&&a.collection){const r=await window.VueJX.search(a,a.collection,a.keywords,a.queryFilter,a.condition,a.columns,a.sort,{match:{storage:a.storage}},a.group_size,a.queryParam,a.group_size);let o=-1;const l=window.Vue.router.currentRoute.value.query[a.group_by.keyAggs];a.activeArray=[],a.selectedMenuXXX=[];for(let s of r.dataResults){if(a.items.push({code:a.objectView(s._source,a.valKey),name:a.objectView(s._source,a.textKey),counter:""}),o=o+1,Array.isArray(l)){for(const u of l)if(String(a.objectView(s._source,a.valKey))===String(u)){a.multiple?a.selectedMenuXXX.push(o):a.selectedMenuXXX=[o];break}}else String(a.objectView(s._source,a.valKey))===String(l)&&(a.multiple?a.selectedMenuXXX.push(o):a.selectedMenuXXX=[o]);a.activeArray=a.selectedMenuXXX}}else{let r=null;a.storage!=="regular"&&a.conditionAggs.push({match:{storage:a.storage}}),a.type==="danh_muc"?r=await window.VueJX.aggs(a,a.type,a.group_by,a.group_size,a.pageCount,a.valKey,a.textKey,e,a.conditionAggs,a.re_calculator,a.keywords,a.queryParam,a.publicData,a.multiple,a.pageCountNext,a.range,a.custom_label):a.type==="range"?r=await window.VueJX.aggs(a,a.type,a.group_by,a.group_size,a.pageCount,a.valKey,a.textKey,e,a.conditionAggs,a.re_calculator,a.keywords,a.queryParam,a.publicData,a.multiple,a.pageCountNext,a.range,a.custom_label):a.type==="fulltext"&&(r=await window.VueJX.aggs(a,a.type,a.group_by,a.group_size,a.pageCount,a.valKey,a.textKey,e,a.conditionAggs,a.re_calculator,a.keywords,a.queryParam,a.publicData,a.multiple,a.pageCountNext,a.range,a.custom_label)),a.items=r&&r.items?r.items:[],a.pageCountNext=r&&r.pageCountNext?r.pageCountNext:0,a.pageCount=r&&r.pageCount?r.pageCount:0,a.selectedMenuXXX=r&&r.selectedMenuXXX?r.selectedMenuXXX:[],a.activeArray=r&&r.activeArray?r.activeArray:[],a.group_by.collection?a.collectionDM=a.group_by.collection:a.collectionDM=r&&r.collectionDM?r.collectionDM:""}a.items.length===0&&(a.pageCount=a.pageCount-1),a.renderData=!0,setTimeout(()=>{a.renderDataLoading=!0},0)},menuToParMutiple(e,t){let a=[{key:"typeView",value:""},{key:"_page",value:"1"}];(!window.Vue.router.currentRoute.value.query.hasOwnProperty("_filterAction")||window.Vue.router.currentRoute.value.query._filterAction!=="search")&&a.push({key:"_filterAction",value:"filter"}),this.activeArray=Array.from(new Set(this.activeArray));let r=0;for(let n of this.activeArray)n===t&&this.activeArray.splice(r,1),r=r+1;let o=window.Vue.router.currentRoute.value.query[this.group_by.keyAggs];for(const n of this.single)a.push({key:n,value:""});if(this.view_null)a.push({key:this.group_by.keyAggs,value:"NULL"});else if(this.type==="range"){let n=window.Vue.router.currentRoute.value.query[this.group_by.keyAggs+"_from"],l=window.Vue.router.currentRoute.value.query[this.group_by.keyAggs+"_to"];if(String(e.code)===String(n+"-"+l))String(e.code).split("-"),a.push({key:this.group_by.keyAggs+"_from",value:""}),a.push({key:this.group_by.keyAggs+"_to",value:""}),e.index=-1;else{const[s,u]=String(e.code).split("-");a.push({key:this.group_by.keyAggs+"_from",value:s}),a.push({key:this.group_by.keyAggs+"_to",value:u}),this.activeArray.push(t)}}else if(Array.isArray(o)){o.indexOf(String(e.code))>-1?o.splice(o.indexOf(String(e.code)),1):(a.push({key:this.group_by.keyAggs,value:String(e.code).replace(/&/g,"%26")}),this.activeArray.push(t));for(const n of o)a.push({key:this.group_by.keyAggs,value:String(n).replace(/&/g,"%26")})}else String(e.code)===String(o)?a.push({key:this.group_by.keyAggs,value:""}):(a.push({key:this.group_by.keyAggs,value:String(e.code).replace(/&/g,"%26")}),this.activeArray.push(t));this.multiple&&window.Vue.router.currentRoute.value.query[this.group_by.keyAggs]&&!Array.isArray(window.Vue.router.currentRoute.value.query[this.group_by.keyAggs])&&String(e.code)!==String(window.Vue.router.currentRoute.value.query[this.group_by.keyAggs])&&a.push({key:this.group_by.keyAggs,value:String(window.Vue.router.currentRoute.value.query[this.group_by.keyAggs]).replace(/&/g,"%26")}),a.push({key:"_state_aggs",value:this.group_by.keyAggs}),this.redirect?(a=[],window.Vue.redirect(a,!0,e.code,!0)):window.Vue.redirect(a,!0,null,!1,this.multiple)},menuToPar(e,t){this.activeArray=[];let a=[{key:"typeView",value:""},{key:"_page",value:"1"}];(!window.Vue.router.currentRoute.value.query.hasOwnProperty("_filterAction")||window.Vue.router.currentRoute.value.query._filterAction!=="search")&&a.push({key:"_filterAction",value:"filter"});let r=window.Vue.router.currentRoute.value.query[this.group_by.keyAggs];for(const o of this.single)a.push({key:o,value:""});if(this.view_null)a.push({key:this.group_by.keyAggs,value:"NULL"});else if(this.type==="range"){let o=window.Vue.router.currentRoute.value.query[this.group_by.keyAggs+"_from"],n=window.Vue.router.currentRoute.value.query[this.group_by.keyAggs+"_to"];if(String(e.code)===String(o+"-"+n))String(e.code).split("-"),a.push({key:this.group_by.keyAggs+"_from",value:""}),a.push({key:this.group_by.keyAggs+"_to",value:""}),e.index=-1;else{const[l,s]=String(e.code).split("-");a.push({key:this.group_by.keyAggs+"_from",value:l}),a.push({key:this.group_by.keyAggs+"_to",value:s}),this.activeArray.push(t)}}else String(e.code)===String(r)?(a.push({key:this.group_by.keyAggs,value:""}),e.index=-1):(a.push({key:this.group_by.keyAggs,value:String(e.code).replace(/&/g,"%26")}),this.activeArray.push(t));a.push({key:"_state_aggs",value:this.group_by.keyAggs}),this.redirect?(a=[],this.redirect_page?window.Vue.redirect(a,!0,this.redirect_page,!0):window.Vue.redirect(a,!0,e.code,!0)):this.redirect_page?window.Vue.redirect(a,!0,this.redirect_page,!1,!1):window.Vue.redirect(a,!0,null,!1,!1)},async nextAggs(){this.paggingAction=!0,this.pageCountNext!==0&&(this.pageCount=this.pageCount+1,await this.init(this.excludeXXX,!0,this.filter))},async backAggs(){this.paggingAction=!0,this.pageCount=this.pageCount-1,this.pageCount<=0&&(this.pageCount=0),await this.init(this.excludeXXXBack,!1,this.filter)},toogleMenu(){this.showMenuScope=!this.showMenuScope},toogleMenuSearch(){this.toogleSearch=!this.toogleSearch},objectView(e,t,a){return window.Vue.objectView(e,t,a)},changeData(e){let t=[{key:"typeView",value:""},{key:"_page",value:"1"}];t.push({key:this.group_by.keyAggs,value:e._source[this.valKey]}),window.Vue.redirect(t,!0)}},watch:{$route:async function(e,t){this.group_by.keyAggs!=e._state_aggs&&e.params.page==t.params.page&&(this.paggingAction=!1,await this.init([],!0))}},mounted:function(){let e=this;e.$nextTick(function(){setTimeout(async()=>{e.paggingAction=!1,await e.init([],!0)},0)})},data:()=>({paggingShow:!1,collectionDM:"",items:[],search:null,activeArray:[],open:[],tree:[],renderData:!1,showPaggingSize:0,showPaggingSizeTotal:0,selectedMenu:[-1],ignore:{},pageCount:1,pageCountNext:1,excludeXXX:[],excludeXXXBack:[],activePage:window.Vue.router.currentRoute.value.params.page,selectedMenuXXX:[],filter:[],paggingActive:!0,showMenuScope:!0,toogleSearch:!1,paggingAction:!1,renderDataLoading:!1}),template:`
    <div class="vuejx__chips_filter mb-2" :class="{'done___loading': renderDataLoading}">
        <header class="bg-white flex items-center px-2 border-b border-gray-200" v-if="title_header" >
        <div class="flex"> <button aria-label="btn" class="focus:outline-none" tabindex="-1"> <div> <h4 class="font-semibold text-left truncate header___aggs"> {{ title_header }} </h4> </div> </button> </div>
        <div class="ml-auto">
            <button v-if="type === 'danh_muc' && filter_adv" aria-label="menu" class=" font-semibold rounded px-0 py-2 leading-none focus:outline-none hover:text-blue-700 mr-2" tabindex="-1" @click="toogleMenuSearch" > <i class="mdi mdi-search" style="color: inherit" ></i> </button>
            <button aria-label="menu" class=" font-semibold rounded  px-0 py-2 leading-none focus:outline-none hover:text-blue-700 " tabindex="-1" @click="toogleMenu" > <i v-if="showMenuScope" class="mdi mdi-chevron-double-up" style="color: inherit" ></i> <i v-else class="mdi mdi-chevron-double-down" style="color: inherit" ></i></button>
        </div>
        </header>
        <div v-if="!renderData && showMenuScope" class="bg-white p-3 py-1"> <div v-for="tdRow in skeleton['rows']" v-bind:key="tdRow"> <span class="skeleton-box h-4 mt-1 w-3/5 inline-block"></span> <span class="skeleton-box h-4 mt-1 w-1/12 inline-block" style="float: right" ></span></div> </div>
        <div v-else v-show="showMenuScope" class="bg-white">
            <vuejx-autocomplete v-if="toogleSearch && type === 'danh_muc'" :config="{
                    placeholder: placeholder,
                    modelView: 'object',
                    chips: false, 
                    object: true, 
                    itemText: '_source.' + textKey,
                    itemValue: '_source.' + valKey,
                    link: [ { db: database, collection: collection_danhmuc ? collection_danhmuc : collectionDM, condition: item_conditon, sort: collectionDM == 'C_TinhThanh' ? [{'TenMuc.keyword': 'asc'}] : sort } ],
                    column: columns, sort: sort
                }"
                @change_data="changeData"
            ></vuejx-autocomplete>
            <template v-if="type == 'danh_muc'">
                <vuejx-menu-aggs-view :key="items"
                    :collection_danhmuc="collection_danhmuc"
                    :items="items"
                    :group_size="group_size"
                    type="danh_muc"
                    :multiple="multiple"
                    :conditionAggs='conditionAggs'
                    :textKey="textKey"
                    :valKey="valKey"
                    :group_by="group_by"
                    :skeleton="skeleton"
                    :keywords="keywords"
                    :re_calculator="re_calculator"
                ></vuejx-menu-aggs-view>
            </template>
            <template v-if="renderData">
                <div class="flex justify-start cursor-pointer text-gray-900 hover:text-blue-700 hover:bg-gray-200 px-2 py-1 relative border-b border-gray-200 " :class="{ 'text-blue-700 bg-gray-200':  activeArray.indexOf(index) >= 0 }" v-for="(subItem, index) in items"  v-bind:key="index" >
                    <i v-if="multiple && activeArray.indexOf(index) >= 0" class="mdi mdi-checkbox-marked absolute left-0 top-0 text-sm" style="margin-top: 8px; margin-left: 8px"  @click="menuToParMutiple(subItem, index)" ></i>
                    <i v-else-if="multiple" class="mdi mdi-checkbox-blank-outline absolute left-0 top-0 text-sm" style="margin-top: 8px; margin-left: 8px" @click="menuToParMutiple(subItem, index)" ></i>
                    <div class="text-sm w-full" :class="{ 'mr-1': noreport, 'mr-8': !noreport, 'ml-5': multiple }" @click="menuToPar(subItem, index)" > {{ subItem["name"] }}  </div>
                    <i v-if="!noreport" class="absolute right-0 top-0 not-italic text-blue-700 text-sm" style="margin-top: 6px; margin-right: 13px"  @click="menuToPar(subItem, index)" >{{ subItem["counter"] }}</i>
                </div>
                <div class="flex justify-between relative" v-if="(paggingShow && renderData && items.length >= group_size) || paggingAction">
                    <button aria-label="btn" :class="{ 'cursor-not-allowed': pageCount === 0 || pageCount === 1, 'text-blue-700': pageCount > 1 }" @click="backAggs" class=" font-semibold  px-3 py-2 leading-none focus:outline-none hover:bg-primary hover:text-white" tabindex="-1" > <i class="mdi mdi-backburger text-xs"></i> </button>
                    <button aria-label="btn" :class="{ 'cursor-not-allowed': pageCountNext === 0, 'text-blue-700': pageCountNext !== 0 }" @click="nextAggs" class=" font-semibold px-3 py-2 leading-none focus:outline-none hover:bg-primary hover:text-white " tabindex="-1" > <i class="mdi mdi-forwardburger text-xs"></i></button>
                </div>
            </template>
        </div>
    </div>
    `},VueJXMenuAggsView={methods:{async init(e,t){let a=this;const r=await window.VueJX.aggs(a,"danh_muc",a.$parent._.props.group_by,1,1,a.$parent._.props.valKey,a.$parent._.props.textKey,a.$parent.excludeXXX,e,a.$parent._.props.re_calculator,a.$parent._.props.keywords,a.$parent._.props.queryParam,a.$parent._.props.publicData,a.$parent._.props.multiple,a.$parent._.props.pageCountNext,a.$parent._.props.range,a.$parent._.props.custom_label);if(r&&r.pageCount==0&&a.$parent._.data.collectionDM){let o={};o[a.$parent.valKey]=t;const n=await window.VueJX.search(a,a.$parent._.data.collectionDM,[],[],[{match:o}],a.$parent._.props.columns,null,null,1,!1,1);if(n&&n.totalRecord>0)try{a.detail={name:n.dataResults[0]._source[a.$parent.textKey]}}catch{}}else a.detail=r&&Array.isArray(r.items)&&r.items.length>0?r.items[0]:{}},menuToParMutiple(){let e=[{key:"typeView",value:""},{key:"_page",value:"1"}];e.push({key:this.$parent._.props.group_by.keyAggs,value:""}),window.Vue.redirect(e,!0)}},mounted:function(){let e=this;e.$nextTick(function(){setTimeout(async()=>{let t=!0,a=window.Vue.router.currentRoute.value.query[e.$parent.group_by.keyAggs];e.multiple=e.$parent._.props.multiple;for(const r of e.$parent.items)if(String(r.code)==String(a)){t=!1;break}if(t&&a){let r=JSON.parse(JSON.stringify(e.$parent._.props.conditionAggs));a&&Array.isArray(a);{let o={};o[e.$parent.group_by.keyAggs]=a,r.push({match:o})}await e.init(r,a)}},0)})},data:()=>({detail:{},multiple:!1}),template:`
    <div v-if="detail && detail.name" class="flex justify-start cursor-pointer hover:text-blue-700 hover:bg-gray-200 px-2 py-2 relative border-b border-gray-200 text-blue-700 bg-gray-200">
        <i v-if="multiple" @click="menuToParMutiple" class="mdi mdi-checkbox-marked absolute left-0 top-0 text-sm" style="margin-top: 12px; margin-left: 8px" ></i>
        <div @click="menuToParMutiple" class="text-sm w-full mr-8" :class="{'ml-5': multiple }"> {{ detail.name }}  </div>
        <i @click="menuToParMutiple" v-if="!noreport" class="absolute right-0 top-0 not-italic text-blue-700 text-sm" style="margin-top: 10px; margin-right: 13px" >
            {{ detail.counter ? detail.counter : 0 }}
        </i>
    </div>
    `},QLVTFilter={props:{reportLoadingText:{type:String,default:"Vui l\xF2ng ch\u1EDD trong khi ch\u1ED1t s\u1ED1 li\u1EC7u."},placeholderKeyowrds:{type:String,default:"T\xECm ki\u1EBFm ..."},state_query:{type:Array,default:()=>[]},filter_options:{type:Array,default:()=>[]},breadcrumbs:{type:Object,default:{}},simple:{type:Boolean,default:!1},export_title:{type:String,default:""},site:{type:String,default:""},report:{type:Object,default:null},multiple:{type:Boolean,default:!0},keywords_state:{type:Boolean,default:!0},filter_type:{type:Array,default:[{typeCode:"df",typeName:"T\xECm kh\xF4ng d\u1EA5u"},{typeCode:"cf",typeName:"T\xECm c\xF3 d\u1EA5u"}]},customFilterData:{type:Object,default:null},openSearchTool:{type:Boolean,default:!1},inlineFilter:{type:Boolean,default:!1},inlineSearch:{type:Boolean,default:!1}},methods:{async getFilterMenu(e,t){let a=this;if(String(t).indexOf("-")>0){let[r,o]=String(t).split("-");a.breadcrumbsData.push({text:r.replace(".0","")+" \u0111\u1EBFn "+o.replace(".0",""),disabled:!1,href:"javascript:;"})}else if(t!=null&&t!==""){let r={shortName:t};e.hasOwnProperty("dictCollection")&&(r["dictCollection._source.shortName"]=e.dictCollection),await ctx.root.$store.dispatch("vuejx_manager/userOne",{db:localStorage.getItem("db"),collection:e.collection,filter:r,keys:{shortName:1,title:1}}).then(o=>{o!=null&&a.breadcrumbsData.push({text:o.title,disabled:!1,href:"javascript:;"})}).catch(o=>{})}},async getSearchItems(){let e=this;e.preRender=!1,e.itemsFilter=[],e.searchObj={};let t={};for(const r of e.keyFilterItems)t[r.keyCode]=r;let a={};for(let r of e.itemsFilter)a[r.keyName]=r.keyName;await e.pullDataSource(),e.itemsFilter.length>0&&(e.searchAdvanced=!0),e.preRender=!0,e.searchObjNONE={}},addSearchItem(){this.preRender=!1,this.itemsFilter.push(this.keyFilterItems[0]),this.preRender=!0},showSearchAdvanced(){let e=this;e.searchAdvanced=!e.searchAdvanced;let t=window.Vue.router.currentRoute.value.query;if(!e.searchAdvanced&&t.adv_filter){let a=[];for(let o in e.customadv)o!="_view"&&o!="_tree_index"&&o!="_tree"&&a.push({key:o,value:""});a.push({key:"adv_filter",value:""});let r=null;t._view&&(r={_view:t._view},t._tree_index&&(r._tree_index=t._tree_index),t._tree&&(r._tree=t._tree)),window.Vue.redirect(a,!0,null,!0,e.multiple,!0,r)}},getDataReSource(e){return new Promise((t,a)=>{window.Vue.$axios.get(e).then(r=>{r.data.data.search!==null?t(r.data.data.search.hits.hits):t([])}).catch(r=>{a()})})},submitSearch(e,t){this.customadv,!this.inlineSearch&&(e&&(e.keyCode===13||e.type==="click")||e===void 0||t==="cbx")?this.rawSearc():this.$emit("inlineSearchAction",{keywords:this.keywords,customadv:this.customadv})},clearSearch(){this.keywords="",this.customadv={},this.submitSearch()},rawSearc(){let e=this,t=window.Vue.router.currentRoute.value.query,a=[];e.keywords!==void 0&&e.keywords!==""?a.push({key:"keywords",value:String(e.keywords).trim()}):a.push({key:"keywords",value:""}),e.itemsFilter.length>0?(a.push({key:"adv_filter",value:!0}),e.searchAdvanced=!0):(a.push({key:"adv_filter",value:""}),e.searchAdvanced=!1),a.push({key:"_page",value:"1"}),a.push({key:"typeView",value:""}),t._tree_index&&a.push({key:"_tree_index",value:t._tree_index}),t._tree&&a.push({key:"_tree",value:t._tree});let r=!0;for(let o of a)if(o.key!=="_page"&&o.key!=="t"&&o.key!=="_filterAction"&&o.value!==void 0&&o.value!==null&&o.value!==""){r=!1;break}if(r?a.push({key:"_filterAction",value:""}):a.push({key:"_filterAction",value:"search"}),Object.keys(e.customadv).length>0&&e.customadv.constructor===Object){a=[],e.keywords!==void 0&&e.keywords!==""?a.push({key:"keywords",value:String(e.keywords).trim()}):a.push({key:"keywords",value:""});let o=0;console.log("vm.customadvvm.customadv=",e.customadv,e.filter_options);for(let l of e.filter_options)l.keyCode&&e.customadv[l.keyCode]&&(o=o+1),l.fields=="date_range"&&e.customadv[l.keyCode+"_from"]&&e.customadv[l.keyCode+"_to"]&&(o=o+1,a.push({key:l.keyCode+"_from",value:e.customadv[l.keyCode+"_from"]}),a.push({key:l.keyCode+"_to",value:e.customadv[l.keyCode+"_to"]})),a.push({key:l.keyCode,value:e.customadv[l.keyCode]});!e.searchAdvanced&&o>0&&(a.push({key:"adv_filter",value:!0}),e.searchAdvanced=!0);let n=null;if(t._view&&(n={_view:t._view},t._tree_index&&(n._tree_index=t._tree_index),t._tree&&(n._tree=t._tree)),e.state_query&&Array.isArray(e.state_query))for(const l in e.state_query)a.push({key:e.state_query[l],value:t[e.state_query[l]]?t[e.state_query[l]]:""});t._id&&a.push({key:"_id",value:t._id}),console.log("querySearchquerySearch",a,n),window.Vue.redirect(a,!0,null,!0,e.multiple,!0,n)}else{if(e.state_query&&Array.isArray(e.state_query))for(const o in e.state_query)a.push({key:e.state_query[o],value:t[e.state_query[o]]?t[e.state_query[o]]:""});window.Vue.redirect(a,!0,null,!1,e.multiple)}},collapseMenu(){this.collapse=!this.collapse,this.showBread=!this.showBread,this.$emit("collapseMenu")},toPage(){this.$emit("toPage")},async pullDataSource(){let e=this;e.renderData=!1,e.renderData=!0},exportData(){this.$emit("export")},pickKyBaoCao(e){var a,r,o;let t=this;t.customadv[t.dataKyBaoCao.TuNgay]=(a=e._source)==null?void 0:a.TuNgay,t.customadv[t.dataKyBaoCao.DenNgay]=(r=e._source)==null?void 0:r.DenNgay,t.customadv[t.dataKyBaoCao.TuNgay]=(o=e._source)==null?void 0:o.TuNgay;for(let n in t.dataKyBaoCao)String(n).endsWith("Key")&&(t.customadv[t.dataKyBaoCao[n]]=t.dataKyBaoCao[String(n).slice(0,-3)]);t.rawSearc()},exportDataBaoCao(){this.$emit("export",{MauBaoCao:this.dataKyBaoCao,KyBaoCao:this.pickKy.MaMuc._source})},changeDataDate(e){console.log(e,this.customadv)}},mounted:function(){let e=this;e.$nextTick(function(){setTimeout(async()=>{e.renderLoginComp=!1;const t=window.Vue.router.currentRoute.value;e.siteCur=localStorage.getItem("site"),t.query.hasOwnProperty("keywords")&&t.query.keywords!==""&&(e.keywords_state&&!e.inlineSearch?e.keywords=decodeURIComponent(t.query.keywords):e.keywords=""),await e.getSearchItems(),t.query.hasOwnProperty("adv_filter")&&t.query.adv_filter==="true"&&(e.searchAdvanced=!0);for(let a in t.query)a!=="_id"&&a!=="_page"&&a!=="adv_filter"&&a!=="t"&&a!=="_filterAction"&&(e.customadv[a]=t.query[a]);if(e.report){let a={size:1,query:{bool:{filter:{match:{MaDinhDanh:e.report.MaDinhDanh}}}}};const r=`query search($token: String, $body: JSON, $db: String, $collection: String) {
                      results: search(token: $token, body: $body, db: $db, collection: $collection )
                  }`;await window.Vue.$root.dispatch("vuejx_manager/graphqlQuery",{query:r,variables:{body:a,db:localStorage.getItem("db"),collection:e.report.collection}}).then(o=>{o.results!==null?e.dataKyBaoCao=o.results.hits.hits[0]._source:e.dataKyBaoCao={}}).catch(o=>{e.dataKyBaoCao={}})}setTimeout(()=>{e.renderLoginComp=!0,e.openSearchTool&&(e.searchAdvanced=!0)},200)},0)})},data:()=>({itemsFilter:[],searchAdvanced:!1,keyFilterItems:[],keyFilterItemsTemp:[],typeFilterItems:[],collapse:!1,breadcrumbsData:[],showBread:!0,preRender:!1,keywords:"",renderData:!1,searchObj:{},searchObjNONE:{},customadv:{},siteCur:"",renderLoginComp:!1,dataKyBaoCao:{},pickKy:{}}),template:`
    <div class="qlt_timkiem flex-1">
      <div class="toolbar-search">
        <header class="flex items-center">
          <div class="flex w-full">
              <div class="flex flex-wrap items-stretch w-full mb-0 relative">
                <div class="w-full">
                  <input
                    class=" w-full p-2 focus:outline-none focus:cursor-text border border-gray-400 text-gray-700 focus:bg-white focus:border-gray-400"
                    v-model="keywords"
                    v-on:keyup="submitSearch"
                    :placeholder="placeholderKeyowrds"
                  />
                </div>
              </div>
          </div>
          <div class="flex ml-auto flex-1 ext___filter_ml_search">
            <slot name="filter_button" 
              v-bind:collapse="collapse"
              v-bind:submitSearch="submitSearch"
              v-bind:showSearchAdvanced="showSearchAdvanced"
              v-bind:clearSearch="clearSearch">
              <button aria-label="btn"
                class="font-semibold rounded px-3 pb-1 leading-none focus:outline-none bg-primary text-white min-w-full ml-1"
                style="min-width: 85px;min-height: 32px;"
                tabindex="-1"
                @click="submitSearch"
                v-if="simple"
              >
                T\xECm ki\u1EBFm
              </button>
              <button aria-label="btn"
                class="font-semibold rounded px-3 py-2 leading-none focus:outline-none border border-primary text-primary min-w-full ml-1"
                style="min-width: 90px;min-height: 32px;"
                tabindex="-1"
                @click="showSearchAdvanced"
                v-else-if="!simple && !inlineFilter"
              >
                {{ searchAdvanced ? 'Xo\xE1 b\u1ED9 l\u1ECDc' : 'N\xE2ng cao'}}
              </button>
              <button aria-label="btn"
                class="font-semibold rounded px-3 py-2 leading-none focus:outline-none bg-primary text-white min-w-full ml-1"
                style="min-width: 90px;min-height: 32px;"
                tabindex="-1"
                @click="exportData"
                v-else-if="export_title !== '' && String(simple) !== 'true'"
              >
                {{ export_title }}
              </button>
              <button aria-label="btn"
                class="font-semibold rounded px-3 pb-1 leading-none focus:outline-none bg-primary text-white min-w-full ml-1"
                style="min-width: 115px;min-height: 32px;"
                tabindex="-1"
                @click="toPage"
                v-else-if="export_title === '' && String(simple) !== 'true'"
              >
                <i
                  class="mdi mdi-playlist-plus"
                  style="font-size: 14px;"
                ></i>
                Th\xEAm m\u1EDBi
              </button>
              <button aria-label="btn"
                class="font-semibold rounded px-3 py-2 leading-none focus:outline-none border border-primary text-primary min-w-full ml-1"
                style="min-width: 40px;min-height: 32px;"
                tabindex="-1"
                @click="toPage" v-if="!simple"
              >
                <i
                  class="mdi mdi-playlist-plus"
                  style="font-size: 14px;"
                ></i>
              </button>
              <button aria-label="btn"
                class="font-semibold rounded px-3 py-2 leading-none focus:outline-none border border-primary text-primary min-w-full ml-1"
                style="min-width: 40px;min-height: 32px;"
                tabindex="-1"
                @click="collapseMenu"
                v-if="!simple"
              >
                <i v-if="!collapse"
                  class="mdi mdi-arrow-collapse-all"
                  style="font-size: 14px;"
                ></i>
                <i v-else
                  class="mdi mdi-arrow-expand-all"
                  style="font-size: 14px;"
                ></i>
              </button>
            </slot>
            <slot name="tfilter_inline" v-bind:filter="customadv" v-bind:submitSearch="submitSearch">
              <template v-if="inlineFilter && filter_options.length > 0">
                <v-layout wrap class="-mr-2 flex-1">
                  <template  v-for="(item, index) in filter_options" :key="index">
                    <v-flex 
                      v-if="renderData"
                      :class="[{'xs12 sm3 px-2': !item.class}, item.class]"
                    >
                      <vuejx-autocomplete
                        class="vuejx_combobox_selection"
                        v-if="item['fields'].toLocaleLowerCase() === 'autocomplete' && !item['dynamicAPI']"
                        :config='{
                            re_pull: customadv[item.keyCode],
                            hidden_label: true,
                            object: false,
                            model: item["keyCode"],
                            itemText: item["itemText"] ? item["itemText"] : "_source.TenMuc",
                            itemValue: item["itemValue"] ? item["itemValue"] : "_source.MaMuc",
                            placeholder: item["placeholder"],
                            data: item["items"],
                            link: item["link"],
                            condition: item["condition"],
                            column: item["column"] ? item["column"] : ["MaMuc", "TenMuc", "type"],
                            sort: item["sort"],
                            advFilter: true
                        }'
                        v-model:data="customadv"
                        v-model='customadv[item.keyCode]'
                        @change_data="submitSearch($event, 'cbx')"
                      ></vuejx-autocomplete>

                      <vuejx-autocomplete 
                        v-if="item['fields'].toLocaleLowerCase() === 'autocomplete' && item['dynamicAPI']"
                        :dynamicAPI="true" :delay="800" :maxItem="20" :config='{
                        re_pull: customadv[item.keyCode],
                        placeholder: item.placeholder,
                        hidden_label: true,
                        model: item["keyCode"],
                        itemText: item["itemText"] ? item["itemText"] : "_source.TenMuc",
                        itemValue: item["itemValue"] ? item["itemValue"] : "_source.MaMuc",
                        object: false,
                        data: item["items"],
                        link: item["link"],
                        condition: item["condition"],
                        column: item["column"] ? item["column"] : ["MaMuc", "TenMuc", "type"],
                        sort: item["sort"],
                        advFilter: true,
                        dynamicText: item["dynamicText"]
                        }'
                        v-model:data="customadv"
                        v-model='customadv[item.keyCode]'
                        @change_data="submitSearch($event, 'cbx')">
                      </vuejx-autocomplete>
                      <input
                        class="w-full p-2 focus:outline-none focus:cursor-text w-full border border-gray-400 text-gray-700 focus:outline-none focus:bg-white focus:border-gray-400 rounded"
                        v-model='customadv[item.keyCode]'
                        v-if="item['fields'].toLocaleLowerCase() === 'input'"
                        v-on:keyup="submitSearch"
                      />
                      <div class="flex flex-wrap -mx-1" v-if="item['fields'].toLocaleLowerCase() === 'date_range'">
                        <vuejx-date-combobox class="flex-0 px-1 xs6 pr-3" v-model='customadv[item.keyCode + "_from"]' :data-value="customadv[item.keyCode + '_from']" v-model:data="customadv" :config="{
                            model: item.keyCode + '_from'
                          }">
                        </vuejx-date-combobox>
                        <vuejx-date-combobox class="flex-1" v-model='customadv[item.keyCode + "_to"]' :data-value="customadv[item.keyCode + '_to']" v-model:data="customadv" :config="{
                            model: item.keyCode + '_to'
                          }">
                        </vuejx-date-combobox>
                      </div>
                      <template v-else-if="item['fields'].toLocaleLowerCase() === 'date'">
                        <vuejx-date-combobox v-model='customadv[item.keyCode]' v-model:data="customadv" :config="{
                            model: item.keyCode
                          }">
                        </vuejx-date-combobox>
                      </template>
                    </v-flex>
                  </template>
                </v-layout>
              </template>
            </slot>
          </div>
        </header>
      </div>
    </div>
    <div class="searchAdvanced-content py-1">
      <v-flex class="xs12 px-0" v-if="searchAdvanced && !inlineFilter">
        <slot name="tfilter" v-bind:filter="customadv" v-bind:submitSearch="submitSearch">
          <template v-if="filter_options.length > 0">
            <v-layout wrap class="mb-1 -mx-2">
              <template  v-for="(item, index) in filter_options" :key="index">
                <v-flex 
                  v-if="renderData"
                  :class="[{'xs12 sm3 px-2': !item.class}, item.class]"
                >
                  <div class="block font-semibold leading-normal truncate">
                    {{ item.hasOwnProperty('keyName') ? item['keyName'] : item['keyCode'] }}
                  </div>
                  
                  <vuejx-autocomplete
                    class="vuejx_combobox_selection"
                    v-if="item['fields'].toLocaleLowerCase() === 'autocomplete' && !item['dynamicAPI']"
                    :config='{
                        re_pull: customadv[item.keyCode],
                        hidden_label: true,
                        object: false,
                        model: item["keyCode"],
                        itemText: item["itemText"] ? item["itemText"] : "_source.TenMuc",
                        itemValue: item["itemValue"] ? item["itemValue"] : "_source.MaMuc",
                        placeholder: item["placeholder"],
                        data: item["items"],
                        link: item["link"],
                        condition: item["condition"],
                        column: item["column"] ? item["column"] : ["MaMuc", "TenMuc", "type"],
                        sort: item["sort"],
                        advFilter: true
                    }'
                    v-model:data="customadv"
                    v-model='customadv[item.keyCode]'
                    @change_data="submitSearch($event, 'cbx')"
                  ></vuejx-autocomplete>

                  <vuejx-autocomplete 
                    v-if="item['fields'].toLocaleLowerCase() === 'autocomplete' && item['dynamicAPI']"
                    :dynamicAPI="true" :delay="800" :maxItem="20" :config='{
                    re_pull: customadv[item.keyCode],
                    placeholder: item.placeholder,
                    hidden_label: true,
                    model: item["keyCode"],
                    itemText: item["itemText"] ? item["itemText"] : "_source.TenMuc",
                    itemValue: item["itemValue"] ? item["itemValue"] : "_source.MaMuc",
                    object: false,
                    data: item["items"],
                    link: item["link"],
                    condition: item["condition"],
                    column: item["column"] ? item["column"] : ["MaMuc", "TenMuc", "type"],
                    sort: item["sort"],
                    advFilter: true,
                    dynamicText: item["dynamicText"]
                    }'
                    v-model:data="customadv"
                    v-model='customadv[item.keyCode]'
                    @change_data="submitSearch($event, 'cbx')">
                  </vuejx-autocomplete>
                  <input
                    class="w-full p-2 focus:outline-none focus:cursor-text w-full border border-gray-400 text-gray-700 focus:outline-none focus:bg-white focus:border-gray-400 rounded"
                    v-model='customadv[item.keyCode]'
                    v-if="item['fields'].toLocaleLowerCase() === 'input'"
                    v-on:keyup="submitSearch"
                  />
                  <div class="flex flex-wrap -mx-1" v-if="item['fields'].toLocaleLowerCase() === 'date_range'">
                    <vuejx-date-combobox class="flex-0 px-1 xs6 pr-3" v-model='customadv[item.keyCode + "_from"]' :data-value="customadv[item.keyCode + '_from']" v-model:data="customadv" :config="{
                        model: item.keyCode + '_from'
                      }">
                    </vuejx-date-combobox>
                    <vuejx-date-combobox class="flex-1" v-model='customadv[item.keyCode + "_to"]' :data-value="customadv[item.keyCode + '_to']" v-model:data="customadv" :config="{
                        model: item.keyCode + '_to'
                      }">
                    </vuejx-date-combobox>
                  </div>
                  <template v-else-if="item['fields'].toLocaleLowerCase() === 'date'">
                    <vuejx-date-combobox v-model='customadv[item.keyCode]' :data-value="customadv[item.keyCode]" v-model:data="customadv" :config="{
                        model: item.keyCode
                      }">
                    </vuejx-date-combobox>
                  </template>
                </v-flex>
              </template>
            </v-layout>
          </template>
        </slot>
      </v-flex>
    </div>
    <div class="top-content flex items-center bg-white rounded p-1 w-full" v-if="report">
      <div class="text-green-700 uppercase font-bold"> {{ report.title }}</div>
      <template v-if="renderLoginComp">
        <div class="bar mx-4"></div>
        <div class="text-gray-500 text-xs">{{ dataKyBaoCao.TenGoi }}</div>
        <header class="flex items-center ml-auto">
          <div class="flex w-full">
            
            <vuejx-autocomplete :dynamicAPI="true" :delay="800" :maxItem="20" :config="{
                placeholder: report.placeholder,
                hidden_label: true,
                model: 'MaMuc',
                object: true, itemText: '_source.TenMuc',
                itemValue: '_source.MaMuc',
                link: [{ db: report.db, collection: report.collection_ky, dynamicText: 'MaMuc, TenMuc.keyword, TenMuc'}],
                column: ['type', 'MaMuc', 'TenMuc', 'TuNgay', 'DenNgay', 'LoaiKyBaoCao', 'pdfData'],
                sort: [ {MaMuc: 'desc'} ],
                }" v-model="pickKy['MaMuc']" v-model:data="pickKy" :site="site" @change_data="pickKyBaoCao">
            </vuejx-autocomplete>

          </div>
          <div class="flex ml-auto flex-1 ext___filter_ml"><button aria-label="btn" class="ml-3" @click="exportDataBaoCao"><i class="mdi mdi-download-circle-outline text-green-700"></i></button></div>
        </header>
      </template>
    </div>
    `},VuejxDataReport={props:{query:{type:Array,default:()=>[]}},methods:{async init(){let e=this,t=`
              query search($token: String, 
          `,a={},r=" ",o={};for(let n of e.query){let l=Object.keys(n)[0],s="false";n[l].publicData&&(s=String(n[l].publicData)),t=t+" $body"+l+": JSON, $db"+l+": String, $collection"+l+": String",n[l].type==="data"?r=r+" "+l+": search(token: $token, body: $body"+l+", db: $db"+l+", collection: $collection"+l+" ), ":r=r+" "+l+": aggs(token: $token, body: $body"+l+", db: $db"+l+", collection: $collection"+l+', publicData: "'+s+'" ), ',n[l].report?o[l]=!0:o[l]=!1,a["body"+l]=n[l].body,a["db"+l]=localStorage.getItem("db"),a["collection"+l]=n[l].collection}t=t+" ){ "+r+" } ",await window.Vue.$root.dispatch("vuejx_manager/graphqlQuery",{query:t,variables:a}).then(n=>{const l=JSON.parse(JSON.stringify(n));let s={};for(let u in n)if(o[u]&&n[u].aggregations!==void 0&&n[u].aggregations!==null&&n[u].aggregations.report!==void 0&&n[u].aggregations.report!==null&&n[u].aggregations.report.aggregations!==void 0&&n[u].aggregations.report.aggregations!==null&&n[u].aggregations.report.aggregations.buckets!==void 0&&n[u].aggregations.report.aggregations.buckets!==null){let c=n[u].aggregations.report.doc_count,d={},p=0;for(let h of n[u].aggregations.report.aggregations.buckets)Object.prototype.hasOwnProperty.call(h,"ext")?d[h.key]=h.ext.value:d[h.key]=h.doc_count,p=p+h.doc_count;s[u]=c-p,n[u]=d}e.$emit("report-unknown",s),e.$emit("report",n),e.$emit("report_raw",l)}).catch(n=>{})}},mounted:function(){let e=this;e.$nextTick(function(){setTimeout(async()=>{await e.init()},0)})},template:"<span></span>"},VuejxDone={mounted:function(){let e=this;e.$nextTick(function(){e.$emit("pingDone","OK")})},template:"<span></span>"},MTQuanTrac={props:{ChiTieuQuanTrac:{type:Array,default:()=>[]},collection:{type:String,default:()=>""},db:{type:String,default:()=>localStorage.getItem("db")},mode:{type:String,default:()=>"dinh_ky"},data:{type:Object,default:()=>null},dataRef:{type:Object,default:()=>null},BieuMau:{type:String,default:()=>""},NamQuanTrac:{type:String,default:()=>new Date().getFullYear()}},mounted:function(){let e=this;e.$nextTick(function(){var t,a,r,o,n;if(e.data&&(e.vuejxData=e.data),e.vuejxData=Q(Q({},e.dataTieuChi),e.vuejxData),e.idTram=window.Vue.router.currentRoute.value.query._id,e.vuejxData.TramQuanTrac={_id:e.idTram,BieuMau:e.BieuMau},e.dataRef&&(e.vuejxData.TramQuanTrac=Q(Q({},e.vuejxData.TramQuanTrac),e.dataRef)),Array.isArray(e.condition)&&e.condition.length==0&&(e.condition=[{match:{"TramQuanTrac._id":e.idTram}},{match:{"TramQuanTrac.BieuMau":e.BieuMau}}]),console.log("ChiTieuQuanTrac vm.vuejxDatavm.vuejxData",e.vuejxData,e.condition),e.table_config=[{title:"Th\u1EDDi gian quan tr\u1EAFc",class:"text-center",date:!0,value:"_source.DotQuanTrac"}],e.renderTable=!1,e.renderF=!1,Array.isArray(e.ChiTieuQuanTrac)){for(const l of e.ChiTieuQuanTrac)e.formConfig.form.push({model:"KetQuaQuanTrac."+String((t=l._source)==null?void 0:t.TenMuc).trim(),label:String((a=l._source)==null?void 0:a.TenMuc).trim()+"/QCVN",type:"textQCVN"}),e.table_config.push({action:!0,title:String((r=l._source)==null?void 0:r.TenMuc).trim()+"/QCVN",class:"text-center",value:"_source.KetQuaQuanTrac."+String((o=l._source)==null?void 0:o.TenMuc).trim(),valueFix:String((n=l._source)==null?void 0:n.TenMuc).trim(),valueFixObject:"_source.KetQuaQuanTrac"});e.table_config.push({action:!0,title:"",class:"text-center",model:"ThaoTac",value:"_source.ThaoTac"})}console.log("vm.table_config",e.table_config),e.renderF=!0,e.renderTable=!0})},methods:{afterSubmit(){let e=this;e.vuejxData={},e.renderTable=!1,setTimeout(()=>{e.renderTable=!0},400)},async removeKQ(e,t){let a=this;if(confirm("B\u1EA1n c\xF3 mu\u1ED1n xo\xE1 k\u1EBFt qu\u1EA3 n\xE0y.")==!0){a.renderTable=!1;let o={_id:e._id,storage:"trash"},n="vuejx_manager/userUpdateById",l="NEW";await window.VueJX.dispatch(n,{db:localStorage.getItem("db"),collection:a.collection,body:o,actionCode:l}).then(s=>{window.Vue.toastr.success("Th\xE0nh c\xF4ng.")}).catch(s=>{window.Vue.toastr.error("Error.")}),setTimeout(()=>{a.renderTable=!0},200)}}},watch:{vuejxData:{handler(e){let t={KetQuaQuanTrac:e};const a=Q(Q(Q({},e),window.dotize.dotize.convert(e)),window.dotize.dotize.convert(t));this.$emit("changeData",a)},deep:!0}},data:()=>({idTram:"",curpage:"",condition:[],formConfig:{type:0,form:[]},vuejxData:{thiet_ke:{},nhan_duoc:{},loi_bat_thuong:{},trung_binh_1h:{},gia_tri_quan_trac:{},so_ngay_trung_binh_1h_vuot_qcvn:{},gia_tri_quan_trac_qcvn:{}},table_config:[],renderF:!1,renderTable:!1,dataTieuChi:{thiet_ke:{},nhan_duoc:{},loi_bat_thuong:{},trung_binh_1h:{},gia_tri_quan_trac:{},so_ngay_trung_binh_1h_vuot_qcvn:{},gia_tri_quan_trac_qcvn:{}}}),template:`<div class="vuejx__table" v-if="renderF">
        <div class="flex border-b mb-4">
            <ol class="inline-flex items-center space-x-1 md:space-x-3 flex-1 breadcrumb breadcrumb_crud pl-0" style="padding-left: 0;"><li aria-current="page"><div class="flex items-center"><span class="text-sm font-medium text-gray-400 md:ml-2 dark:text-gray-500"><div class="top-content flex items-center bg-white rounded py-1"><div class="text-green-700 font-bold">C\u1EADp nh\u1EADt k\u1EBFt qu\u1EA3 quan tr\u1EAFc</div></div></span></div></li></ol>
        </div>
        <template v-if="mode == 'dinh_ky'">
            <vuejx-screen v-if="formConfig && formConfig.form"
                grid_class="grid grid-cols-4 gap-2"
                :collection="collection"
                :config="formConfig"
                v-model="vuejxData"
                :customRedirect="true"
                @afterSubmit="afterSubmit"
                :data_default="{
                    NamQuanTrac: NamQuanTrac,
                    TramQuanTrac: vuejxData['TramQuanTrac']
                }"
            >
                <template v-slot:action="{ submitData, dataFormX}">
                    <div class="grid grid-cols-4 gap-2 mt-4">
                        <div class="col-span-2"></div>
                        <div>
                            <vuejx-date-combobox v-model="dataFormX['DotQuanTrac']"
                            :data-value="dataFormX['DotQuanTrac']" 
                            :data="dataFormX" :config='{ "model": "DotQuanTrac", "label": "Th\u1EDDi gian quan tr\u1EAFc", "type": "date", "label_class": "leading-tight pb-1 truncate" }'
                            >
                            </vuejx-date-combobox>
                        </div>
                        <div class="hidden">
                            <div class="block font-semibold leading-tight pb-1 truncate">
                                N\u0103m quan tr\u1EAFc
                            </div>
                            <input v-model="dataFormX['NamQuanTrac']"
                                class="bg-gray-200 text-gray-700 p-2 focus:cursor-text w-full border border-gray-200 focus:outline-none focus:bg-white focus:border-gray-400 rounded"
                                type="text" :placeholder="'N\u0103m quan tr\u1EAFc...'"
                            />
                        </div>
                        <div class="relative"><button @click="submitData" class=" w-full leading-none font-semibold bg-blue-700 text-white rounded px-4 py-2 focus:outline-none absolute" tabindex="-1" style="height: 32px;bottom: 1px;"> Th\xEAm k\u1EBFt qu\u1EA3 quan tr\u1EAFc </button></div>
                    </div>
                </template>
            </vuejx-screen>
            <template v-if="renderTable">
                <vuejx-table-simple-khcn class="mt-4" :noHeader="true" :pagesize="15" :db="db" :collection="collection"
                    :condition="condition" :table_config="table_config">
                    <template v-slot:cell_ThaoTac="{ celldata, index }">
                        <button @click="removeKQ(celldata, index)">
                            <i class="mdi mdi-delete text-red-700 cursor-pointer mx-1"></i>
                        </button>
                    </template>
                </vuejx-table-simple-khcn>
            </template>
        </template>
        <template v-else>
            <table class="border-b w-full bg-white">
                <thead class="w-full">
                    <tr>
                    <th width="50">STT</th>
                    <th class="text-center px-2">Ch\u1EC9 ti\xEAu quan tr\u1EAFc</th>
                    <th class="text-center px-2">Gi\xE1 tr\u1ECB quan tr\u1EAFc</th>
                    <th class="text-center px-2">Gi\xE1 tr\u1ECB QCVN</th>
                    <th class="text-center px-2">S\u1ED1 gi\xE1 tr\u1ECB quan tr\u1EAFc theo thi\u1EBFt k\u1EBF</th>
                    <th class="text-center px-2">S\u1ED1 gi\xE1 tr\u1ECB quan tr\u1EAFc nh\u1EADn \u0111\u01B0\u1EE3c</th>
                    <th class="text-center px-2">S\u1ED1 gi\xE1 tr\u1ECB quan tr\u1EAFc l\u1ED7i/b\u1EA5t th\u01B0\u1EDDng</th>
                    <th class="text-center px-2">S\u1ED1 ng\xE0y c\xF3 gi\xE1 tr\u1ECB trung b\xECnh 1 gi\u1EDD v\u01B0\u1EE3t QCVN</th>
                    <th class="text-center px-2">S\u1ED1 gi\xE1 tr\u1ECB trung b\xECnh 1 gi\u1EDD v\u01B0\u1EE3t QCVN</th>
                    </tr>
                </thead>
                <tbody class="border-b w-full bg-white">
                    <tr v-for="(item, index) in formConfig.form" v-bind:key="index">
                        <td width="50" align="center" class="">{{index + 1}}</td>
                        <td class="text-center">
                            <span>{{ item.label }}</span>
                        </td>
                        <td class="text-center  px-2">
                            <input v-model="vuejxData['gia_tri_quan_trac'][String(item.model).substring(String(item.model).indexOf('.') + 1)]" class="p-2 ocus:cursor-text w-full border border-gray-200 focus:outline-none focus:bg-white focus:border-gray-400 rounded bg-gray-200 text-gray-700" type="text">
                        </td>
                        <td class="text-center px-2">
                            <input v-model="vuejxData['gia_tri_quan_trac_qcvn'][String(item.model).substring(String(item.model).indexOf('.') + 1)]" class="p-2 ocus:cursor-text w-full border border-gray-200 focus:outline-none focus:bg-white focus:border-gray-400 rounded bg-gray-200 text-gray-700" type="text">
                        </td>
                        <td class="text-center px-2">
                            <input v-model="vuejxData['trung_binh_1h'][String(item.model).substring(String(item.model).indexOf('.') + 1)]" class="p-2 ocus:cursor-text w-full border border-gray-200 focus:outline-none focus:bg-white focus:border-gray-400 rounded bg-gray-200 text-gray-700" type="text">
                        </td>
                        <td class="text-center  px-2">
                            <input v-model="vuejxData['thiet_ke'][String(item.model).substring(String(item.model).indexOf('.') + 1)]" class="p-2 ocus:cursor-text w-full border border-gray-200 focus:outline-none focus:bg-white focus:border-gray-400 rounded bg-gray-200 text-gray-700" type="text">
                        </td>
                        <td class="text-center  px-2">
                            <input v-model="vuejxData['nhan_duoc'][String(item.model).substring(String(item.model).indexOf('.') + 1)]" class="p-2 ocus:cursor-text w-full border border-gray-200 focus:outline-none focus:bg-white focus:border-gray-400 rounded bg-gray-200 text-gray-700" type="text">   
                        </td>
                        <td class="text-center  px-2">
                            <input v-model="vuejxData['loi_bat_thuong'][String(item.model).substring(String(item.model).indexOf('.') + 1)]" class="p-2 ocus:cursor-text w-full border border-gray-200 focus:outline-none focus:bg-white focus:border-gray-400 rounded bg-gray-200 text-gray-700" type="text">
                        </td>
                        <td class="text-center  px-2">
                            <input v-model="vuejxData['so_ngay_trung_binh_1h_vuot_qcvn'][String(item.model).substring(String(item.model).indexOf('.') + 1)]" class="p-2 ocus:cursor-text w-full border border-gray-200 focus:outline-none focus:bg-white focus:border-gray-400 rounded bg-gray-200 text-gray-700" type="text">
                        </td>
                    </tr>
                </tbody>
            </table>
        </template>
    </div>`},MTPreview={props:{group:{type:String,default:()=>""},phuluc:{type:String,default:()=>""},userCreate:{type:String,default:()=>""},all_page:{type:Boolean,default:()=>!1}},mounted:function(){let e=this;e.$nextTick(function(){e.donePreview=!1,localStorage.getItem("user")&&(e.user=JSON.parse(localStorage.getItem("user"))),setTimeout(async()=>{let t=[{match:{group:e.group}}];e.phuluc&&t.push({match:{phuluc:e.phuluc}});const a=await window.VueJX.search(e,"vuejx_page_screen",[],[],t,["pageConfig","shortName"],[{order:"asc"}],null,100,!1,100,null);e.preview_cfg=a.dataResults,console.log("vm.preview_cfg",e.preview_cfg,e.group,e.phuluc);for(let r of e.preview_cfg)if(console.log("el",r),r&&r._source&&r._source.pageConfig){let o={pageConfig:r._source.pageConfig,shortName:"preview___component___"+r._source.shortName};await window.buildPageView(o)}e.donePreview=!0,setTimeout(()=>{e.$emit("reportDone","OK")},300)},0)})},methods:{sampleData(){},pullDataByYear(){},pullDataByDate(){},async dataReport(e){let t=`
             query search($token: String, 
         `,a={},r=" ",o={};for(let l of e){let s=Object.keys(l)[0],u="false";l[s].publicData&&(u=String(l[s].publicData)),t=t+" $body"+s+": JSON, $db"+s+": String, $collection"+s+": String",l[s].type==="data"?r=r+" "+s+": search(token: $token, body: $body"+s+", db: $db"+s+", collection: $collection"+s+" ), ":r=r+" "+s+": aggs(token: $token, body: $body"+s+", db: $db"+s+", collection: $collection"+s+', publicData: "'+u+'" ), ',l[s].report?o[s]=!0:o[s]=!1,a["body"+s]=l[s].body,a["db"+s]=localStorage.getItem("db"),a["collection"+s]=l[s].collection}t=t+" ){ "+r+" } ",console.log("aggsQueryaggsQueryaggsQueryaggsQuery",t,a);let n=null;return await window.VueJX.dispatch("vuejx_manager/graphqlQuery",{query:t,variables:a}).then(l=>{n=l}).catch(l=>{}),n}},data:()=>({preview_cfg:[],donePreview:!1,user:{}}),template:`
    <div class="preview___wrap" v-if="donePreview">
        <component v-for="(item, index) in preview_cfg" v-bind:is="'csdl_baocaodoanhnghiep___csdl_mt___preview___component___' + item._source.shortName"></component>
    </div>
    `},VueJXLeafletWrap={props:{item:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},mode:{type:String,default:()=>"editor"}},methods:{async init(e){let t=this;window.L||await window.sleep(200),window.L||await window.sleep(200),t.dataForm=Q(Q({},t.dataForm),t.data),console.log("vm.dataFormvm.dataForm",t.dataForm),t.map&&(t.map.off(),t.map.remove(),t.doneMap())},async doneMap(){let e=this;try{var t;e.map=window.L.map("mapContainer").setView([e.dataForm[e.item.model+".KinhDo"]?e.dataForm[e.item.model+".KinhDo"]:21.0294498,e.dataForm[e.item.model+".ViDo"]?e.dataForm[e.item.model+".ViDo"]:105.8544441],e.zoom);var a=window.L.tileLayer(e.url,{zoom:e.zoom,maxZoom:e.maxZoom,attribution:e.attribution}).addTo(e.map);e.dataForm[e.item.model+".KinhDo"]&&e.dataForm[e.item.model+".ViDo"]&&(t=window.L.marker([e.dataForm[e.item.model+".KinhDo"],e.dataForm[e.item.model+".ViDo"]],{riseOnHover:!0,draggable:!0}),t.addTo(e.map)),e.provider=new window.GeoSearch.OpenStreetMapProvider,e.map.on("click",function(r){var o,n;e.dataForm[e.item.model+".KinhDo"]=(o=r==null?void 0:r.latlng)==null?void 0:o.lat,e.dataForm[e.item.model+".ViDo"]=(n=r==null?void 0:r.latlng)==null?void 0:n.lng,typeof t=="object"?(t.setLatLng(r.latlng),e.$emit("doneMapData",e.dataForm)):(t=window.L.marker(r.latlng,{riseOnHover:!0,draggable:!0}),t.addTo(e.map),t.on("drag",function(l){var s,u;e.dataForm[e.item.model+".KinhDo"]=(s=l==null?void 0:l.latlng)==null?void 0:s.lat,e.dataForm[e.item.model+".ViDo"]=(u=l==null?void 0:l.latlng)==null?void 0:u.lng,e.$emit("doneMapData",e.dataForm)}))})}catch{e.dataForm[e.item.model+".KinhDo"]=null,e.dataForm[e.item.model+".ViDo"]=null}},debounceSearch(e){let t=this;t.searchDiaDiem=null,clearTimeout(t.debounce),t.debounce=setTimeout(async()=>{t.searchDiaDiem=e.target.value,t.resultsDiaDiem=await t.provider.search({query:String(t.searchDiaDiem).trim()})},300)},dataChange(){let e=this;e.map.off(),e.map.remove(),e.doneMap(),e.$emit("doneMapData",e.dataForm)},pickLocation(e){let t=this;t.dataForm[t.item.model+".KinhDo"]=e==null?void 0:e.y,t.dataForm[t.item.model+".ViDo"]=e==null?void 0:e.x,t.searchDiaDiem="",t.resultsDiaDiem=[],t.map.off(),t.map.remove(),t.doneMap(),t.$emit("doneMapData",t.dataForm)}},mounted:function(){let e=this;e.$nextTick(function(){e.renderData=!1,setTimeout(async()=>{await e.init(),e.renderData=!0},0)})},watch:{$route:async function(e,t){let a=this;a.renderData=!1,await a.init(),a.renderData=!0}},data:()=>({zoom:16,maxZoom:20,renderData:!1,dataForm:{},debounce:null,searchDiaDiem:"",resultsDiaDiem:[],provider:null,url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'<a target="_blank" href="https://vmap.vn/">vmap.vn</a>'}),template:`
    <vuejx-maps @done="doneMap">
        <div v-if="mode == 'editor'" class="grid grid-cols-4 gap-2 mb-4 px-0">
            <div v-if="item" :class="'vuejx_comp___kinhdo' + item['model']" class="col-span-1">
                <div class="block font-semibold leading-tight pb-1 truncate">
                    {{ item['label_kinhdo'] }}
                </div>
                <input v-model="dataForm[item.model + '.KinhDo']" class="p-2 ocus:cursor-text w-full border border-gray-200 focus:outline-none focus:bg-white focus:border-gray-400 rounded" :class="{'bg-gray-500 text-white pointer-events-none': item.disable, 'bg-gray-200 text-gray-700': !item.disable}" type="text" :placeholder="item['placeholder_kinhdo'] ? item['placeholder_kinhdo'] : 'Kinh \u0111\u1ED9...'" :disabled="item.disable"
                    @change="dataChange(item.model + '.KinhDo')"
                />
            </div>
            <div v-if="item" :class="'vuejx_comp___kinhdo' + item['model']" class="col-span-1">
                <div class="block font-semibold leading-tight pb-1 truncate">
                    {{ item['label_vido'] }}
                </div>
                <input v-model="dataForm[item.model + '.ViDo']" class="p-2 ocus:cursor-text w-full border border-gray-200 focus:outline-none focus:bg-white focus:border-gray-400 rounded" :class="{'bg-gray-500 text-white pointer-events-none': item.disable, 'bg-gray-200 text-gray-700': !item.disable}" type="text" :placeholder="item['placeholder_vido'] ? item['placeholder_vido'] : 'V\u0129 \u0111\u1ED9...'" :disabled="item.disable"
                    @change="dataChange(item.model + '.ViDo')"
                />
            </div>
            <div v-if="item" :class="'vuejx_comp___map_search' + item['model']" class="col-span-2 relative">
                <div class="block font-semibold leading-tight pb-1 truncate">
                    T\xECm ki\u1EBFm \u0111\u1ECBa ch\u1EC9...
                </div>
                <input class="p-2 ocus:cursor-text w-full border border-gray-200 focus:outline-none focus:bg-white focus:border-gray-400 rounded" :class="{'bg-gray-200 text-gray-700': !item.disable}" type="text" :placeholder="'T\xECm ki\u1EBFm...'"
                    @input="debounceSearch"
                />
                <div class="dropdown" :class="{'leaflet___search': resultsDiaDiem && resultsDiaDiem.length > 0}">
                    <div v-for="(itemSearch, index) in resultsDiaDiem">
                        <button @click="pickLocation(itemSearch)"
                        aria-label="btn" 
                        class="dropdown-child" style="word-break: break-word;white-space: break-spaces;font-weight: normal;">
                            {{ itemSearch.label }}
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div id="mapContainer" style="height: 600px; width:100%; overflow: hidden;"></div>
    </vuejx-maps>
    `},tableSimpleSelect={props:{table_class:{type:String,default:"border-b w-full bg-white"},table_view:{type:String,default:""},title_remove:{type:String,default:"xo\xE1"},custom_table:{type:Boolean,default:()=>!1},remove:{type:Boolean,default:()=>!1},crud:{type:Boolean,default:()=>!1},import_data:{type:Boolean,default:()=>!1},export_data:{type:Boolean,default:()=>!1},export_data_label:{type:String,default:()=>"Export"},noHeader:{type:Boolean,default:()=>!1},noRouterr:{type:Boolean,default:()=>!1},storage:{type:Object,default:()=>null},widthSTT:{type:Number,default:()=>50},filter_options:{type:Array,default:()=>[]},table_config:{type:Array,default:()=>[]},title:{type:String,default:""},detailPage:{type:String,default:""},employee__table:{type:Boolean,default:!1},idtable:{type:String,default:"table__to__export"},db:{type:String,default:()=>localStorage.getItem("db")},collection:{type:String,default:()=>""},site:{type:String,default:()=>""},includes:{type:Array,default:()=>[]},sort:{type:Array,default:()=>[]},pagesize:{type:Number,default:()=>15},paging:{type:Boolean,default:()=>!0},condition:{type:Array,default:()=>[]},queryFilter:{type:Array,default:()=>[]},keywords:{type:Array,default:()=>[]},queryParam:{type:Boolean,default:()=>!0},empty:{type:Boolean,default:()=>!1},skeleton:{type:Object,default:()=>({th:[],td:[]})},exportTemplate:{type:String,default:""},exportTemplateTitle:{type:String,default:""},aggs_ext:{type:String,default:""},aggs_ext_keyAggs:{type:String,default:""},placeholderKeyowrds:{type:String,default:"T\xECm ki\u1EBFm ..."},treeParentKey:{type:String,default:"LoaiChiTieuRoot"},state_query:{type:Array,default:null},inlineFilter:{type:Boolean,default:()=>!1},inlineSearch:{type:Boolean,default:()=>!1},modelName:{type:String,default:""},realTotalPick:{type:Number,default:()=>0}},methods:{async init(e){let t=this;t.renderData=!1,t.rows=t.pagesize;let a=window.Vue.router.currentRoute.value.query,r=null;if(e){r={};for(const n of e)n.key==="_s_n"&&(r.sortNext=n.value),n.key==="_s_b"&&(r.sortBack=n.value),n.key==="_pagging"&&(r.paggingType=n.value),n.key==="_page"&&(r.page=n.value),n.key==="_sizeLast"&&(r.sizeLast=n.value>0?n.value:t.pagesize,r.size=n.value>0?n.value:t.pagesize);r.size||(r.size=t.pagesize,r.sizeLast=t.pagesize)}if(a.adv_filter?t.adv_filter=a.adv_filter:t.adv_filter=!1,t.paging||(t.rows=t.pagesize,t.page=1),t.aggReport={},Array.isArray(t.keywords)&&t.keywords.length==0)for(const n of t.table_config)t.keywords.push(String(n.value).replace("_source.","")+".raw");t.noRouterr&&!r&&(r={page:1,paggingType:"first",size:t.pagesize,sizeLast:t.pagesize,sortBack:"",sortNext:""});const o=await window.VueJX.search(t,t.collection,t.keywords,t.queryFilter,t.condition,t.includes,t.sort,t.storage,t.rows,t.queryParam,t.sizeLast,r,t.inlineSearchQuery);t.dataResults=o.dataResults,t.dataResults&&t.dataResults.length<t.rows?t.pages=Math.floor(o.totalRecord/t.rows)+1:t.pages=o.pages,t.page=o.page,t.totalRecord=o.totalRecord,t.sortNext=o.sortNext,t.sortBack=o.sortBack,t.rows=o.size,t.renderData=!0,t.bodyQuery=o.bodyQuery},dateView(e,t,a,r){return window.Vue.dateView(e,t,a,r)},objectView(e,t,a){return window.Vue.objectView(e,t,a)},toDetail(e){if(this.detailPage&&this.detailPage.indexOf("?")!=-1){let[t,a]=this.detailPage.split("?"),r=[{key:"_id",value:e||"NULL"}];if(a&&a.indexOf("&")!=-1){let o=a.split("&");for(let n of o)if(n&&n.indexOf("=")!=-1){const[l,s]=n.split("=");r.push({key:l,value:s})}else r.push({key:n,value:""})}window.Vue.redirect(r,!1,t)}else window.Vue.redirect([{key:"_id",value:e||"NULL"}],!1,this.detailPage)},async paggingData(e){let t=this,a=e,r=[];t.sizeLast=t.rows;const o=new URLSearchParams(window.location.href);if(e==="next"?(t.page=parseInt(t.page)+1,t.page>=t.pages&&(t.page=t.pages,t.sizeLast=t.totalRecord-t.rows*(t.page-1)),Array.isArray(t.sortNext)&&t.sortNext.length>0&&(t.sortBack=t.sortNext)):e==="prev"?(t.page=parseInt(t.page)-1,o.get("_s_b")&&(t.sortNext=JSON.parse(decodeURIComponent(o.get("_s_b"))))):e==="first"?t.page=1:e==="last"&&(t.page=t.pages,t.sizeLast=t.totalRecord-t.rows*(t.page-1)),r.push({key:"t",value:new Date().getTime()}),t.page<=1?(t.page=1,a="first",r.push({key:"_s_n",value:""}),r.push({key:"_s_b",value:""})):t.page<=t.pages&&(Array.isArray(t.sortNext)&&t.sortNext.length>0&&r.push({key:"_s_n",value:encodeURIComponent(JSON.stringify(t.sortNext))}),Array.isArray(t.sortBack)&&t.sortBack.length>0&&r.push({key:"_s_b",value:encodeURIComponent(JSON.stringify(t.sortBack))})),r.push({key:"_pagging",value:a}),r.push({key:"_rows",value:t.rows}),t.sizeLast!=t.rows&&r.push({key:"_sizeLast",value:t.sizeLast}),e==="rows"?(r.push({key:"_page",value:1}),r.push({key:"_rows",value:t.rows})):r.push({key:"_page",value:t.page}),t.noRouterr)t.renderData=!1,await t.init(r),t.renderData=!0;else if(typeof window.history.pushState!="undefined"){let n="/#"+window.Vue.router.currentRoute.value.path+"?t="+new Date().getTime();for(const s of r)s.key!="t"&&(n+="&"+s.key+"="+s.value);const l=window.Vue.router.currentRoute.value.query;for(const s in l)["_page","t","_s_n","_s_b"].indexOf(s)==-1&&(n+="&"+s+"="+l[s]);t.inlineSearchQuery?(window.history.pushState({},"",n),await t.init()):(t.renderData=!1,await t.init(r),t.renderData=!0)}else t.inlineSearchQuery?(t.renderData=!1,await t.init(r),t.renderData=!0):window.Vue.redirect(r)},async inlineSearchAction(e){let t=this;t.inlineSearchQuery={};let a={keywords:e.keywords,customadv:{}};for(let r of t.filter_options)e.customadv&&typeof e.customadv=="object"&&e.customadv[r.keyCode]&&(a.customadv[r.keyCode]=e.customadv[r.keyCode]);a&&a.keywords?t.inlineSearchQuery=H(Q({},t.inlineSearchQuery),{keywords:a.keywords}):delete t.inlineSearchQuery.keywords,a&&a.customadv&&Object.keys(a.customadv).length>0&&(a.keywords.trim()==""&&delete a.keywords,delete a.customadv.menu,delete a.customadv._view,delete a.customadv._id,Object.keys(a.customadv).length>0&&(t.inlineSearchQuery=Q(Q({},t.inlineSearchQuery),a.customadv))),t.inlineSearchQuery&&Object.keys(t.inlineSearchQuery).length>0?(t.paggingData("first"),t.$emit("inlineSearchAction",{modelName:t.modelName,state:!0})):(t.inlineSearchQuery=null,t.$emit("inlineSearchAction",{modelName:t.modelName,state:!1}))}},watch:{$route:async function(e,t){let a=window.VueJX.page();if(t.params.page==a){let r=this;r.renderData=!1,r.renderData=!0}}},mounted:function(){let e=this;e.$nextTick(function(){e.renderData=!1,setTimeout(async()=>{e.renderData=!0},0)})},data:()=>({itemxxx:{},renderData:!1,site:localStorage.getItem("site"),rows:15,sizeLast:15,dataResults:[],dataResultsChild:{},page:1,pages:1,totalRecord:0,sortBack:[],sortNext:[],paggingType:"",indexTree:"",keyTree:"",checkAll:!1,ids:[],adv_filter:!1,bodyQuery:null,aggReport:{},inlineSearchQuery:{}}),template:`
    <div v-if="custom_table"><slot name="custom_view" v-bind:data="dataResults"></slot></div>
    <div class="vuejx__table" v-else>
        <div class="top-content flex" v-if="!noHeader">
            <qlvt-filter @inlineSearchAction="inlineSearchAction" :inlineSearch="inlineSearch" :inlineFilter="inlineFilter" :state_query="state_query" :placeholderKeyowrds="placeholderKeyowrds" class=" flex-1" ref="filter" :filter_options="filter_options">
                <template v-slot:filter_button="{ submitSearch, showSearchAdvanced, clearSearch }">
                    <slot name="ext_btn"> 
                        <button aria-label="btn" v-if="!inlineFilter && filter_options.length > 0" class=" filter___adv font-semibold rounded border border-blue-700 text-blue-700 px-3 leading-none focus:outline-none hover:bg-blue-700 hover:text-white ml-2 whitespace-no-wrap" tabindex="-1" @click="showSearchAdvanced()">{{ adv_filter ? 'Xo\xE1 b\u1ED9 l\u1ECDc' : 'N\xE2ng cao'}}</button>
                        <button aria-label="btn" v-if="crud" class="filter___add_cms whitespace-no-wrap ml-2 font-semibold rounded border border-blue-700 bg-blue-700 text-white px-3 pb-1 leading-none focus:outline-none hover:bg-white hover:text-blue-700" tabindex="-1" @click="toDetail('')">Th\xEAm m\u1EDBi</button>
                        <button aria-label="btn" v-if="inlineSearchQuery && (inlineSearchQuery.keywords || inlineSearchQuery.customadv)" class="filter___add_cms whitespace-no-wrap ml-2 font-semibold rounded border border-blue-700 bg-blue-700 text-white px-3 pb-1 leading-none focus:outline-none hover:bg-white hover:text-blue-700" tabindex="-1" @click="clearSearch">Xo\xE1 t\xECm ki\u1EBFm</button>
                    </slot>
                    <slot name="ext_btn_2"> 
                    </slot>
                    <button v-if="import_data" aria-label="btn" class=" filter___import whitespace-no-wrap ml-2 font-semibold rounded border border-blue-700 text-blue-700 px-3 pb-1 leading-none focus:outline-none hover:bg-white hover:text-blue-700" tabindex="-1">
                        <label for="formFile">Import</label>
                        <input class="hidden" type="file" id="formFile" @change="doImport">
                    </button>
                    <button v-if="export_data" aria-label="btn" class=" filter___import whitespace-no-wrap ml-2 font-semibold rounded border border-blue-700 text-blue-700 px-3 pb-1 leading-none focus:outline-none hover:bg-white hover:text-blue-700" tabindex="-1" @click="doExport">{{ export_data_label }}</button>
                </template>
            </qlvt-filter>
        </div>
        <button aria-label="btn" v-if="ids.length > 0" @click="doRemove" class="whitespace-no-wrap mb-2 font-semibold rounded border border-red-700 text-red-700 p-2 leading-none focus:outline-none hover:bg-red-200 hover:text-gray-900 px-3" tabindex="-1">
            X\xE1c nh\u1EADn {{title_remove}} {{ ids.length }} b\u1EA3n ghi.
        </button>
        <slot name="button_ext"></slot>
        <slot name="report_ext">
        <table v-if="!renderData" class="border-b w-full bg-white"> <thead class="w-full bg-white"> <slot name="thead"> <tr> <th width="50">STT</th> <th v-for="(item, index) of table_config" v-bind:key="index" :width="item.width" :class="item.class"> {{ item.title }} </th> </tr> </slot> </thead> <tbody class="w-full bg-white p-4"> <tr> <td colspan="100"> <p class="loading___table"> Ch\u1EDD trong gi\xE2y l\xE1t ... </p> </td> </tr> </tbody></table>
        <table :id="idtable" v-else :class="table_class">
        <thead :class="{ 'w-full': !employee__table }">
            <slot name="thead_title"> </slot>
            <slot name="thead"> <tr> <th v-if="table_view == 'tree'" width="40"></th><th v-if="remove" width="40" @click="pickAll">
                <i class="mdi mdi-checkbox-blank-outline " v-if="!checkAll"></i>
                <i class="mdi mdi-checkbox-marked " v-else></i>
            </th> <th width="50">STT</th> <th v-for="(item, index) of table_config" v-bind:key="index" :width="item.width" :class="item.class"> {{ item.title }} </th> </tr> </slot>
        </thead>
        <tbody class="border-b w-full bg-white"> <slot name="tbody" v-bind:page="rows" v-bind:data="dataResults"> <slot name="tbody_title"></slot>
            <template v-for="(item, index) in dataResults">
                <tr v-bind:key="index">
                    <td :width="widthSTT" align="center"
                    >{{ page * rows - rows + index + 1 }} </td>
                    <td v-for="(itemCf, indexx) of table_config" v-bind:key="indexx" :width="itemCf.width" 
                        :class="itemCf.class"    
                        @click="itemCf.action ? '' : toDetail(item._id)" >
                        <slot :name="'cell_' + indexx" v-bind:celldata="item">
                        </slot>
                    </td>
                </tr> 
            </template>
            </slot>
        </tbody>
        </table>
        <slot name="pagging">
        <header v-if="renderData && paging" class="bg-white flex items-center py-1 pr-4"><div class="flex"><button class="font-semibold text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1"  @click="paggingData('first')"  aria-label="first"> <i class="mdi" :class="{'mdi-chevron-double-left': !loadingAction}"></i> </button><button class="font-semibold text-blue-700 pl-0 pr-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('prev')" aria-label="back" > <i class="mdi" :class="{'mdi-chevron-left': !loadingAction}"></i> </button><button class="text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary btn__pagging" tabindex="-1" > Trang {{ page }} / {{ pages }} </button><button v-if="page < pages" class="font-semibold text-blue-700 pl-2 pr-0 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('next')" aria-label="next" > <i class="mdi" :class="{'mdi-chevron-right': !loadingAction}"></i> </button><button v-if="page < pages" class="font-semibold text-blue-700 px-2 py-2 leading-none focus:outline-none hover:text-primary" tabindex="-1" @click="paggingData('last')" aria-label="last"><i class="mdi" :class="{'mdi-chevron-double-right': !loadingAction}"></i> </button><button class="focus:outline-none btn__pagging_info" tabindex="-1"> <div> <h4 class="font-semibold"> <span>T\u1ED5ng s\u1ED1 b\u1EA3n ghi: </span> <span class='text-blue-700'>{{totalRecord}}</span> </h4> </div> </button></div> <div class="ml-auto"> 
            <span>T\u1ED5ng s\u1ED1 b\u1EA3n ghi \u0111\xE3 ch\u1ECDn: <span class="font-bold"><slot name="total_pick">{{ realTotalPick }}</slot></span></span>
        </div></header>
        </slot></slot>
    </div>
    `},tableSimpleKhcnStatic={props:{table_class:{type:String,default:"border-b w-full bg-white"},table_view:{type:String,default:""},title_remove:{type:String,default:"xo\xE1"},custom_table:{type:Boolean,default:()=>!1},remove:{type:Boolean,default:()=>!1},crud:{type:Boolean,default:()=>!1},import_data:{type:Boolean,default:()=>!1},export_data:{type:Boolean,default:()=>!1},export_data_label:{type:String,default:()=>"Export"},noHeader:{type:Boolean,default:()=>!1},noRouterr:{type:Boolean,default:()=>!1},storage:{type:Object,default:()=>null},widthSTT:{type:Number,default:()=>50},filter_options:{type:Array,default:()=>[]},table_config:{type:Array,default:()=>[]},title:{type:String,default:""},detailPage:{type:String,default:""},employee__table:{type:Boolean,default:!1},idtable:{type:String,default:"table__to__export"},db:{type:String,default:()=>localStorage.getItem("db")},collection:{type:String,default:()=>""},site:{type:String,default:()=>""},includes:{type:Array,default:()=>[]},sort:{type:Array,default:()=>[]},pagesize:{type:Number,default:()=>15},paging:{type:Boolean,default:()=>!0},condition:{type:Array,default:()=>[]},queryFilter:{type:Array,default:()=>[]},keywords:{type:Array,default:()=>[]},queryParam:{type:Boolean,default:()=>!0},empty:{type:Boolean,default:()=>!1},skeleton:{type:Object,default:()=>({th:[],td:[]})},exportTemplate:{type:String,default:""},exportTemplateTitle:{type:String,default:""},aggs_ext:{type:String,default:""},aggs_ext_keyAggs:{type:String,default:""},placeholderKeyowrds:{type:String,default:"T\xECm ki\u1EBFm ..."},treeParentKey:{type:String,default:"LoaiChiTieuRoot"},state_query:{type:Array,default:null},inlineFilter:{type:Boolean,default:()=>!1},items:{type:Array,default:()=>[]}},methods:{async init(e){let t=this;t.renderData=!1,t.rows=t.items.length,t.dataResults=t.items,t.totalRecord=t.items.length,t.renderData=!0},dateView(e,t,a,r){return window.Vue.dateView(e,t,a,r)},objectView(e,t,a){return window.Vue.objectView(e,t,a)},toDetail(e){if(this.detailPage&&this.detailPage.indexOf("?")!=-1){let[t,a]=this.detailPage.split("?"),r=[{key:"_id",value:e||"NULL"}];if(a&&a.indexOf("&")!=-1){let o=a.split("&");for(let n of o)if(n&&n.indexOf("=")!=-1){const[l,s]=n.split("=");r.push({key:l,value:s})}else r.push({key:n,value:""})}window.Vue.redirect(r,!1,t)}else window.Vue.redirect([{key:"_id",value:e||"NULL"}],!1,this.detailPage)},async paggingData(e){},async doExport(){let e=this;if(e.exportTemplate)window.Vue.$axios.post("/admin/vuejx/docx/generateexcel",{docFileName:e.exportTemplate,site:localStorage.getItem("site"),db:localStorage.getItem("db"),collection:e.collection,bodyQuery:e.bodyQuery,dataId:e.exportTemplateTitle},{responseType:"arraybuffer",headers:{Authorization:"Bearer "+localStorage.getItem("token"),token:localStorage.getItem("token"),"Content-Type":"application/json",Accept:"application/octet-stream"}}).then(t=>{const a=new Blob([t.data],{type:"application/octet-stream"});var r=document.createElement("a");r.href=window.URL.createObjectURL(a),r.download=e.exportTemplateTitle.endsWith(".pdf")?e.exportTemplateTitle:e.exportTemplateTitle+".xlsx",document.body.appendChild(r),r.click(),document.body.removeChild(r)}).catch(t=>{console.log(t)});else{let t=e.collection+".xlsx",a=JSON.stringify({fileName:t}),r={method:"post",url:"/admin/security/file/mongo2excel/"+e.db+"/"+e.collection+"/"+e.site,headers:{"Content-Type":"application/json",token:localStorage.getItem("token")},responseType:"blob",data:a};await window.Vue.$axios(r).then(function(o){const n=window.URL.createObjectURL(new Blob([o.data])),l=document.createElement("a");l.href=n,l.setAttribute("download",t),document.body.appendChild(l),l.click()}).catch(function(o){console.log(o)})}},async doImport(){}},watch:{$route:async function(e,t){let a=window.VueJX.page();if(t.params.page==a){let r=this;r.renderData=!1,await r.init(),r.renderData=!0}}},mounted:function(){let e=this;e.$nextTick(function(){e.renderData=!1,setTimeout(async()=>{await e.init(),e.renderData=!0},0)})},data:()=>({itemxxx:{},renderData:!1,site:localStorage.getItem("site"),rows:15,sizeLast:15,dataResults:[],dataResultsChild:{},page:1,pages:1,totalRecord:0,sortBack:[],sortNext:[],paggingType:"",indexTree:"",keyTree:"",checkAll:!1,ids:[],adv_filter:!1,bodyQuery:null,aggReport:{}}),template:`
    <div v-if="custom_table"><slot name="custom_view" v-bind:data="dataResults"></slot></div>
    <div class="vuejx__table" v-else>
        <div class="top-content flex" v-if="!noHeader">
            <div class=" content-title bg-blue-700 text-white flex items-center uppercase font-semibold relative"> {{ title }} </div>
        </div>
        <slot name="button_ext"></slot>
        <slot name="report_ext">
        <table v-if="!renderData" class="border-b w-full bg-white"> <thead class="w-full bg-white"> <slot name="thead"> <tr> <th width="50">STT</th> <th v-for="(item, index) of table_config" v-bind:key="index" :width="item.width" :class="item.class"> {{ item.title }} </th> </tr> </slot> </thead> <tbody class="w-full bg-white p-4"> <tr> <td colspan="100"> <p class="loading___table"> Ch\u1EDD trong gi\xE2y l\xE1t ... </p> </td> </tr> </tbody></table>
        <table :id="idtable" v-else :class="table_class" v-bind:style="{'border-bottom': (dataResults && dataResults.length == 0) ? 'unset' : ''}">
        <thead :class="{ 'w-full': !employee__table }">
            <slot name="thead_title"> </slot>
            <slot name="thead"> <tr><th width="50">STT</th> <th v-for="(item, index) of table_config" v-bind:key="index" :width="item.width" :class="item.class"> {{ item.title }} </th> </tr> </slot>
        </thead>
        <tbody class="border-b w-full bg-white"> <slot name="tbody" v-bind:page="rows" v-bind:data="dataResults"> <slot name="tbody_title"></slot>
            <template v-for="(item, index) in dataResults">
                <tr v-bind:key="index">
                    <td :width="widthSTT" align="center"
                        :class="{'bg-yellow-200': indexTree == item._id}"    
                    >{{ page * rows - rows + index + 1 }} </td>
                    <td v-for="(itemCf, indexx) of table_config" v-bind:key="indexx" :width="itemCf.width" 
                        :class="[{'bg-yellow-200': indexTree == item._id, 'font-bold text-blue-700': itemCf.aggs && aggReport[objectView(item, itemCf.value)]}, itemCf.class]"    
                        @click="itemCf.action ? '' : toDetail(item._id)" >
                        <slot :name="'cell_' + indexx" v-bind:celldata="item" v-bind:index="index">
                            <template v-if="itemCf.value_1 && itemCf.date ? dateView(item, itemCf.value_1) : objectView(item, itemCf.value_1)">
                                <span class="title_slot_table font-semibold" v-html="itemCf.value_title"></span>
                                <span v-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', ''))" v-html="item.highlight[itemCf.value.replace('_source.', '')].toString()"> </span>
                                <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.raw')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.raw'].toString()"> </span>
                                <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.keyword')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.keyword'].toString()"> </span>
                                <span v-html="itemCf.date ? dateView(item, itemCf.value) : objectView(item, itemCf.value)" v-else></span><br/>
                                <span class="title_slot_table font-semibold" v-html="itemCf.value_title_1"></span>
                                <span v-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value_1.replace('_source.', ''))" v-html="item.highlight[itemCf.value_1.replace('_source.', '')].toString()"> </span>
                                <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value_1.replace('_source.', '') + '.raw')" v-html="item.highlight[itemCf.value_1.replace('_source.', '') + '.raw'].toString()"> </span>
                                <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value_1.replace('_source.', '') + '.keyword')" v-html="item.highlight[itemCf.value_1.replace('_source.', '') + '.keyword'].toString()"> </span>
                                <span v-html="itemCf.date ? dateView(item, itemCf.value_1) : objectView(item, itemCf.value_1)" v-else></span>
                            </template>
                            <template v-if="itemCf.aggs">
                                {{ aggReport[objectView(item, itemCf.value)] ? aggReport[objectView(item, itemCf.value)] : 0 }}
                            </template>
                            <template v-else>
                                <span v-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', ''))" v-html="item.highlight[itemCf.value.replace('_source.', '')].toString()"> </span>
                                <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.raw')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.raw'].toString()"> </span>
                                <span v-else-if="item.hasOwnProperty('highlight') && item.highlight.hasOwnProperty(itemCf.value.replace('_source.', '') + '.keyword')" v-html="item.highlight[itemCf.value.replace('_source.', '') + '.keyword'].toString()"> </span>
                                <span v-html="itemCf.date ? dateView(item, itemCf.value) : objectView(item, itemCf.value)" v-else></span>
                            </template>
                        </slot>
                    </td>
                </tr>
            </template>
            </slot>
        </tbody>
        </table>
        </slot>
    </div>
    `},VuejxCMS={props:{crud:{type:Boolean,default:()=>!1},remove:{type:Boolean,default:()=>!0},import_data:{type:Boolean,default:()=>!0},export_data:{type:Boolean,default:()=>!0},tags:{type:Array,default:()=>[]},mode:{type:String,default:()=>"edit"}},methods:{async init(renderList){let vm=this;renderList?vm.renderpage=0:vm.renderpage++;const newRoute=window.Vue.router.currentRoute.value;let condition={bool:{should:[]}};for(const e of vm.tags)condition.bool.should.push({match:{tag:e}});if(newRoute.query._collection&&(vm.collection=newRoute.query._collection,condition.bool.should.push({match:{shortName:{query:vm.collection,boost:10}}})),newRoute.query._id&&(vm.id=newRoute.query._id),renderList){vm.tableConfig=null;const searchData=await window.VueJX.search(vm,"vuejx_collection",[],[],[condition],null,[{_score:"desc"},{order:"asc"}],"regular",1e4,!1,1e4);if(searchData&&Array.isArray(searchData.dataResults)&&searchData.dataResults.length>0)if(vm.collections=searchData.dataResults,Array.isArray(vm.collections)&&vm.collections.length>0)if(vm.detail=vm.collections[0]._source,vm.detail.tableConfig&&String(vm.detail.tableConfig).length>20&&(vm.tableConfig=eval("( "+vm.detail.tableConfig+" )")),vm.detail.metadataConfig&&String(vm.detail.metadataConfig).length>20?(vm.metadataConfig=eval("( "+vm.detail.metadataConfig+" )"),vm.metadataConfig&&Array.isArray(vm.metadataConfig.form)&&vm.metadataConfig.form.push({type:"done"})):vm.metadataConfig={type:0,form:[{model:"MaMuc",type:"text",class:"xs12 sm4",label:"M\xE3 M\u1EE5c:"},{model:"TenMuc",type:"text",class:"xs12 sm8",label:"TenMuc:"},{type:"done"}]},vm.tableConfig&&Array.isArray(vm.tableConfig.config_columns))for(let e of vm.tableConfig.config_columns)e.value=e.field,e.title=e.headerText,e.width=e.width,e.class||(e.class="text-left");else vm.tableConfig={title:"Danh s\xE1ch",columns:["MaMuc","TenMuc"],config_columns:[{field:"_source.MaMuc",field_query:"MaMuc",field_sort:"MaMuc",headerText:"MaMuc",class:"text-left",width:250,minWidth:250,value:"_source.MaMuc",title:"MaMuc"},{field:"_source.TenMuc",field_query:"TenMuc",field_sort:"TenMuc",headerText:"TenMuc",class:"text-left",value:"_source.TenMuc",title:"TenMuc"}],filter_options:[{keyName:"MaMuc",keyCode:"MaMuc",fields:"input",class:"xs12 sm3 px-2",model:"MaMuc"},{keyName:"TenMuc",keyCode:"TenMuc.raw",fields:"input",class:"xs12 sm3 px-2",model:"TenMuc.raw"}],re_calculator:[{key:"MaMuc",relation:"eq"},{key:"TenMuc.raw",relation:"eq"}],sort:[{createdAt:"asc"}]};else vm.detail=null,vm.tableConfig=null,vm.metadataConfig=null;else vm.collections=[],vm.detail=null,vm.tableConfig=null,vm.metadataConfig=null}},backCol(){let e=[];e.push({key:"_id",value:""}),e.push({key:"_t",value:new Date().getTime()}),window.Vue.redirect(e)},pickColl(e,t){let a=[];a.push({key:"_collection",value:e}),a.push({key:"_idCol",value:t}),a.push({key:"_id",value:""}),a.push({key:"_pagging",value:""}),a.push({key:"_page",value:"1"}),a.push({key:"_s_n",value:""}),a.push({key:"_s_b",value:""}),a.push({key:"keywords",value:""}),a.push({key:"_t",value:new Date().getTime()}),window.Vue.redirect(a)},afterSubmit(){const e=window.Vue.router.currentRoute.value;let t=[];t.push({key:"_collection",value:e.query._collection}),t.push({key:"_idCol",value:e.query._idCol}),t.push({key:"_id",value:""}),setTimeout(()=>{window.Vue.redirect(t)},500)}},watch:{$route:async function(e,t){if(t.query!=e.query){let a=this;a.id="",console.log(t.query._collection,e.query._collection),await a.init(t.query._collection!=e.query._collection)}}},mounted:function(){let e=this;console.log("mountedmounted"),e.$nextTick(function(){setTimeout(async()=>{await e.init(!0)},0)})},data:()=>({collections:[],collection:"",detail:null,tableConfig:null,metadataConfig:null,id:"",site:localStorage.getItem("site"),vuejxData:{},searchCol:"",renderpage:0}),template:`
    <div class="flex-grow flex min-h-0 container grid-list-md">
        <section class="flex flex-col w-full max-w-xs flex-none bg-gray-100 min-h-0 overflow-auto h-screen">
            <div class="flex flex-wrap py-1 mb-0 px-4 pl-0 relative">
                <div class="w-full">
                    <input v-model="searchCol" class="appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-2 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-400" placeholder="T\xECm ki\u1EBFm \u0111\u1ED1i t\u01B0\u1EE3ng ...">
                </div>
                <article tabindex="-1" v-if="detail"
                    class="border-primary w-full mt-3 cursor-pointer border rounded-md p-3 bg-white flex text-gray-700 hover:border-primary focus:outline-none focus:border-primar"><span class="flex-none pt-0 pr-2">1.</span>
                    <div class="flex-1">
                    <header class="mb-1">
                        <h4 class="inline text-blue-700">{{ detail.shortName }}</h4>
                    </header>
                    <header class="mb-1"><span class="font-semibold">{{ detail.title }}</span></header>
                    </div>
                </article>
            </div>
            <div class="scrollbar p-4 pl-0 pt-1 pb-32">
            <ul>
                <li v-for="(item, index) of collections" v-bind:key="index" @click="pickColl(item?._source?.shortName, item?._id)"
                    :class="[{'hidden': !String(item?._source?.shortName).toLocaleLowerCase().includes(String(searchCol).toLocaleLowerCase())}, item?._source?.shortName]"
                >
                    <article v-if="index > 0" tabindex="-1" class="cursor-pointer border rounded-md p-3 bg-white flex text-gray-700 mb-2 hover:border-primary focus:outline-none focus:border-primar">
                        <span class="flex-none pt-0 pr-2">{{ index + 1 }}.</span>
                        <div class="flex-1">
                        <header class="mb-1">
                            <h4 class="inline text-blue-700">{{ item?._source?.shortName }}</h4>
                        </header>
                        <header class="mb-1"><span class="font-semibold">{{ item?._source?.title }}</span></header>
                        </div>
                    </article>
                </li>
            </ul>
            </div>
        </section>
        <section class="flex min-h-0 flex-col flex-auto border bg-white" v-if="detail" :key="renderpage">
            <div class="mirror__form" v-if="tableConfig && !id">
                <vuejx-table-simple-khcn class="m-2" :keywords="['MaMuc', 'TenMuc', 'shortName', 'title', 'TenMuc.raw', 'title.raw', 'TenMuc.keyword', 'title.keyword']"
                    :crud="!crud" :remove="remove" :import_data="import_data" :export_data="export_data"
                    :pagesize="15" :db="detail.storeDb" :collection="detail.shortName" :sort="tableConfig.sort"
                    :title="detail.title"
                    :table_config="tableConfig.config_columns"
                    :filter_options="tableConfig.filter_options"
                    :queryFilter="tableConfig.re_calculator"
                    :state_query="['_collection', '_idCol']"
                >
                </vuejx-table-simple-khcn>
            </div>
            <div class="mirror__form m-2" v-if="tableConfig && id">
            <div class="top-content flex items-center bg-white rounded p-1 cursor-pointer"><div @click="backCol" class="text-green-700 uppercase font-bold"><i class="mdi mdi-backburger text-xs mr-1"></i> {{ detail.title }} </div></div>
                <vuejx-screen
                    ref="uploadFile"
                    grid_class="flex flex-wrap cms_form"
                    :site="$site"
                    :db="detail.storeDb"
                    :collection="detail.shortName"
                    :config="metadataConfig"
                    v-model="vuejxData"
                    :customRedirect="true"
                    @afterSubmit="afterSubmit"
                ></vuejx-screen>
            </div>
        </section>
        <section class="flex min-h-0 flex-col flex-auto border bg-white" v-else>
            <div class="font-bold text-center p-4 pt-64">
                Qu\u1EA3n l\xFD d\u1EEF li\u1EC7u danh m\u1EE5c
            </div> 
        </section>
    </div>
    `};const instanceOfAny=(e,t)=>t.some(a=>e instanceof a);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(e){const t=new Promise((a,r)=>{const o=()=>{e.removeEventListener("success",n),e.removeEventListener("error",l)},n=()=>{a(wrap(e.result)),o()},l=()=>{r(e.error),o()};e.addEventListener("success",n),e.addEventListener("error",l)});return t.then(a=>{a instanceof IDBCursor&&cursorRequestMap.set(a,e)}).catch(()=>{}),reverseTransformCache.set(t,e),t}function cacheDonePromiseForTransaction(e){if(transactionDoneMap.has(e))return;const t=new Promise((a,r)=>{const o=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",l),e.removeEventListener("abort",l)},n=()=>{a(),o()},l=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",n),e.addEventListener("error",l),e.addEventListener("abort",l)});transactionDoneMap.set(e,t)}let idbProxyTraps={get(e,t,a){if(e instanceof IDBTransaction){if(t==="done")return transactionDoneMap.get(e);if(t==="objectStoreNames")return e.objectStoreNames||transactionStoreNamesMap.get(e);if(t==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return wrap(e[t])},set(e,t,a){return e[t]=a,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function replaceTraps(e){idbProxyTraps=e(idbProxyTraps)}function wrapFunction(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...a){const r=e.call(unwrap(this),t,...a);return transactionStoreNamesMap.set(r,t.sort?t.sort():[t]),wrap(r)}:getCursorAdvanceMethods().includes(e)?function(...t){return e.apply(unwrap(this),t),wrap(cursorRequestMap.get(this))}:function(...t){return wrap(e.apply(unwrap(this),t))}}function transformCachableValue(e){return typeof e=="function"?wrapFunction(e):(e instanceof IDBTransaction&&cacheDonePromiseForTransaction(e),instanceOfAny(e,getIdbProxyableTypes())?new Proxy(e,idbProxyTraps):e)}function wrap(e){if(e instanceof IDBRequest)return promisifyRequest(e);if(transformCache.has(e))return transformCache.get(e);const t=transformCachableValue(e);return t!==e&&(transformCache.set(e,t),reverseTransformCache.set(t,e)),t}const unwrap=e=>reverseTransformCache.get(e);function openDB(e,t,{blocked:a,upgrade:r,blocking:o,terminated:n}={}){const l=indexedDB.open(e,t),s=wrap(l);return r&&l.addEventListener("upgradeneeded",u=>{r(wrap(l.result),u.oldVersion,u.newVersion,wrap(l.transaction))}),a&&l.addEventListener("blocked",()=>a()),s.then(u=>{n&&u.addEventListener("close",()=>n()),o&&u.addEventListener("versionchange",()=>o())}).catch(()=>{}),s}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(cachedMethods.get(t))return cachedMethods.get(t);const a=t.replace(/FromIndex$/,""),r=t!==a,o=writeMethods.includes(a);if(!(a in(r?IDBIndex:IDBObjectStore).prototype)||!(o||readMethods.includes(a)))return;const n=async function(l,...s){const u=this.transaction(l,o?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(s.shift())),(await Promise.all([c[a](...s),o&&u.done]))[0]};return cachedMethods.set(t,n),n}replaceTraps(e=>H(Q({},e),{get:(t,a,r)=>getMethod(t,a)||e.get(t,a,r),has:(t,a)=>!!getMethod(t,a)||e.has(t,a)})),window.decompressSync=decompressSync,window.strToU8=strToU8,window.strFromU8=strFromU8,window.compressSync=gzipSync,window.sleep=sleep;const dbPromise=openDB("vuejx_app_admin",1,{upgrade(e,t,a){e.createObjectStore("screens_admin")}});window.db={set:async function(e,t){try{return(await dbPromise).put("screens_admin",t,e)}catch{}},get:async function e(t){try{return(await dbPromise).get("screens_admin",t)}catch{}}};function padTo2Digits(e){return e.toString().padStart(2,"0")}function formatDate(e){return[padTo2Digits(e.getDate()),padTo2Digits(e.getMonth()+1),e.getFullYear()].join("/")}function formatDateTimeX(e){return[padTo2Digits(e.getDate()),padTo2Digits(e.getMonth()+1),e.getFullYear()].join("/")+" "+[padTo2Digits(e.getHours()),padTo2Digits(e.getMinutes())].join(":")}window.VueJX={formatDate:function(e){return formatDate(e)},formatDateTime:function(e){return formatDateTimeX(e)},dataReportQuery:async function(e){return await dataReport(e)},initPagePull:async function(e,t){return await initPage(e,t)},pageURL:function(){let e=window.location.hash.split("/");return window.location.hash.indexOf("?")!=-1&&(e=window.location.hash.substring(0,window.location.hash.indexOf("?")).split("/")),e},page:function(){let e=window.VueJX.pageURL(),t="";return Array.isArray(e)&&e.length>0&&e[e.length-1]&&(t=e[e.length-1]),t},search:async function(e,t,a,r,o,n,l,s,u,c,d,p,h,v){return await search(e,t,a,r,o,n,l,s,u,c,d,p,h)},aggs:async function(e,t,a,r,o,n,l,s,u,c,d,p,h,v,y,O,T,M){return await aggsData(e,t,a,r,o,n,l,s,u,c,d,p,h,v,y,O,T,M)},scriptForm:async function(e,t){return await pullScriptForm(e,t)},dispatch:async function(e,t){let a=null,r=t.variables,o=t.query;return e==="vuejx_manager/graphqlQuery"?(r.token=localStorage.getItem("token"),r.db=localStorage.getItem("db"),a=await graphqlQuery(o,r)):e==="vuejx_manager/userById"?a=await userById(t):e==="vuejx_manager/userUpdateMany"?a=await userUpdateMany(t):e==="vuejx_manager/userOne"?a=await userOne(t):e==="vuejx_manager/userCreate"||e==="vuejx_manager/userUpdateById"?a=await processData(t):e==="vuejx_manager/userUpdateOne"?a=await processDataOne(t):e==="vuejx_manager/xlsxtemplate"?a=await xlsxtemplate(t):e==="vuejx_manager/topdf"?a=await htmlToPdf(t):e==="vuejx_manager/docxtemplate"&&(a=await docxtemplate(t)),a}};const buildSite=async data=>{do console.log("waiting instant"),await sleep(50);while(!window.Vue);if(data.guestHeaderConfig&&data.guestHeaderConfig.length>50){let vueSiteGuest=eval("( "+data.guestHeaderConfig+" )");vueSiteGuest&&(vueSiteGuest.props={siteCss:{type:String,default:'<style type="text/css">'+data.cssConfig+"</style>"}},vueSiteGuest.template='<div v-html="siteCss"></div> '+vueSiteGuest.template,window.Vue.component(data.shortName+"___web_header",vueSiteGuest))}if(data.groupHeaderConfig&&data.groupHeaderConfig.length>50){let vueSiteGroup=eval("( "+data.groupHeaderConfig+" )");vueSiteGroup&&(vueSiteGroup.props={siteCss:{type:String,default:'<style type="text/css">'+data.cssConfig+"</style>"}},vueSiteGroup.template='<div v-html="siteCss"></div> '+vueSiteGroup.template,window.Vue.component(data.shortName+"___group_header",vueSiteGroup))}if(data.guestFooterConfig&&data.guestFooterConfig.length>50){let guestFooterConfig=eval("( "+data.guestFooterConfig+" )");window.Vue.component(data.shortName+"___web_footer",guestFooterConfig)}if(data.groupFooterConfig&&data.groupFooterConfig.length>50){let groupFooterConfig=eval("( "+data.groupFooterConfig+" )");window.Vue.component(data.shortName+"___group_footer",groupFooterConfig)}},buildPage=async data=>{do console.log("waiting instant"),await sleep(50);while(!window.Vue);let vueForm=eval("( "+data.pageConfig+" )");if(vueForm&&(vueForm.props={siteCss:{type:String,default:'<style type="text/css">'+data.cssConfig+"</style>"}},vueForm.template=vueForm.template+' <div v-html="siteCss"></div> ',window.Vue.component(data.shortName,vueForm)),data.pageFooterConfig&&data.pageFooterConfig.length>50){let vueFormHeader=eval("( "+data.pageHeaderConfig+" )");window.Vue.component(data.shortName+"___header",vueFormHeader)}if(data.pageFooterConfig&&data.pageFooterConfig.length>50){let vueFormFooter=eval("( "+data.pageFooterConfig+" )");window.Vue.component(data.shortName+"___footer",vueFormFooter)}},initPage=async(e,t)=>{let a={webNav:[],groupNav:[]},r=localStorage.getItem("site");do console.log("waiting instant"),r=localStorage.getItem("site"),await sleep(50);while(!r);let o=window.location.hash.split("/");window.location.hash.indexOf("?")!=-1&&(o=window.location.hash.substring(0,window.location.hash.indexOf("?")).split("/")),Array.isArray(o)&&o.length>=3&&(o[1]=="group"||o[1]=="web");let n={size:1,_source:{includes:["shortName","app_view","dataApp","webGroupData","webNavData","ext_menu"]},query:{bool:{filter:{match:{shortName:localStorage.getItem("site")}}}}};var l=new Headers;l.append("Content-Type","application/json;charset=UTF-8"),l.append("Accept","application/json, text/plain, */*");var s={method:"POST",headers:l,body:JSON.stringify({query:`
                query search($token: String, $bodySite: JSON) {
                    sites: search(token: $token, body: $bodySite, db: "`+localStorage.getItem("db")+`", collection: "vuejx_site")
                }
            `,variables:{token:localStorage.getItem("token"),bodySite:n}}),redirect:"follow"};return await fetch("/admin/vuejx/",s).then(u=>u.json()).then(u=>{const c=u.data;if(Array.isArray(c.sites.hits.hits)&&c.sites.hits.hits.length>0){const d=JSON.parse(c.sites.hits.hits[0]._source.webNavData);Array.isArray(d)&&d.length>0&&(Object.values(d[0])[0].shortName,window.db.set("webNav",{id:"webNav",page:d}),u.webNav=d);const p=JSON.parse(c.sites.hits.hits[0]._source.webGroupData);console.log("webGroupData",p),Array.isArray(p)&&p.length>0&&(Object.values(p[0])[0].shortName,window.db.set("groupNav",{id:"groupNav",page:p}),u.groupNav=p),c.sites.hits.hits[0]._source.ext_menu&&localStorage.setItem("ext_menu",c.sites.hits.hits[0]._source.ext_menu)}}).catch(u=>{console.log("error",u)}),a};window.initPage=async function(e,t){return await initPage()},window.buildPageView=async function(e){return await buildPage(e)},window.buildSiteView=async function(e){return await buildSite(e)};let index=0;async function startUI(){window.Vue?(window.Vue.$axios=axios,window.Vue.doneInit=!1,window.Vue.initBuild={page:async function(e,t){return await initBuildPage(e,t)},initPageProcess:async function(e,t){return await initPage()}},window.Vue.router.currentRoute.value.params.page,window.Vue.router.currentRoute.value.params.visibility==="login",window.Vue.$root={$store:{dispatch:async function(e,t){return await window.VueJX.dispatch(e,t)}},dispatch:async function(e,t){return await window.VueJX.dispatch(e,t)}},window.Vue.component("vuejx-header-simple",VueJXHeaderSimple),window.Vue.component("vuejx-nav-vertical",VueJXNavVertical),window.Vue.component("vuejx-nav-vertical-info",VueJXNavVerticalInfo),window.Vue.component("vuejx-table-simple",Table),window.Vue.component("vuejx-table-simple-khcn",tableSimpleKhcn),window.Vue.component("vuejx-table-simple-khcn-guest",tableSimpleKhcn),window.Vue.component("vuejx-view-khcn",tableViewKhcn),window.Vue.component("vuejx-table-pagging",tableSimplePagging),window.Vue.component("vuejx-table-simple-khcn-top",tableSimpleTop),window.Vue.component("vuejx-menu-aggs",VueJXMenuAggs),window.Vue.component("vuejx-menu-aggs-view",VueJXMenuAggsView),window.Vue.component("qlvt-filter",QLVTFilter),window.Vue.component("vuejx-data-report",VuejxDataReport),window.Vue.component("vuejx-done",VuejxDone),window.Vue.component("mt-quan-trac",MTQuanTrac),window.Vue.component("vuejx-preview-report",MTPreview),window.Vue.component("vuejx-leaflet-wrap",VueJXLeafletWrap),window.Vue.component("vuejx-table-simple-selected",tableSimpleSelect),window.Vue.component("vuejx-table-simple-khcn-static",tableSimpleKhcnStatic),window.Vue.component("vn-data-cms",VuejxCMS),window.Vue.initVueData=async function(e,t,a){let r=window.Vue.router.currentRoute.value.query,o=[];for(const n in a)typeof a[n]=="object"?(o.push(n),e[n]=a[n]):r.hasOwnProperty(a[n])&&(e[n]=r[a[n]],o.push(n));for(const n in t)o.indexOf(n)==-1&&(e[n]=t[n]);e.db=localStorage.getItem("db"),e.site=localStorage.getItem("site"),e.renderPage=!0},window.Vue.redirect_page=function(e,t,a,r){try{let o=window.Vue.router.currentRoute.value.query;if(Array.isArray(t)){let n=[];for(const l in o)r?n.push({key:l,value:""}):t.indexOf(l)==-1&&l!="_t"&&l!="t"?n.push({key:l,value:o[l]}):n.push({key:l,value:""});a&&Array.isArray(a)&&(n=[...n,...a]),window.Vue.redirect(n,!0,e)}}catch{}},window.Vue.redirect=function(e,t,a,r,o,n,l){let s=window.location.hash;window.location.hash&&window.location.hash.indexOf("?")!=-1&&(s=window.location.hash.substring(window.location.hash.indexOf("?")+1));let u="";if(window.location.hash.startsWith("#/")){const[h,v]=window.location.hash.split("?");u=h}else u=window.location.pathname;a!==""&&a!==void 0&&a!==null&&(u=a);let c={},d=window.Vue.router.currentRoute.value.query;for(const h in d)if(Array.isArray(d[h])){o=!0;break}if(o)c=d;else{let h=/[?&]([^=#]+)=([^&#]*)/g,v={};for(;v=h.exec("&"+s);)c[v[1]]=decodeURIComponent(v[2])}if(n)if(u&&u.indexOf("?")!==-1){let h=/[?&]([^=#]+)=([^&#]*)/g,v={},y={};for(;v=h.exec("&"+u.substring(u.indexOf("?")+1));)y[v[1]]=decodeURIComponent(v[2]);u=u.substring(0,u.indexOf("?")+1);for(let O in y)O!=="t"&&O!=="_filter"&&(c[O]=y[O])}else u+="?";else u+="?";r&&(c={}),l&&(c=l),e==null&&(e=[]);let p={};if(o){let h={},v={};for(let y=e.length-1;y>=0;y--)Array.isArray(e[y].value)?h.hasOwnProperty(e[y].key)?e.splice(y,1):h[e[y].key]=e[y].value:(v.hasOwnProperty(e[y].key)||(v[e[y].key]=[]),v[e[y].key].push(e[y].value),h.hasOwnProperty(e[y].key)?h[e[y].key]&&Array.isArray(h[e[y].key])&&h[e[y].key].indexOf(e[y].value)>=0&&e.splice(y,1):h.hasOwnProperty(e[y].key+"___"+e[y].value)?e.splice(y,1):h[e[y].key+"___"+e[y].value]=e[y].value);for(const y of e)if(y.key!=="t"&&y.value!==""&&y.value!==void 0&&y.value!==null)if(p[y.key]=1,Array.isArray(y.value))for(let O of y.value)v[y.key]&&v[y.key].indexOf(O)>=0&&(u+=y.key+"="+O+"&");else u+=y.key+"="+y.value+"&";else y.value===""&&(c[y.key]="",p[y.key]=1)}else for(const h of e)Array.isArray(d[h.key])?c[h.key]=d[h.key]:c[h.key]=h.value;delete c.undefined,delete c.null;for(let h in c)if(h!=="t"&&c[h]!==""&&c[h]!==void 0&&c[h]!==null&&!p.hasOwnProperty(h))if(Array.isArray(c[h]))for(let v of c[h])u+=h+"="+v+"&";else u+=h+"="+c[h]+"&";u=u.replace(/&$/,"").replace(/\?$/,""),t&&(u&&u.indexOf("?")>0?u+="&t="+new Date().getTime():u+="?t="+new Date().getTime()),window.Vue.router.push(u.replace(/#/,""))},window.Vue.dateViewYear=function(e,t,a){const r=window.Vue.get(e,t,a);if(r&&String(r)!="0"){const o=new Date(parseInt(r));return new Date(parseInt(r))=="Invalid Date"?a:o.getFullYear()}else return a},window.Vue.dateViewMonthYear=function(e,t,a){let r=window.Vue.dateView(e,t,a);return r?r.substr(3):a},window.Vue.dateView=function(e,t,a,r){const o=window.Vue.get(e,t,a);if(o&&String(o)!="0"){const n=new Date(parseInt(o));return new Date(parseInt(o))=="Invalid Date"?a:formatDate(n)}else return a},window.Vue.dateTimeView=function(e,t,a,r){const o=window.Vue.get(e,t,a);if(o&&String(o)!="0"){const n=new Date(parseInt(o));return new Date(parseInt(o))=="Invalid Date"?a:formatDateTimeX(n)}else return a},window.Vue.objectView=function(e,t,a){let r=window.Vue.get(e,t,a);return r&&typeof r=="string"&&(r=r.replace(/\n/g,"<br/>")),r},window.Vue.objectViewObject=function(e,t,a){return window.Vue.get(e,t,a)},window.Vue.doneInit=!0):(index++,await sleep(50),index<200&&await startUI())}startUI()});
